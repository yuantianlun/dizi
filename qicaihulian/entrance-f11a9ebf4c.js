!function e(t,i,a){function s(o,r){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=i[o]={exports:{}};t[o][0].call(c.exports,function(e){var i=t[o][1][e];return s(i?i:e)},c,c.exports,e,t,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(e,t,i){var a={preURLLink:document.referrer,decodeUrl:function(e){return"string"==typeof e?decodeURIComponent(e):void 0},getQueryParam:function(e){e=e||document.location.href;var t=e.substring(e.lastIndexOf("?")+1);t.lastIndexOf("#")>=0&&(t=t.substring(0,t.lastIndexOf("#")));for(var i=t.split("&"),s={},n=0;n<i.length;n++){var o=i[n];try{var r=o.substring(0,o.indexOf("=")),l=o.substring(o.indexOf("=")+1);if(0==r.length)continue;/^-?(\d+)(\.\d+)?$/.test(l)?0===l.indexOf("0")?s[r]=""+l:(""+l).length>10?s[r]=""+l:s[r]=Number(l):"true"===l?s[r]=!0:"false"===l?s[r]=!1:s[r]=a.decodeUrl(l)}catch(c){continue}}return s},getUrlRegex:function(e){e=e.replace(/&amp;/g,"&"),e=e.replace(/&amp/g,"&");for(var t="",i=e.split(/\s+/),a=0;a<i.length;a++){var s=function(e){var t=/((https?|ftp|news):\/\/)?([a-zA-Z]([a-z0-9A-Z\-]*[\.])+([a-zA-Z]{2}|(aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)(:[0-9]{1,4})?)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:[0-9]{1,4})?)(\/[a-zA-Z0-9_%=#\-\.~]+)*(\/([a-zA-Z0-9%=#_\-\.]*)(\?[a-zA-Z0-9+_\/\-\.#%=&]*)?)?(#[a-zA-Z][a-zA-Z0-9_]*)?$/;if(e.match(t)){var i=/(https?):\/\/([a-zA-Z]([a-z0-9A-Z\-]*[\.])+([a-zA-Z]{2}|(aero|arpa|biz|com|coop|edu|gov|info|int|jobs|mil|museum|name|nato|net|org|pro|travel)(:[0-9]{1,4})?)|(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:[0-9]{1,4})?)(\/[a-zA-Z0-9_%=#\-\.~]+)*(\/([a-zA-Z0-9%=#_\-\.]*)(\?[a-zA-Z0-9+_\/\-\.#%=&]*)?)?(#[a-zA-Z][a-zA-Z0-9_]*)?$/;e=e.match(i)?'<a href="'+e+'" target="_blank">'+e+"</a>":'<a href="http://'+e+'" target="_blank">'+e+"</a>"}return e+" "}(i[a]);t+=s}return t},getNewUrlRegex:function(e){e=e.replace(/&amp;/g,"&"),e=e.replace(/&amp/g,"&");for(var t="",i=e.split(/\s+/),a=0;a<i.length;a++){var s=function(e){var t=/^(((https?):\/\/)|(www))[a-zA-Z0-9_\-]+((\.(com|cn|org))|(:[0-9]{2,4}))?(:[0-9]{2,4})?([:\/\?\.&\-=a-zA-Z0-9;#%_]+)?$/g;if(e.match(t))e=e.match(t)?'<a href="'+e+'" target="_blank">'+e+"</a>":'<a href="http://'+e+'" target="_blank">'+e+"</a>";else{var i=/((www.)|((https?):\/\/))[a-zA-Z0-9_\-]+((\.(com|cn|org))|(:[0-9]{2,4}))?(:[0-9]{2,4})?([:\/\?\.&\-=a-zA-Z0-9;#%_]+)?/g,a=e.match(i),s=a;if(a&&a.length>0){var n=e.indexOf(a[0]),o=a[0].indexOf("http");if(s=o>=0?'<a href="'+a[0]+'" target="_blank">'+a[0]+"</a>":'<a href="http://'+a[0]+'" target="_blank">'+a[0]+"</a>",0===n)e=s+e.substring(a[0].length,e.length);else{var r=e.substring(0,n),l=r+a[0],c=e.substring(l.length,e.length);e=r+s+c}}}return e+" "}(i[a]);t+=s}return t},format:function(e,t,i){if(i){var a;if("object"==typeof t)for(var s in t){var n="{"+s+"}";a=e.replace(n,t[s])}else for(var o=0;o<t.length;o++){if(void 0==t[o])return"";var n="{"+o+"}";a=e.replace(n,t[o])}return a}return e},detectEventSupport:function(e){var t,i=document.createElement("div");return e="on"+e,t=e in i,t||(i.setAttribute(e,"xxx"),t="function"==typeof i[e]),i=null,t}};t.exports=a},{}],2:[function(e,t,i){t.exports={errorlogPath:"log.sobot.com/errorlog/"}},{}],3:[function(e,t,i){var a=function(t){var i=e("./comm.js"),a=e("./util/promise.js"),s=e("./initText.js"),n=new a,o={config_url:"/chat/user/config.action",init_url:"/chat/user/init.action",active_url:"/chat/user/productRecommend.action",multi_url:"/chat-web/user/questionRecommend.action"},r=window.navigator.userAgent.indexOf("Mobile")>=0,l={};l.cacheInfo={},l.cacheInfo.flags={status:"enabled",isLoaded:!1,pageNow:1,pageSize:20,moreHistroy:!1,isConnected:!1,isEnableManual:!1,isEnableOnInput:!0,isGetCustomConfig:!1,isEnableBigImg:!0,isPeopleModel:!1,isWaitModel:!1,isTimeLine:!1,isUserTalked:!1,isSurveyed:!1,isKeepSessions:!1,isOutOneMinute:!1};var c=!0,d=i.getQueryParam(),u=function(e){var t=!0;if(e.whiteListFlag){if(e.domainWhiteList){t=!1;var i=e.domainWhiteList.split(","),a=l.cacheInfo.urlParams;if(a.unit&&"__"===a.unit){for(var s=window.location.host,n=0;n<i.length;n++)if(i[n].indexOf(s)>=0){t=!0;break}return t}var o=document.referrer||"";if(o){for(var r=/http(s)?:\/\/[a-zA-Z0-9]+\.[a-zA-Z0-9\-]+(\.[a-zA-Z0-9]*)*/g,o=o.match(r),n=0;n<i.length;n++)if(i[n].indexOf(o)>=0){t=!0;break}return t}return t}return t}return t},f=function(e){if(e.whiteListFlag){var t=u(e);if(!t)throw alert("未在白名单中设置该域名对聊天组件的访问权限"),"未在白名单中设置该域名对聊天组件的访问权限"}},p={initParams:function(){var e=l.cacheInfo.urlParams={},t=i.getQueryParam();if(t)for(var a in t)e[a]=t[a];if(l.cacheInfo.urlParams.lan){var s=l.cacheInfo.urlParams.lan;switch(s){case"en":l.cacheInfo.urlParams.lanFlag=1;break;default:l.cacheInfo.urlParams.lanFlag=0}}},initUA:function(){var e=l.cacheInfo.UAInfo={},t=["mz","xiaomi","android","ipad","iphone"],i=["windows","linux","mac"],a=t.length,s=i.length,n=navigator.userAgent.toLowerCase(),o=$(window).width(),r=$(window).height(),c=0,d="iphone-5",u="";e.uaHeight=r;for(var f=0,p="";f<a&&!u.length;f++){if(p=t[f],c=n.indexOf(p),"iphone"===p&&c>0){switch(o>310&&o<320&&(o=1),o>365&&o<385&&(o=2),o>404&&o<424&&(o=3),o){case 1:d="iphone-5";break;case 2:d="iphone-6";break;case 3:d="iphone-6+"}e.iphoneVersion=d,e.UA=p;break}if(c>0){e.UA=p;break}}if(c<=0)for(var f=0,p="";f<s;f++)if(p=i[f],c=n.indexOf(p),c>0){e.UA="pc";break}},initBrowser:function(){for(var e=l.cacheInfo.browser={},t=["mqqbrowser","qq","micromessenger","MicroMessenger","ucbrowser","miuibrowser","safari","opera mobi","opera mini","firefox"],i=t.length,a=navigator.userAgent.toLowerCase(),s=0,n=0,o="";n<i;n++)if(o=t[n],s=a.indexOf(o),s>0)return void(e.browser=o)},initLanguage:function(){var e=l.cacheInfo.language={};c?e.open=!0:e.open=!1},initEventType:function(){var e=l.cacheInfo.eventType={};if("xiaomi"==l.cacheInfo.UAInfo.UA)e.type="mousedown";else if("pc"!=l.cacheInfo.UAInfo.UA){var t=/hp-tablet/gi.test(navigator.appVersion),i="ontouchstart"in window&&!t;e.type=i?"touchstart":"mousedown"}else e.type="click"},initUserInfo:function(){var e=r?4:0,t=i.getQueryParam(),a=t.source;"number"==typeof a&&(e=a),l.cacheInfo.userInfo={source:e,tel:t.tel?t.tel:"",uname:t.uname?t.uname:"",partnerId:t.partnerId?t.partnerId+"":"",email:t.email?t.email:"",visitUrl:t.visitUrl?t.visitUrl:i.preURLLink,visitTitle:t.visitTitle?t.visitTitle:"",face:t.face?t.face:"",back:t.back?t.back:"",realname:t.realname?t.realname:"",weibo:t.weibo?t.weibo:"",weixin:t.weixin?t.weixin:"",qq:t.qq?t.qq:"",sex:t.sex?t.sex:0===t.sex?0:"",birthday:t.birthday?t.birthday:"",remark:t.remark?t.remark:"",color:t.color?t.color:"",modulType:t.modulType?t.modulType:"",params:t.params?t.params:"",lastCid:t.cid?t.cid:"",customerFields:t.customerFields?t.customerFields:"",multiParams:t.multiParams?t.multiParams:""}},initSysNum:function(){l.cacheInfo.sysNum=i.getQueryParam().sysNum}},m=function(){var e=new a;return setTimeout(e.resolve,0),e},g=function(e,t){var i=["leaveMessage.html"],a=0,s={};for(var n in e)s[n]=e[n];s.uname=t.apiInit.uname,s.ticketShowFlag=t.apiConfig.ticketShowFlag,s.uname=t.apiInit.uname,s.userId=t.apiInit.userId,s.pid=t.apiInit.pid;for(var n in s){var o=encodeURIComponent(s[n]);o.length>50||(0==a?i.push("?"):i.push("&"),i.push(n+"="+o),a++)}var r=i.join("");return r},v=function(e){if(void 0===e||null===e||e!==e)return"";try{return decodeURIComponent(e)}catch(t){return""}},h=function(){m().then(function(e,t){var t=t||new a;return p.initUA(),p.initParams(),p.initLanguage(),p.initSysNum(),p.initBrowser(),p.initUserInfo(),p.initEventType(),$.ajax({type:"post",url:o.config_url,dataType:"json",data:{sysNum:l.cacheInfo.sysNum,source:l.cacheInfo.userInfo.source,lanFlag:l.cacheInfo.urlParams.lanFlag||0,robotFlag:d.robotFlag||""},success:function(e){if(e.isFreeVersion){var i=/^http(s*):\/\/www.sobot.com/,a=document.referrer||"";if(!a||!i.test(a))throw alert("该功能已关闭，如需开通请联系您的客户经理！"),"该版本仅支持来源页为智齿的页面！"}f(e);var s=l.cacheInfo.userInfo.modulType,n=l.cacheInfo.userInfo.color;"number"==typeof s&&s>=1&&s<=4&&(s=Math.floor(s),e.type=s);var o,r=/^(([a-fA-F0-9]{3})|([a-fA-F0-9]{6}))$/;n&&(o=decodeURIComponent(n),r.test(o)&&(e.color="#"+o)),l.cacheInfo.userInfo.color=e.color,l.cacheInfo.apiConfig=e,l.cacheInfo.urlParams.lanFlag||l.cacheInfo.apiConfig.lan&&(l.cacheInfo.urlParams.lanFlag=l.cacheInfo.apiConfig.lan,l.cacheInfo.urlParams.lan="en");var c={},u=[];"string"==typeof d.manualType?u=d.manualType.split(","):"string"==typeof l.cacheInfo.apiConfig.manualType&&(u=l.cacheInfo.apiConfig.manualType.split(",")),c.direct=u[0],c.under=u[1],c.guide=u[2],c.unknow=u[3],l.cacheInfo.urlParams.manualTypeObj=c,"undefined"!=typeof d.artificial?l.cacheInfo.urlParams.chatConnectButton=d.artificial:l.cacheInfo.urlParams.chatConnectButton=l.cacheInfo.apiConfig.chatConnectButton,"number"!=typeof d.tranFlag?l.cacheInfo.urlParams.tranFlag=0:l.cacheInfo.urlParams.tranFlag=d.tranFlag,"undefined"!=typeof d.artificialCount?l.cacheInfo.urlParams.manualBtnCount=d.artificialCount:l.cacheInfo.urlParams.manualBtnCount=l.cacheInfo.apiConfig.manualBtnCount;var p=window.location.href.split("?")[1],m="",i=/sysNum=(\w){1,100}(&)?/;if(i.test(p)){var g=i.exec(p);p=p.replace(g[0],"")}"undefined"!=typeof d.wurl?d.wurl.split("?")[1]?(m="?"+d.wurl.split("?")[1]+"&"+p,l.cacheInfo.urlParams.wurl=d.wurl.split("?")[0]+m):(m="?"+p,l.cacheInfo.urlParams.wurl=d.wurl+m):l.cacheInfo.apiConfig.wurl.split("?")[1]?(m="?"+l.cacheInfo.apiConfig.wurl.split("?")[1]+"&"+p,l.cacheInfo.urlParams.wurl=l.cacheInfo.apiConfig.wurl.split("?")[0]+m):(m="?"+p,l.cacheInfo.urlParams.wurl=l.cacheInfo.apiConfig.wurl+m),"undefined"!=typeof d.leaveCustomUrl?d.leaveCustomUrl.split("?")[1]?(m="?"+d.leaveCustomUrl.split("?")[1]+"&"+p,l.cacheInfo.urlParams.leaveCustomUrl=d.leaveCustomUrl.split("?")[0]+m):(m="?"+p,l.cacheInfo.urlParams.leaveCustomUrl=d.leaveCustomUrl+m):l.cacheInfo.apiConfig.leaveCustomUrl&&l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[1]?(m="?"+l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[1]+"&"+p,l.cacheInfo.urlParams.leaveCustomUrl=l.cacheInfo.apiConfig.leaveCustomUrl.split("?")[0]+m):(m="?"+p,l.cacheInfo.urlParams.leaveCustomUrl=l.cacheInfo.apiConfig.leaveCustomUrl+m),"undefined"!=typeof d.wurlOpenStyle?l.cacheInfo.urlParams.wurlOpenStyle=d.wurlOpenStyle:l.cacheInfo.urlParams.wurlOpenStyle=!0,"undefined"!=typeof d.isCustomSysFlag&&d.wurl?l.cacheInfo.urlParams.isCustomSysFlag=d.isCustomSysFlag:l.cacheInfo.urlParams.isCustomSysFlag=l.cacheInfo.apiConfig.isCustomSysFlag,"undefined"!=typeof d.isLeaveCustomSysFlag?l.cacheInfo.urlParams.isLeaveCustomSysFlag=d.isLeaveCustomSysFlag:l.cacheInfo.urlParams.isLeaveCustomSysFlag=l.cacheInfo.apiConfig.isLeaveCustomSysFlag,"undefined"!=typeof d.msgflag?l.cacheInfo.urlParams.msgflag=d.msgflag:l.cacheInfo.urlParams.msgflag=l.cacheInfo.apiConfig.msgflag,"undefined"!=typeof d.isMessageFlag?l.cacheInfo.urlParams.isMessageFlag=d.isMessageFlag:l.cacheInfo.urlParams.isMessageFlag=l.cacheInfo.apiConfig.isMessageFlag,"undefined"!=typeof d.satDegree_A?l.cacheInfo.urlParams.satDegree_A=d.satDegree_A:l.cacheInfo.urlParams.satDegree_A=!0,"undefined"!=typeof d.isFeedBackFlag?l.cacheInfo.urlParams.isFeedBackFlag=d.isFeedBackFlag:l.cacheInfo.urlParams.isFeedBackFlag=l.cacheInfo.apiConfig.isFeedBackFlag,"undefined"!=typeof d.powered?l.cacheInfo.urlParams.designButton=d.powered:l.cacheInfo.urlParams.designButton=l.cacheInfo.apiConfig.designButton,"undefined"!=typeof d.emailShowFlag&&1!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.emailShowFlag=d.emailShowFlag:l.cacheInfo.urlParams.emailShowFlag=l.cacheInfo.apiConfig.emailShowFlag,"undefined"!=typeof d.emailFlag&&1!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.emailFlag=d.emailFlag:l.cacheInfo.urlParams.emailFlag=l.cacheInfo.apiConfig.emailFlag,"undefined"!=typeof d.telShowFlag&&2!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.telShowFlag=d.telShowFlag:l.cacheInfo.urlParams.telShowFlag=l.cacheInfo.apiConfig.telShowFlag,"undefined"!=typeof d.telFlag&&2!=l.cacheInfo.apiConfig.ticketStartWay?l.cacheInfo.urlParams.telFlag=d.telFlag:l.cacheInfo.urlParams.telFlag=l.cacheInfo.apiConfig.telFlag,l.cacheInfo.urlParams.enclosureShowFlag=l.cacheInfo.apiConfig.enclosureShowFlag,"undefined"!=typeof d.enclosureFlag?l.cacheInfo.urlParams.enclosureFlag=d.enclosureFlag:l.cacheInfo.urlParams.enclosureFlag=l.cacheInfo.apiConfig.enclosureFlag,"undefined"!=typeof d.realuateFlag?l.cacheInfo.urlParams.realuateFlag=d.realuateFlag:l.cacheInfo.urlParams.realuateFlag=l.cacheInfo.apiConfig.realuateFlag,"undefined"!=typeof d.robotHelloWord?l.cacheInfo.urlParams.robotHelloWord=d.robotHelloWord:l.cacheInfo.urlParams.robotHelloWord=l.cacheInfo.apiConfig.robotHelloWord,"undefined"!=typeof d.adminHelloWord?l.cacheInfo.urlParams.adminHelloWord=d.adminHelloWord:l.cacheInfo.urlParams.adminHelloWord=l.cacheInfo.apiConfig.adminHelloWord,l.cacheInfo.urlParams.serviceEndPushMsg=l.cacheInfo.apiConfig.serviceEndPushMsg,"undefined"!=typeof d.adminTipWord?l.cacheInfo.urlParams.adminTipWord=d.adminTipWord:l.cacheInfo.urlParams.adminTipWord=l.cacheInfo.apiConfig.adminTipWord,"undefined"!=typeof d.userTipWord?l.cacheInfo.urlParams.userTipWord=d.userTipWord:l.cacheInfo.urlParams.userTipWord=l.cacheInfo.apiConfig.userTipWord,"undefined"!=typeof d.adminNonelineTitle?l.cacheInfo.urlParams.adminNonelineTitle=d.adminNonelineTitle:l.cacheInfo.urlParams.adminNonelineTitle=l.cacheInfo.apiConfig.adminNonelineTitle,"undefined"!=typeof d.leaveMsgSendGroupIdFlag?l.cacheInfo.urlParams.leaveMsgSendGroupIdFlag=d.leaveMsgSendGroupIdFlag:l.cacheInfo.urlParams.leaveMsgSendGroupIdFlag=l.cacheInfo.apiConfig.leaveMsgSendGroupIdFlag,"undefined"!=typeof d.ticketTypeFlag?l.cacheInfo.urlParams.ticketTypeFlag=d.ticketTypeFlag:l.cacheInfo.urlParams.ticketTypeFlag=l.cacheInfo.apiConfig.ticketTypeFlag,"undefined"!=typeof d.ticketTypeId?l.cacheInfo.urlParams.ticketTypeId=d.ticketTypeId:l.cacheInfo.urlParams.ticketTypeId=l.cacheInfo.apiConfig.ticketTypeId,t.resolve()}}),t}).then(function(e,t){var t=t||new a,i=l.cacheInfo.urlParams;return 1===i.rput?$.ajax({type:"get",url:o.active_url,dataType:"json",timeout:3e3,data:{sysNum:i.sysNum,partnerId:i.partnerId||"",rpuc:i.rpuc||""},success:function(e){e&&"ok"===e.status?(l.cacheInfo.activeData=e,t.resolve(e.params)):t.resolve()}}):t.resolve(),t}).then(function(e,i){var i=i||new a,n="";return"[object Object]"===Object.prototype.toString.call(e)&&(n=JSON.stringify(e)),$.ajax({type:"post",url:o.init_url,dataType:"json",data:{ack:1,sysNum:v(l.cacheInfo.sysNum),source:v(l.cacheInfo.userInfo.source),chooseAdminId:l.cacheInfo.urlParams.aid||"",tranFlag:l.cacheInfo.urlParams.tranFlag,groupId:v(l.cacheInfo.urlParams.groupId)||"",partnerId:v(""+l.cacheInfo.userInfo.partnerId),tel:v(l.cacheInfo.userInfo.tel),email:v(l.cacheInfo.userInfo.email),uname:v(l.cacheInfo.userInfo.uname),visitTitle:v(l.cacheInfo.userInfo.visitTitle),visitUrl:v(l.cacheInfo.userInfo.visitUrl),face:v(l.cacheInfo.userInfo.face),realname:v(l.cacheInfo.userInfo.realname),weibo:v(l.cacheInfo.userInfo.weibo),weixin:v(l.cacheInfo.userInfo.weixin),qq:v(l.cacheInfo.userInfo.qq),sex:v(l.cacheInfo.userInfo.sex),birthday:v(l.cacheInfo.userInfo.birthday),remark:v(l.cacheInfo.userInfo.remark),params:v(n||l.cacheInfo.userInfo.params),isReComment:v(1),customerFields:v(l.cacheInfo.userInfo.customerFields),visitStartTime:v(l.cacheInfo.urlParams.visitStartTime||""),agid:l.cacheInfo.urlParams.uid,multiParams:v(l.cacheInfo.userInfo.multiParams)},success:function(e){var a=e.data?e.data:e;if(l.cacheInfo.apiInit=a,s(l.cacheInfo),0==l.cacheInfo.urlParams.msgflag||1==l.cacheInfo.urlParams.isMessageFlag){var n=g(l.cacheInfo.urlParams,l.cacheInfo),o=l.cacheInfo.language.lan;r?l.cacheInfo.apiConfig.leaveMsg=o.L10024.replace("{0}",n).replace("{1}",n):l.cacheInfo.apiConfig.leaveMsg=o.L10039,l.cacheInfo.apiConfig.leaveMsgUrl=n}else l.cacheInfo.apiConfig.leaveMsg="";i.resolve(),l.cacheInfo.pageType=t}}),i}).then(function(e,t){var t=t||new a;if(d=l.cacheInfo.urlParams,l.cacheInfo.apiInit.userId&&"null"!==l.cacheInfo.apiInit.userId){var i=JSON.stringify({companyId:l.cacheInfo.apiInit.pid,customerId:l.cacheInfo.apiInit.userId});$.ajax({type:"post",url:"/chat-web/data/invokeOtherByUser.action",dataType:"json",data:{uid:l.cacheInfo.apiInit.uid,param:i,url:"ws/checkUserTicketInfo/4",method:"get"},success:function(e){l.cacheInfo.existFlag=e.item.existFlag,t.resolve()}})}else t.resolve();return t}).then(function(e,t){var t=t||new a;d=l.cacheInfo.urlParams,1===d.mflag?$.ajax({type:"post",url:o.multi_url,dataType:"json",timeout:3e3,data:{uid:l.cacheInfo.apiInit.uid,margs:l.cacheInfo.urlParams.margs||JSON.stringify({})},success:function(e){l.cacheInfo.multiGuideData=e,n.resolve(l.cacheInfo)}}):n.resolve(l.cacheInfo)})},y=function(){h()};return y(),n};t.exports=a},{"./comm.js":1,"./initText.js":4,"./util/promise.js":36}],4:[function(e,t,i){function a(e){var t=s(e);n(t),e.language.lan=t.system,e.language.text=t.text}var s=e("./locale.js"),n=function(e){for(var t=[".js-text-return-btn",".js-text-pulldown",".js-text-transfer-btn",".js-text-sendBtn",".js-text-upload-btn",".js-text-comment-btn",".js-text-satisfition-btn",".js-text-conversation-btn",".js-text-submit-btn",".js-text-success-btn",".js-text-contact",".js-text-ok-btn"],i=0;i<t.length;i++){var a=t[i],s=$(a),n=e.html["HTML_MSG0"+i];s.text(n).attr("placeholder",n)}$(".js-text-tel").html(e.html.HTML_MSG18);for(var o=[".js-pulldown-text",".js-text-chatSwitch",".js-text-send",".js-text-satisfaction",".js-text-newMessage",".js-text-leaveMessage"],i=0;i<o.length;i++){var a=o[i],s=$(a),n=e.html["HTML_MSG01"+(i+12)];s.text(n)}};t.exports=a},{"./locale.js":6}],5:[function(e,t,i){!function(e,a){Array.prototype.map||(Array.prototype.map=function(e,t){var i,a,s;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),o=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(i=t),a=new Array(o),s=0;s<o;){var r,l;s in n&&(r=n[s],l=e.call(i,r,s,n),a[s]=l),s++}return a});var s=e.detect=function(){var e=function(){},t={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(OPR)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(Edge)/(\\d+)\\.(\\d+)",family_replacement:"Edge"},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated=[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.4|Windows NT 10\\.0)",os_replacement:"Windows 10"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],
device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:["Firefox Mobile","Opera Mobile","Opera Mini","Mobile Safari","webOS","IE Mobile","Playstation Portable","Nokia","Blackberry","Palm","Silk","Android","Maemo","Obigo","Netfront","AvantGo","Teleca","SEMC-Browser","Bolt","Iris","UP.Browser","Symphony","Minimo","Bunjaloo","Jasmine","Dolfin","Polaris","BREW","Chrome Mobile","Chrome Mobile iOS","UC Browser","Tizen Browser"]};e.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"],e.types=["browser","os","device"],e.regexes=t||function(){var t={};return e.parsers.map(function(e){t[e]=[]}),t}(),e.families=function(){var t={};return e.types.map(function(e){t[e]=[]}),t}();var i=Array.prototype,a=(Object.prototype,Function.prototype,i.forEach),s=(i.indexOf,function(e,t){for(var i={},a=0;a<t.length&&!(i=t[a](e));a++);return i}),n=function(e,t){o(e,function(e){o(t,function(t){delete e[t]})})},o=forEach=function(e,t,i){if(null!=e)if(a&&e.forEach===a)e.forEach(t,i);else if(e.length===+e.length)for(var s=0,n=e.length;s<n;s++)t.call(i,e[s],s,e);else for(var o in e)_.has(e,o)&&t.call(i,e[o],o,e)},r=function(e){return!(!e||"undefined"==typeof e||null==e)},l=function(e){var t="";return e=e||{},r(e)&&r(e.major)&&(t+=e.major,r(e.minor)&&(t+="."+e.minor,r(e.patch)&&(t+="."+e.patch))),t},c=function(e){e=e||{};var t=l(e);return t&&(t=" "+t),e&&r(e.family)?e.family+t:""};return e.parse=function(t){var i=function(t){return e.regexes[t+"_parsers"].map(function(e){function i(t){var i=t.match(a);if(!i)return null;var o={};return o.family=(s?s.replace("$1",i[1]):i[1])||"other",o.major=parseInt(n?n:i[2])||null,o.minor=i[3]?parseInt(i[3]):null,o.patch=i[4]?parseInt(i[4]):null,o.tablet=e.tablet,o.man=e.manufacturer||null,o}var a=new RegExp(e.regex),s=e[("browser"===t?"family":t)+"_replacement"],n=e.major_version_replacement;return i})},a=function(){},o=i("browser"),d=i("os"),u=i("device"),f=new a;f.source=t,f.browser=s(t,o),r(f.browser)?(f.browser.name=c(f.browser),f.browser.version=l(f.browser)):f.browser={},f.os=s(t,d),r(f.os)?(f.os.name=c(f.os),f.os.version=l(f.os)):f.os={},f.device=s(t,u),r(f.device)?(f.device.name=c(f.device),f.device.version=l(f.device)):f.device={tablet:!1,family:"Other"};var p={};e.regexes.mobile_browser_families.map(function(e){p[e]=!0}),e.regexes.mobile_os_families.map(function(e){p[e]=!0});return"Spider"===f.browser.family?f.device.type="Spider":f.browser.tablet||f.os.tablet||f.device.tablet?f.device.type="Tablet":p.hasOwnProperty(f.browser.family)?f.device.type="Mobile":f.device.type="Desktop",f.device.manufacturer=f.browser.man||f.os.man||f.device.man||null,n([f.browser,f.os,f.device],["tablet","man"]),f},e}();"undefined"!=typeof i&&("undefined"!=typeof t&&t.exports&&(i=t.exports=s),i.detect=s)}(window)},{}],6:[function(e,t,i){function a(e){for(var t=e.urlParams.lan||"zh-cn",i=!1,a=0;a<o.length;a++)if(o[a]==t){i=!0;break}switch(i||(t="zh-cn"),t){case"zh-cn":return s;case"en":return n}}var s=e("./locale/zh-cn.json"),n=e("./locale/en.json"),o=["zh-cn","en"];t.exports=a},{"./locale/en.json":7,"./locale/zh-cn.json":8}],7:[function(e,t,i){t.exports={html:{HTML_MSG00:"Back",HTML_MSG01:"Load more record",HTML_MSG02:"Manual",HTML_MSG03:"Send",HTML_MSG04:"Photos",HTML_MSG05:"Feedback",HTML_MSG06:"Feedback",HTML_MSG07:"Continue",HTML_MSG08:"Submit",HTML_MSG09:"The email has been sent successfully",HTML_MSG010:"The team will contact you soon",HTML_MSG011:"OK",HTML_MSG0112:"Load more record",HTML_MSG0113:"Manual",HTML_MSG0114:"Send",HTML_MSG0115:"Feedback",HTML_MSG0116:"Continue",HTML_MSG0117:"Email",HTML_MSG0118:"Tel"},system:{L10001:"Sorry, the team is not in service right now ",L10002:"{0} is at your service ",L10003:"Conversation has ended temporarily,{0} ",L10004:"Please wait, there are {0} people in need of service before you ",L10005:"You haven't been talking for long time ",L10006:'<a href="javascript: window.location.reload();">Continue</a> ',L10007:"Conversation with {0} has been ended temporarily {1} ",L10008:"Conversation with {0} has been ended temporarily {1} ",L10009:"Conversation with {0} has been ended temporarily ",L10010:"Conversation has been ended temporarily.{0} ",L10011:"{0} You have opened a new window {1}",L10012:"No more record",L10013:"Sorry, the team is not in service right now ",L10014:"Image size can not exceed 5M",L10015:"This file type is not supported",L10016:"Loading...",L10017:"Loading...",L10018:"Load more record",L10019:"{0} is at your service",L10020:"\b{0} is typing",L10021:"Conversation with {0} has been ended temporarily",L10022:'{0} You can also send us an <a href="javascript: void(0);" id="systemMsgLeaveMessage"> email </a>',L10023:'{0} <span  id="systemMsgLeaveMsg">Please wait...</span>',L10024:'You can also send us an <a class="leave-msg-btn" href="{0}" data-href="{1}"> email </a>',L10025:"Service Unavailable",L10026:"Waiting",L10027:"Sorry, the team is not in service right now",L10028:"Conversation with {0} has been ended temporarily",L10029:"You haven't been talking for long time",L10030:"You've opened a new window",L10031:"Conversation has been ended temporarily",L10032:"Please try to describe your problem in other ways",L10033:"This file type is not supported",L10034:"Image size can not exceed 5M",L10035:"Please try another browser",L10036:"Sending...",L10037:"Thank you",L10038:"Failure, please try again",L10039:'You can also send us an <a class="leave-msg-btn js-leaveMessage" href="javascript:void(0);" > email </a>',L10040:"The customer service {0} withdrew a message",L10041:"Reminder, This information may have a risk"},text:{T0000:"Cancel",T0001:"OK",T0002:"Load more record",T0003:"Loading····",T0004:"No more record",T0005:"Yes",T0006:"No",T0010:"What do you need?",T0011:"Today",T0012:"Customer Support_",T0013:"Yesterday",T0020:"Customer Service is typing",T0021:"Are you satisfied with our service?",T0022:"Are you satisfied with our service?",T0023:"Send a massage",T0024:"Please wait...",T0025:"We've received your feedback",T0026:"You need to ask questions before feedback",T0027:"What is the problem?",T0028:"Tell us your suggestion",T0029:"Submit",T0030:"Email",T0031:"Sending···",T0032:"Thank you",T0033:"Failure, please try again",T0034:"Email@domain.com (required)",T0035:"Email doesn't look quite right",T0036:"Email doesn't look quite right",T0037:"The description is needed",T0038:"Continue",T0039:"Submit email",T0040:"Email",T0041:"Yes",T0042:"No",T0043:"Feedback",T0044:"Tel",T0045:"tel is not correct",T0046:" (required)",T0047:"",T0048:"Send a massage",T0049:"qq Face",T0050:"upload",T0051:"Email",T0052:"Feedback",T0053:"Email@domain.com",T0054:"telphone",T0055:"telphone(optional)",T0056:"The email has been sent successfully",T0057:"Powered by Sobot",T0058:" new messages",T0059:"new messages",T0060:"Manual",T0061:"Company:",T0062:"Email:",T0063:"serviceNo:",T0064:"Name:",T0065:"Remark:",T0066:"Tel:",T0067:"phone:",T0068:"open",T0069:"close",T0070:"Thank You",T0071:"Sorry",T0072:"Session end",T0073:"Error",T0074:"Already evaluated",T0075:"Upload Error",T0076:"Please Upload Files",T0077:"Maximum upload file size",T0078:"Upload file is not supported",T0079:"Image size can not exceed 5M",T0080:"Please Upload Image",T0081:"This file type is not supported",T0082:"file size can not exceed 20M",T0083:"upload...",T0084:"upload failed",T0085:"upload attachments",T0086:"Maximum upload 5",T0087:"Confirm closing?",T0088:"Ignore upload failed files?",T0089:"Continue",T0090:"Uploading",T0091:"Ignore upload failed Images?",T0092:"Email@domain.com(optional)",T0093:"Feedback",T0094:"Tell us about your problems?",T0095:"Submit",T0096:"Feedback",T0097:"Not evaluate",T0098:"Whether to solve the problem?",T0099:"title",T0100:"abstract",T0101:"label",T0102:"url",T0103:"Please rate the service",T0104:"Please choose tag",T0105:"evaluate can't be blank",T0106:"Has your question been resolved?",T0107:"Your evaluation will make us do better",T0108:"Please Fill ",T0109:"Types",T0110:"Problem Description",T0111:"close",T0112:"Return",T0113:"Choose minutes",T0114:"Choose hours",T0115:"hours",T0116:"minutes",T0117:"Please fill in the description of the problem",T0118:"Select",T0119:"Customer is typing",T0120:"Submit",T0121:"province",T0122:"city",T0123:"country",T0124:"is not correct",T0125:"email is not correct",T0126:"please fill in the required",T0127:"fill in by format ",T0128:"All",T0129:"you have a new message",T0130:"Record",T0131:"complete",T0132:"dealing",T0133:"create",T0134:"order",T0135:"no history",T0136:"history",T0137:"look",T0138:"reply",T0139:"Customer service has successfully received your questions. Please be patient",T0140:"choose business",T0141:"Manual"}}},{}],8:[function(e,t,i){t.exports={html:{HTML_MSG00:"返回",HTML_MSG01:"下拉显示更多",HTML_MSG02:"转人工",HTML_MSG03:" 发 送 ",HTML_MSG04:"图片",HTML_MSG05:"评价",HTML_MSG06:"满意度评价",HTML_MSG07:"重新建立会话",HTML_MSG08:"提交",HTML_MSG09:"创建成功",HTML_MSG010:"我们将会以链接的形式在会话中向您反馈工单处理状态",HTML_MSG011:"完成",HTML_MSG0112:"点击加载历史记录",HTML_MSG0113:"转人工服务",HTML_MSG0114:"发送",HTML_MSG0115:"满意度评价",HTML_MSG0116:"重新建立会话",HTML_MSG0117:"留言",HTML_MSG0118:"手机"},system:{L10001:"暂时无法转接人工客服",L10002:"您好,客服{0}接受了您的请求",L10003:"您已经与服务器断开连接,{0}",L10004:"排队中，您在队伍中的第{0}个",L10005:"您在思考人生？有问题请随时提问哦",L10006:'<a href="javascript: window.location.reload();">重新接入</a>',L10007:"{0}有事离开了{1}",L10008:"您与{0}的会话已结束{1}",L10009:"{0}结束了本次会话",L10010:"您长时间没有说话，本次会话已结束。{0}",L10011:"{0}您已打开新聊天窗口{1}",L10012:"没有更多记录",L10013:"抱歉，您无法接入在线客服",L10014:"图片过大",L10015:"格式不支持",L10016:"正在加载...",L10017:"正在加载...",L10018:"下拉显示更多",L10019:"客服{0}发起了会话",L10020:"{0}正在输入",L10021:"本次会话结束{0}",L10022:'{0} 您可以<a href="javascript: void(0);" id="systemMsgLeaveMessage"> 留言 </a>',L10023:'{0} <span  id="systemMsgLeaveMsg">请等待</span>',L10024:'您可以<a class="leave-msg-btn" href="#0"  data-href="{1}"> 留言 </a>',L10025:"暂无客服在线",L10026:"排队中",L10027:"暂无人工客服在线",L10028:"您与{0}的会话已经结束",L10029:"您已经很长时间未说话了哟，有问题尽管咨询",L10030:"您已打开新窗口，刷新可继续会话",L10031:"您已长时间未说话，系统自动关闭本次会话，刷新可继续会话",L10032:"非常对不起哦，不知道怎么回答这个问题呢，我会努力学习的。",L10033:"请上传正确的图片格式",L10034:"图片不能大于5M",L10035:"抱歉，此浏览器不支持上传图片！",L10036:"正在发送，请稍候...",L10037:"谢谢您的反馈",L10038:"提交失败!请重试",L10039:' 您可以<a class="leave-msg-btn js-leaveMessage" href="javascript:void(0);" > 留言 </a>',L10040:"客服 {0} 撤回了一条消息",L10041:"温馨提示：从正规网站按照正常操作进行交易，不要轻易提供验证码、账号等隐私信息，谨防被骗！"},text:{T0000:"取消",T0001:"确定",T0002:"下拉加载更多",T0003:"加载中····",T0004:"没有更多",T0005:"是",T0006:"否",T0010:"选择要咨询的内容",T0011:"今天",T0012:"咨询客服—",T0013:"昨天",T0020:"客服正在输入···",T0021:"是否解决了您的问题？",T0022:"客服评价",T0023:"请简要描述您的问题",T0024:"排队中，请稍后····",T0025:"您的评价已成功提交",T0026:"咨询后才能评价服务质量",T0027:"存在以下哪些问题：",T0028:" 欢迎给我们服务提建议~",T0029:"提交评价",T0030:"留言",T0031:"正在发送",T0032:"谢谢您的反馈",T0033:"提交失败!请重试",T0034:"邮箱 （必填）",T0035:"请填写邮箱",T0036:"邮箱格式错误",T0037:"请填写问题描述！",T0038:"开始咨询",T0039:"提交留言",T0040:"请您留言",T0041:"已解决",T0042:"未解决",T0043:"评价",T0044:"手机",T0045:"手机号格式不正确",T0046:"（必填）",T0047:"（选填）",T0048:"请简要描述您的问题...",T0049:"表情",T0050:"上传文件",T0051:"留言",T0052:"满意度",T0053:"邮箱",T0054:"手机",T0055:"手机（选填）",T0056:"您的留言已成功提交",T0057:"Powered by 智齿科技",T0058:" 条新消息",T0059:"以下为未读消息",T0060:"转人工服务",T0061:"公司：",T0062:"邮箱：",T0063:"工号：",T0064:"姓名：",T0065:"备注：",T0066:"手机：",T0067:"电话：",T0068:"展开",T0069:"收起",T0070:"感谢您的支持",T0071:"我会努力学习，希望下次帮到您",T0072:"会话结束，无法反馈",T0073:"提交失败请稍后重试",T0074:"已评价过该词条",T0075:"上传失败！",T0076:"请上传附件!",T0077:"已达到最大上传附件数量",T0078:"不支持上传此格式文件,您可以将文件打包为zip或者rar格式文件上传",T0079:"图片大小不能超过5MB",T0080:"请上传图片",T0081:"请上传正确的图片格式",T0082:"文件大小不能超过20MB",T0083:"上传中...",T0084:"上传失败",T0085:"上传附件",T0086:"最多上传5个附件",T0087:"您的留言尚未提交，确认关闭？",T0088:"提交将自动忽略上传失败的附件",T0089:"仍然提交",T0090:"有文件正在上传，无法提交",T0091:"提交将自动忽略上传失败的图片",T0092:"邮箱（选填）",T0093:"邀请您对本次服务进行评价",T0094:"告诉我们您遇到的问题？",T0095:"提交",T0096:"请您对本次服务进行评价",T0097:"暂不评价",T0098:"是否解决了您的问题？",T0099:"标题",T0100:"摘要",T0101:"标签",T0102:"链接",T0103:"请您对本次服务进行评分",T0104:"请至少选择一个标签",T0105:"请填写评价详情",T0106:"是否解决了您的问题？",T0107:"您的评价会让我们做得更好",T0108:"请填写",T0109:"问题类型",T0110:"问题描述",T0111:"关闭",T0112:"上一级",T0113:"选择分钟",T0114:"选择小时",T0115:"时",T0116:"分",T0117:"请填写问题类型！",T0118:"请选择",T0119:"正在输入···",T0120:"提交并咨询",T0121:"选择省",T0122:"选择市",T0123:"选择县",T0124:"填写不正确",T0125:"邮箱填写不正确",T0126:"请填写必填项",T0127:"按格式填写",T0128:"全部",T0129:"您的留言状态有更新",T0130:"留言记录",T0131:"已完成",T0132:"受理中",T0133:"待受理",T0134:"工单号",T0135:"暂无相关信息",T0136:"留言详情",T0137:"查看详情",T0138:"问题回复",T0139:"客服已经成功收到您的问题，请耐心等待",T0140:"选择要咨询的业务",T0141:"转人工"}}},{}],9:[function(e,t,i){function a(t,i){var a,s=e("../util/listener.js"),n=e("../util/promise.js"),i=i||new n,o=e("./template.js"),r=(e("../util/load.js")(),t.global||{}),l=(t.groupId||"",t.tranType||""),c=(r.language.lan,r.language.text),d=(e("../config/config.json"),e("../util/monitAjax.js")(r)),u=[],f={},p={},m=60,g=60,v=!0,h=function(){$.ajax({type:"get",url:"/chat-web/user/queryFormConfig.action",dataType:"json",data:{uid:r.apiInit.uid},success:function(e){1==e.status&&(e.openFlag&&1!=e.ustatus&&r.apiInit.ustatus!=-2&&!r.apiConfig.fillFormFlag?"pc"===r.pageType?y(e):j(e):(s.trigger("chatGroups.hide"),i.resolve(t)))}})},y=function(n){var l=n.fields,h=e("./dropdownMenu.js"),y=!0,j={},T=function(){var e=$(this).attr("data-fieldId"),t=[],i=[];$(this).find(".js-userCheckIco"+e).hasClass("userCheckIcoActive")?($(this).addClass("userCheck"),$(this).find(".js-userCheckIco"+e).removeClass("userCheckIcoActive")):($(this).removeClass("userCheck"),$(this).find(".js-userCheckIco"+e).addClass("userCheckIcoActive")),$(".js-userCheckIco"+e).each(function(){$(this).hasClass("userCheckIcoActive")&&(t.push($(this).parent().attr("dataValue")),i.push($(this).parent().attr("dataName")))}),t=t.join(","),i=i.join(",");var a={fieldId:e,dataValue:t,dataName:i};p[a.fieldId].value=a.dataValue,f[a.fieldId]=a.dataValue},b=function(){var e=$(this).attr("data-fieldId"),t=$(this).attr("dataValue"),i=$(this).attr("dataName");a.find(".js-userOptIco"+e).removeClass("userOptIcoActive"),a.find(".js-userOptIco"+e).parent().addClass("userOpt"),$(this).removeClass("userOpt").find(".js-userOptIco"+e).addClass("userOptIcoActive");var s={fieldId:e,dataValue:t,dataName:i};p[s.fieldId].value=s.dataValue,f[s.fieldId]=s.dataValue},I=function(){var e=$(this).attr("data-fieldId"),t=$(this).val();p[e].value=t,f[e]=t,a.find(".js-errorTip"+e).css("visibility","hidden")},w=function(e,t){p[t].value=e,f[t]=e,a.find(".js-errorTip"+t).css("visibility","hidden")},x=function(){var e=$(this).attr("data-fieldId"),t=$(".js-definedNumInput"+e).val();t.length>300&&(t=t.slice(0,300)),a.find(".js-definedNumInput"+e).val(t)},F=function(e){"province"==e.key||"city"==e.key||"county"==e.key||("definedList"==e.type?(p[e.fieldId].value=e.dataValue,f[e.fieldId]=e.dataValue):"time"==e.type&&(p[e.fieldId].value=e.dataValue,f[e.fieldId]=e.dataValue),a.find(".js-errorTip"+e.fieldId).css("visibility","hidden"))},k=function(){a.find(".js-chatBeforeFormlayer").addClass("show"),a.find("#chatBeforeForm").animate({right:"0"})},C=function(){i.reject(i),a.find(".js-chatBeforeFormlayer").removeClass("show"),a.find(".js-chatBeforeForm").animate({right:"-390px"},function(){setTimeout(function(){a.remove()},300)}),s.off("core.closeAlldropMenu"),s.off("core.fillProvinceInner"),s.off("core.definedFieldResult"),s.off("core.fillCityInner")},L=function(){var e=$(".js-mainBox").height()-m-g;a.find(".chatBeforeFormBody").height(e)},A=function(e){var t;e&&e.this_el&&(t=e.this_el);for(var i in j)t&&i==t||j[i].collapse()},M=function(e){var e=e||{};return p.city.value="填了",e.areaId?(f.areaId=e.areaId,void(f.areaName=e.dataName)):void d({type:"post",url:"/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(t){if(t&&1==t.status)if(e.provinceId){var i={list:t.citys},s=doT.template(o.cityEle)(i);a.find(".js-cityDropListUl").html(s),a.find(".js-cityDropListTitle").html("选择市"),a.find(".js-countryDropListTitle").html("选择县"),f.proviceId=e.provinceId,f.proviceName=e.dataName,f.cityId="",f.cityName="",f.areaId="",f.areaName=""}else if(e.cityId){var i={list:t.areas},s=doT.template(o.countryEle)(i);a.find(".js-countryDropListUl").html(s),a.find(".js-countryDropListTitle").html("选择县"),f.cityId=e.cityId,f.cityName=e.dataName,f.areaId="",f.areaName=""}},error:function(){}})},S=function(){var e={};d({type:"post",url:"/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(e){if(e&&1==e.status){var t={list:e.provinces},i=doT.template(o.provinceEle)(t);a.find(".js-provinceDropListUl").html(i)}},error:function(){}})},P=function(){for(var e=0,s=0;s<u.length;s++)if(p[u[s].id].fillFlag&&""==p[u[s].id].value?(a.find(".js-errorTip"+p[u[s].id].id).css("visibility","inherit"),v=!1):(u[s].value=p[u[s].id].value,a.find(".js-errorTip"+p[u[s].id].id).css("visibility","hidden"),e++),"email"==p[u[s].id].id&&""!=p[u[s].id].value){var n=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(!n.test(p[u[s].id].value))return void a.find(".js-errorTip"+p[u[s].id].id).html(p[u[s].id].fieldName+c.T0124).css("visibility","inherit")}if(0!=u.length&&e!=u.length||(v=!0),v&&y){f=JSON.stringify(f),y=!1;var o={uid:r.apiInit.uid,companyId:r.sysNum,customerFields:f};d({type:"post",url:"/chat-web/user/submitForm.action",dataType:"json",data:o,success:function(e){e&&1==e.status&&(i.resolve(t),r.apiConfig.fillFormFlag=!0,C())},error:function(){}})}},D=function(){$chatBeforeFormlayer=a.find(".js-chatBeforeFormlayer"),$close=a.find(".js-close"),$txtTip=a.find(".js-txt-tip"),$definedFields=a.find(".js-definedFields"),$userCheck=a.find(".js-userCheck"),$userOpt=a.find(".js-userOpt"),$definedNumInput=a.find(".js-definedNumInput"),$chatBeforeFormSubmit=a.find(".js-chatBeforeFormSubmit")},N=function(){$definedNumInput.on("input",x),a.delegate(".js-definedInput","blur",I),s.on("core.definedFieldResult",F),s.on("core.fillCityInner",M),s.on("core.fillProvinceInner",S),$userCheck.on("click",T),$userOpt.on("click",b),$chatBeforeFormSubmit.on("click",P),$(window).on("resize",L),a.delegate(".js-chatBeforeFormlayer","click",function(){C()}),a.delegate(".js-cancel-btn","click",function(){C()}),s.on("core.closeAlldropMenu",A)},_=function(){s.trigger("chatGroups.hide");var e=doT.template(o.chatBeforeFormPc)({global:r,formDoc:n.formDoc,formTitle:n.formTitle,languageText:c,definedField:l});a=$(e),$(".js-mainBox").append(a);for(var t=a.find(".js-dropdownList"),i=0;i<t.length;i++){var d=$(t[i]).attr("id");j[d]=new h(t[i],r,d)}a.find(".submit").css("background-color",r.apiConfig.color);for(var i=0;i<l.length;i++){var f={};f.id=l[i].cusFieldConfig.fieldId,f.fieldName=l[i].cusFieldConfig.fieldName,4==l[i].cusFieldConfig.fieldType?(f.fillFlag=0,f.value="00:00"):(f.fillFlag=l[i].cusFieldConfig.fillFlag,f.value=""),u.push(f),p[f.id]=f}for(var i=0,m=l.length;i<m;i++)3==l[i].cusFieldConfig.fieldType&&a.find("#dp"+l[i].cusFieldConfig.fieldId).datepicker().on("changeDate",function(e){var t,i,a,s=e.date;t=s.getFullYear(),i=s.getMonth()+1<10?"0"+(Number(s.getMonth())+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate(),_bir=t+"-"+i+"-"+a,$(this).val(_bir);var n=$(this).attr("data-fieldId");w(_bir,n),$(".datepicker.dropdown-menu").hide()});k(),D(),N(),L()};_()},j=function(e){var n,l,m=e.fields,g=!1,h=!0,y="",j=function(){var e=$(this).attr("fieldId"),t=$(this).val();p[e].value=t},T=function(){var e=$(this).attr("fieldId"),t=$(this).val();p[e].value=t},b=function(){var e=0;$(this).parents(".js-definedArea").find(".js-dropListArea").animate({bottom:e+"px",opacity:1},300),a.find(".js-definedLayer").show(),a.find(".js-definedLayer").animate({opacity:1},300)},I=function(){var e=$(this).attr("date-type"),t=0;"hour"==e?$(this).parent().find(".js-dropListHour").animate({bottom:t+"px"},300):"minutes"==e&&$(this).parent().find(".js-dropListMinutes").animate({bottom:t+"px"},300),a.find(".js-definedLayer").show(),a.find(".js-definedLayer").animate({opacity:1},300)},w=function(){var e=$(this).attr("date-type"),t=$(this).attr("dataValue"),i=$(this).attr("fieldId");$(this).addClass("active").siblings().removeClass("active"),"hour"==e?$(this).parents(".js-definedArea").find(".js-definedHour").val(t):"minutes"==e&&$(this).parents(".js-definedArea").find(".js-definedMinutes").val(t),p[i].value=$(this).parents(".js-definedArea").find(".js-definedHour").val()+":"+$(this).parents(".js-definedArea").find(".js-definedMinutes").val()},x=function(){$(this).parents(".js-dropListArea").animate({bottom:"-382px",opacity:0},300),a.find(".js-definedLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-definedLayer").hide()},100)})},F=function(){var e=$(this).attr("datavalue"),t=$(this).attr("dataName"),i=$(this).attr("fieldId");p[i].value=e,$(this).parent().find("li").removeClass("active"),$(this).addClass("active"),$(this).parents(".definedArea").find(".js-definedDropListText").html(t)},k=function(){$(this).hasClass("checkedActive")?$(this).removeClass("checkedActive"):$(this).addClass("checkedActive")},C=function(){for(var e=$(this).attr("fieldId"),t=$(this).prev().find(".js-definedCheckedLi"),i="",s="",n=0;n<t.length;n++)$(t[n]).hasClass("checkedActive")&&(i+=$(t[n]).attr("dataValue")+",",s+=$(t[n]).attr("dataName")+";");i.length>0&&(i=i.substr(0,i.length-1)),s.length>0?(s=s.substr(0,s.length-1),$(this).parents(".js-definedArea").find(".js-definedDropListText").html(s)):$(this).parents(".js-definedArea").find(".js-definedDropListText").html("--"),p[e].value=i,$(this).parents(".js-dropListArea").animate({bottom:"-382px",opacity:0},300),a.find(".js-definedLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-definedLayer").hide()},100)})},L=function(){var e=(window.screen.width,50),t=0;"none"!=$(".js-header-back").css("display")&&(t=50,a.find(".js-chatFormLayer").css("top",t+"px")),definedHeight=l.height()-e,a.find(".js-chatBeforeForm-content").css({height:definedHeight-t+"px"})},A=function(){a.find(".js-orderClassifyLayer").show();var e=0;a.find(".js-orderClassifyInner").animate({bottom:e+"px"},300),a.find(".js-orderClassifyLayer").animate({opacity:1},300),h=!0},M=function(){a.find(".js-orderClassifyInner").animate({bottom:"-280px"},300),a.find(".js-orderClassifyLayer").animate({opacity:0},300,function(){setTimeout(function(){a.find(".js-orderClassifyLayer").hide()},100)})},S=function(e){var e=e||{};h&&(h=!1,d({type:"post",url:"/chat-web/user/queryCity.action",dataType:"json",data:e,success:function(t){if(t&&1==t.status){if(e.provinceId){g=!0,m=t.citys,f.proviceId=e.provinceId,f.proviceName=e.provinceName,y=e.provinceName,a.find(".js-cityTitle").html(c.T0122),p.city.value=y,a.find(".js-cityAreaTitle").html(y);var i={items:m,languageText:c},s=doT.template(o.cityListEleH5)(i);a.find(".js-areaListArea").html(s)}else if(e.cityId){g=!0,m=t.areas,f.cityId=e.cityId,f.cityName=e.cityName,y+=e.cityName,a.find(".js-cityTitle").html(c.T0123),p.city.value=y,a.find(".js-cityAreaTitle").html(y);var i={items:m,languageText:c},s=doT.template(o.areaListEleH5)(i);
a.find(".js-areaListArea").html(s)}else{g=!0,m=t.provinces;var i={items:m,languageText:c},s=doT.template(o.provinceEleH5)(i);a.find(".js-areaListArea").html(s),A()}setTimeout(function(){h=!0},200)}},error:function(){}}))},P=function(e){S()},D=function(){var e=$(this).attr("provinceId"),t=$(this).attr("cityId"),i=$(this).attr("areaId"),s=$(this).attr("endFlag"),n={};if(p.city.value="填了",e){var o=$(this).attr("provinceName");n={provinceId:e,provinceName:o},"true"==s?($(this).addClass("active"),a.find(".js-cityAreaTitle").html(o),f.proviceId=n.provinceId,f.proviceName=n.provinceName,M()):S(n)}else if(t){var r=$(this).attr("cityName");n={cityId:t,cityName:r},"true"==s?($(this).addClass("active"),a.find(".js-cityAreaTitle").html(y+r),f.cityId=n.cityId,f.cityName=n.cityName,M()):S(n)}else if(i){var l=$(this).attr("areaName");return f.areaId=n.areaId,f.areaName=l,y+=l,a.find(".js-cityAreaTitle").html(y),$(this).addClass("active"),M(),void a.find(".js-cityTitle").html(c.T0121)}},N=function(){for(var e=0,s=0;s<u.length;s++){if(p[u[s].id].fillFlag&&""==p[u[s].id].value)return _(c.T0126),void(v=!1);if(u[s].value=p[u[s].id].value,f[u[s].id]=u[s].value,e++,"email"==p[u[s].id].id&&""!=p[u[s].id].value){var n=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(!n.test(p[u[s].id].value))return void _(c.T0125)}if(3==p[u[s].id].filedType&&""!==p[u[s].id].value){var o=/^((19[0-9][0-9])|(20[0-9][0-9]))-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8])))$/,l=o.test(p[u[s].id].value);if(!l)return void _(p[u[s].id].fieldName+c.T0124)}}if(0!=u.length&&e!=u.length||(v=!0),v&&h){f=JSON.stringify(f),h=!1;var m={uid:r.apiInit.uid,companyId:r.sysNum,customerFields:f};d({type:"post",url:"/chat-web/user/submitForm.action",dataType:"json",data:m,success:function(e){e&&1==e.status&&(i.resolve(t),a.remove(),r.apiConfig.fillFormFlag=!0)},error:function(){}})}},_=function(e){var t={};t={text:e};var i=doT.template(o.showTip)(t),a=$(i);l.append(a);var s=l.height()/2-21,n=l.width()/2-70;a.find(".js-showTip").css({top:s,left:n}),setTimeout(function(){a.find(".js-showTip").remove()},3e3)},B=function(){i.reject(i),a.remove()},O=function(){l=$(".js-wrapBox"),n=$(".js-showTip")},R=function(){a.delegate(".js-cityAreaTitle","click",P),a.delegate(".js-provinceList","click",D),a.delegate(".js-orderClassifyClose","click",M),a.delegate(".js-definedInput","blur",j),a.delegate(".js-definedDate","blur",T),a.delegate(".js-chatBeforeFormCommit","click",N),a.delegate(".js-definedDropList","click",b),a.delegate(".js-definedTimeDropList","click",I),a.delegate(".js-definedTimeLi","click",w),a.delegate(".js-dropLIstAreaClose","click",x),a.delegate(".js-definedDropListLi","click",F),a.delegate(".js-definedCheckedLi","click",k),a.delegate(".js-checkedSure","click",C),a.delegate(".js-closeForm","click",B)},z=function(){s.trigger("chatGroups.hide");var t={global:r,formDoc:e.formDoc,formTitle:e.formTitle,languageText:c,items:m},i=doT.template(o.chatBeforeFormH5)(t);a=$(i),l.append(a);for(var n=0;n<m.length;n++){var d={};d.id=m[n].cusFieldConfig.fieldId,d.fieldName=m[n].cusFieldConfig.fieldName,4==m[n].cusFieldConfig.fieldType?(d.fillFlag=0,d.value="00:00"):3==m[n].cusFieldConfig.fieldType?(d.fillFlag=m[n].cusFieldConfig.fillFlag,d.value="",d.filedType=3):(d.fillFlag=m[n].cusFieldConfig.fillFlag,d.value=""),u.push(d),p[d.id]=d}},E=function(){O(),z(),R(),L()};E()},T=function(){"keySwitch"==l?i.resolve(t):h()};return T(),i}t.exports=a},{"../config/config.json":2,"../util/listener.js":32,"../util/load.js":33,"../util/monitAjax.js":34,"../util/promise.js":36,"./dropdownMenu.js":12,"./template.js":21}],10:[function(e,t,i){function a(t,i){var a,s=e("../util/listener.js"),n=e("../util/promise.js"),i=i||new n,o=t.global,r=t.groupList,l=(t.groupId||"",t.tranType||"",e("./template.js")),c=(o.language.lan,o.language.text),d=(window.navigator.userAgent.indexOf("Mobile")>=0,e("../util/monitAjax.js")(o),!0),u=function(e){var t=doT.template(l.groupTemplate)({list:e,languageText:c});a=$(t),$(".js-wrapBox").append(a),a.delegate(".js-item","click",function(e){var t=e.currentTarget,s=$(t).attr("data-id"),n={global:o,groupId:s};i.resolve(n),a.remove()}),$(document.body).delegate(".js-shadow-layer","click",function(){i.reject(i),a.remove()}),a.delegate(".js-group-outer","click",function(e){e.stopPropagation(),e.preventDefault()}),a.delegate(".js-cancel-btn","click",function(e){i.reject(i),a.remove()}),$(".js-item").css("background-color",o.apiConfig.color),$(".js-cancel-btn").css("color",o.apiConfig.color)},f=function(e){var t=o.apiConfig.color,s=doT.template(l.groupTemplatePC)({list:e,languageText:c});a=$(s),$(".js-mainBox").append(a),a.find(".js-group-outer").animate({right:"0"}),a.delegate(".js-item","click",function(e){if(d){d=!1;var a=e.currentTarget,s=$(a).attr("data-id");$(a).css({"border-color":t,color:t}).siblings().css({"border-color":"",color:""});var n={global:o,groupId:s};i.resolve(n),e.stopPropagation()}}),a.delegate(".js-cancel-btn","click",function(e){a.find(".js-group-outer").animate({right:"-390px"},function(){a.remove(),i.reject(i)})}),a.delegate(".js-group-layer","click",function(){a.find(".js-group-outer").animate({right:"-390px"},function(){a.remove(),i.reject(i)})})},p=function(){"pc"===o.pageType?a.find(".js-group-outer").animate({right:"-390px"},function(){a.remove()}):a.remove()},m=function(){o.urlParams.groupId||"";"pc"===o.pageType?f(r):u(r),s.on("chatGroups.hide",p)};return r?m():i.resolve(t),i}t.exports=a},{"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./template.js":21}],11:[function(e,t,i){var a,s={},n=e("../util/listener.js");s.setCurrentState=function(e){a=e,n.trigger("core.statechange",a)},s.getCurrentState=function(){return a},t.exports=s},{"../util/listener.js":32}],12:[function(e,t,i){var a=function(t,i,a){var s=(e("../util/monitAjax.js")(i),e("../util/listener.js")),n=(e("./template.js"),!1);t=$(t);var o=!1,r=function(e){e.stopPropagation();var i=$(this).parent().attr("id"),a={this_el:i};s.trigger("core.closeAlldropMenu",a),n?(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1):(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),$(this).find(".dropListTitleIcn").css("background-position","-3320px 13px"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),n=!0),"province"!=i||o||(o=!0,s.trigger("core.fillProvinceInner"))},l=function(e){e.stopPropagation();var i=$(this).attr("data-fieldId")||"",a=$(this).attr("dataValue")||"",o=($(this).attr("fieldType")||"",$(this).attr("dataName")||"");if(t.find(".js-dropdown-title").html($(this).html()),a)var r={fieldId:i,dataValue:a,dataName:o,type:"definedList"};else{var l="00:00";l=$("#hour"+i).find(".js-definedHour").html()+":"+$("#minute"+i).find(".js-definedMinutes").html();var r={fieldId:i,dataValue:l,dataName:l,type:"time"}}s.trigger("core.definedFieldResult",r),t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1},c=function(e){e.stopPropagation();var i=$(this).attr("provinceId"),a=$(this).attr("cityId"),o=$(this).attr("areaId"),r=$(this).attr("title")||"",l={};t.find(".js-dropdown-title").html($(this).html()),i?l={provinceId:i,dataName:r}:a?l={cityId:a,dataName:r}:o&&(l={areaId:o,dataName:r}),s.trigger("core.fillCityInner",l),t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),n=!1},d=function(){n=!1,t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px")},u=function(){},f=function(){},p=function(){t.delegate(".js-dropdown-btn","click",r),t.delegate(".js-dropdownLi","click",l),t.delegate(".js-cityLi","click",c),$(document.body).on("click",function(){s.trigger("core.closeAlldropMenu")})},m=function(){},g=function(){m(),f(),p()};g(),this.expand=u,this.collapse=d};t.exports=a},{"../util/listener.js":32,"../util/monitAjax.js":34,"./template.js":21}],13:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=e("../util/monitAjax.js")(t),d=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),u=e("./initsession.js"),f=e("../socket/socketfactory.js"),p=t.apiConfig.leaveMsg,m=t.language.lan,g=!1,v=function(){t.apiConfig.guideFlag&&1!=t.apiInit.multiFlag&&2!=t.apiConfig.type&&$.ajax({type:"post",url:"/chat/user/robotGuide.action",dataType:"json",data:{uid:t.apiInit.uid,robotFlag:t.urlParams.robotFlag||""},success:function(e){var i=e.data.ts?new Date(e.data.ts):new Date;i=new Date(i.getTime()+1e5);var a=o.formatDate(i,!0),n=e.data.answer||"";n.indexOf("<a")>=0&&(n=n.replace(/<a/g,'<a target="_blank"'));var r=[];r.push({type:"robot",answerType:"welcome-sugguestions",date:a,content:[{senderName:t.apiConfig.robotName,senderType:3,msg:n,stripe:"",list:e.data.suggestions,ts:a}]}),s.trigger("core.initsession",r)}})},h=function(e,i,a){var n=a?i.aface:t.apiConfig.robotLogo,r=a?i.aname:t.apiConfig.robotName,a=a||t.urlParams.robotHelloWord,c=t.apiInit.ustatus==-2,d=t.apiInit.ustatus==-2?1:0;e||(e=[]);var u=new Date,f={date:o.formatDate(u),content:[{senderType:d?1:a?2:1,t:+u,msg:a,ts:o.formatDate(u,!0),senderFace:n,senderName:r}]};c?l.setCurrentState("robot"):l.setCurrentState("human"),t.apiConfig.adminHelloWordFlag&&e.push(f),setTimeout(function(){s.trigger("core.initsession",e)},0)},y=function(e,a){e||(e=[]);var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(c),i&&i.destroy(),i=new r(t),l.setCurrentState("robot"),setTimeout(function(){s.trigger("core.initsession",e)},0)},j=function(e,a){if(e){var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};l.setCurrentState("robot"),i&&i.destroy(),i=new r(t),u(t,a,!1).then(function(e){t.apiConfig.robotHelloWordFlag&&e.push(c),s.trigger("core.initsession",e)})}},T=function(e,n,o,c){var d=e.queueDoc;g=!0,n?(v(),h(o,e,null),setTimeout(function(){t.urlParams.msgflag?e.content=d:e.content=d+" "+p,7==e.status&&(e.content=e.msg),!c&&t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})},1)):(t.urlParams.msgflag?e.content=d:e.content=d+" "+p,7==e.status&&(e.content=e.msg),t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})),i&&i.destroy(),a||7==e.status||(a=f(e,t),a.start()),i=new r(t),l.setCurrentState("robot"),7!=e.status&&s.trigger("core.sessionclose",-3)},b=function(e){for(var n=e.list||[],o=0,r=n.length;o<r;o++){var c=n[o],d=c;if(200===c.type){i&&a&&(i.destroy(),i=a,a=null),l.setCurrentState("human"),s.trigger("core.system",{type:"system",status:"transfer",data:{content:m.L10002.replace("{0}",d.aname)}}),d.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=d.serviceInfo.adminHelloWord),d.content=t.urlParams.adminHelloWord,s.trigger("core.system",{type:"human",data:d}),s.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},I=function(e,a,n){s.trigger("core.buttonchange",{type:"transfer",action:"show"}),a?(v(),y(n,e,null),setTimeout(function(){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+p,s.trigger("core.system",{type:"system",status:"offline",data:e})},1)):(i&&i.destroy(),i=new r(t),l.setCurrentState("robot"),t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,s.trigger("core.system",{type:"system",status:"offline",data:e}))},w=function(e,a){t.urlParams.msgflag?e.content=m.L10001:e.content=m.L10001+" "+p,i=new r(t),l.setCurrentState("robot"),s.trigger("core.system",{type:"system",status:"blacklist",data:e}),a&&y()},x=function(e,n,o){var o=!!o,r=e.groupId||"",d=e.tranType||"",p=e.transferFlag||"",v=e.keyword||"",y=e.keywordId||"";u(t,n,!0).then(function(e,n){var u;u=a&&"websocket"==a.type?8:1;var j=t.urlParams,b="/chat/user/chatconnect.action",x={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:u,current:g,groupId:r||"",keyword:v||"",keywordId:y||""};j.autoManual&&j.aid&&(b="/chat/user/invite.action",x.aid=j.aid),c({url:b,type:"post",dataType:"json",data:x,success:function(a){if(t.urlParams.leaveMsgGroupId=r,1==a.status||"keySwitch"!=d||1!=p||a.count)return a.status==-1?void s.trigger("core.sessionclose",7):void(2==a.status?I(a,o,e):0==a.status||7==a.status?T(a,o,e,y):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),g=!1,a.adminHelloWord&&(t.urlParams.adminHelloWord=a.adminHelloWord),t.urlParams.queueDoc=a.queueDoc||"",a.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=a.serviceEndPushMsg||""),o?(h(e,a,t.urlParams.adminHelloWord),s.trigger("core.transfersuccess",{data:a})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:m.L10002.replace("{0}",a.aname)}}),s.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",status:"transfer",data:a})),i&&i.destroy(),i=f(a,t),i.start(),l.setCurrentState("human"),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?(s.trigger("core.sessionclose",7),w(a,o)):6==a.status&&(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,s.trigger("core.grouplist")))},fail:function(){}})})},F=function(e,i,a){var a=!!a,i=new n;return d(t,i,g).then(function(e){x(e,null,a)},function(){j(a,i)}),i},k=function(e){var i=new n;return d(t,i,g,e).then(function(e){x(e,null,!1)},function(){j(!1,i)}),i},C=function(){},L=function(){s.on("sendArea.artificial",F),s.on("listMsg.keyWordArtificial",k),s.on("core.onreceive",b)},A=function(){var e=t.apiInit.ustatus;0==e||1==e||e==-2?F(null,null,!0):e==-1&&u(t).then(y)},M=function(){C(),L(),A()};M(),this.getWelcome=function(){}};t.exports=a},{"../socket/robot.js":24,"../socket/rolling.js":25,"../socket/socketfactory.js":26,"../socket/websocket.js":27,"../util/date.js":28,"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./currentState.js":11,"./initsession.js":15,"./transfer.js":22}],14:[function(e,t,i){function a(t){var i=e("../util/listener.js"),a=e("../util/promise.js"),s=e("../util/date.js"),n=e("../util/monitAjax.js")(t),o=(e("../socket/robot.js"),e("../socket/websocket.js"),e("./currentState.js")),r=(e("../socket/rolling.js"),e("./currentState.js")),l=e("./transfer.js"),c=e("./initsession.js"),d=e("../socket/socketfactory.js"),u=t.apiConfig.leaveMsg,f=t.language.lan,p=null,m=!1,g=function(e,a,n){var o=n?a.aface:t.apiConfig.robotLogo,r=n?a.aname:t.apiConfig.robotName,n=n||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;e||(e=[]);var c=new Date,d={date:s.formatDate(c),content:[{senderType:l?1:n?2:1,t:+c,msg:n,ts:s.formatDate(c,!0),senderFace:o,senderName:r}]};t.apiConfig.adminHelloWordFlag&&e.push(d),setTimeout(function(){i.trigger("core.initsession",e)},0)},v=function(e,i,s){var s=!!s,i=new a;return l(t,i,m).then(function(e){I(e,null,s)},y),i},h=function(e){for(var a=e.list||[],s=0,n=a.length;s<n;s++){var r=a[s],l=r;if(200===r.type){o.setCurrentState("human"),i.trigger("core.system",{type:"system",status:"transfer",data:{content:f.L10002.replace("{0}",l.aname)}}),l.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=l.serviceInfo.adminHelloWord),l.content=t.urlParams.adminHelloWord,i.trigger("core.system",{type:"human",data:l}),i.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},y=function(){setTimeout(function(){i.trigger("core.sessionclose",-1)},0)},j=function(e,a,s){var n=e.queueDoc;m=!0,p&&p.destroy(),p=d(e,t),p.start(),a?(i.trigger("core.initsession",s),setTimeout(function(){t.urlParams.msgflag?e.content=n:e.content=n+" "+u,e.aname=f.L10026,t.apiConfig.customerQueueFlag&&i.trigger("core.system",{type:"system",status:"queue",data:e}),i.trigger("core.sessionclose",-2)},1)):(t.urlParams.msgflag?e.content=n:e.content=n+" "+u,e.aname="排队中",i.trigger("core.system",{type:"system",status:"queue",data:e}),i.trigger("core.sessionclose",-2))},T=function(e,a,s){p&&p.destroy(),t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+u,i.trigger("core.buttonchange",{type:"transfer",action:"hide",data:e}),a?setTimeout(function(){i.trigger("core.sessionclose",-1)},1):i.trigger("core.sessionclose",-1)},b=function(e,a){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+" "+u,e.aname=f.L10025,i.trigger("core.system",{type:"system",status:"blacklist",data:e,moduleType:"humanOnly"}),i.trigger("core.sessionclose",-1)},I=function(e,a,s){var s=!!s,o=e.groupId||"";c(t,a).then(function(e,a){var l=t.urlParams,c="/chat/user/chatconnect.action",u={sysNum:t.sysNum,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,uid:t.apiInit.uid,way:1,current:m,groupId:o||""};l.autoManual&&l.aid&&(c="/chat/user/invite.action",u.aid=l.aid),n({url:c,type:"post",dataType:"json",data:u,success:function(a){return t.urlParams.leaveMsgGroupId=o,a.status==-1?void i.trigger("core.sessionclose",7):void(2==a.status?T(a,s,e):0==a.status?j(a,s,e):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),a.adminHelloWord&&(t.urlParams.adminHelloWord=a.adminHelloWord),t.urlParams.queueDoc=a.queueDoc||"",a.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=a.serviceEndPushMsg||""),s?(g(e,a,t.urlParams.adminHelloWord),i.trigger("core.transfersuccess",{data:a})):(i.trigger("core.system",{type:"system",status:"transfer",data:{content:f.L10002.replace("{0}",a.aname)}}),i.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,i.trigger("core.system",{type:"human",status:"transfer",data:a})),p&&p.destroy(),p=d(a,t),r.setCurrentState("human"),p.start(),i.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?b(a,s):6==a.status?(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,i.trigger("core.grouplist")):7==a.status&&(a.content=a.msg,i.trigger("core.system",{type:"system",status:"queue",data:a})))},fail:function(){}})})},w=function(){i.on("sendArea.artificial",v)},x=function(){i.on("core.onreceive",h)},F=function(){var e=t.apiInit.ustatus;0!=e&&1!=e&&e!=-2||v(null,null,!0)},k=function(){w(),x(),F()};k()}t.exports=a},{"../socket/robot.js":24,"../socket/rolling.js":25,"../socket/socketfactory.js":26,"../socket/websocket.js":27,"../util/date.js":28,"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./currentState.js":11,"./initsession.js":15,"./transfer.js":22}],15:[function(e,t,i){var a,s,n,o=e("../util/promise.js"),r=e("../util/date.js"),l=e("./offlineMessage.js"),c=function(e,t){var t=t||new o;return 0==e.apiInit.ustatus?setTimeout(function(){t.resolve([])},0):$.ajax({type:"post",url:"/chat/user/getChatDetailByCid.action",dataType:"json",data:{cid:e.apiInit.cid,uid:e.apiInit.uid},success:function(e){t.resolve(e)}}),t},d=function(e,t){var t=t||new o;return $.ajax({url:"/chat/msgOffline/queryOfflineMsg.action",dataType:"json",type:"GET",data:{uid:a.apiInit.uid},success:function(i){var a;if(i.length>0){for(var s=0;s<i.length;s++)for(var n=i[s].content||[],o=0;o<n.length;o++){var c=n[o];0==o&&(a=c),l[c.msgId]=!0,c.msgType="offline",null===c.senderType&&(c.senderType=2),c.msg||(c.msg="")}var d=a.t?new Date(a.t):new Date;d=new Date(d.getTime()+1e5);var u=r.formatDate(d,!0);e.push({type:"offline-seperator",date:"",content:[{senderType:-1,msg:"",ts:a?a.ts:u,t:a?a.t:+new Date}]})}var n=e.concat(i);t.resolve(n)}}),t},u=function(e,t){var t=t||new o;if(s)return void setTimeout(function(){t.resolve(e)},0);var i;return void 0!==a.urlParams.moduleType&&(i=a.urlParams.moduleType),void 0===i&&(i=a.apiConfig.type),a.apiConfig.guideFlag&&1!=a.apiInit.multiFlag&&1!=a.apiInit.ustatus&&2!=i?$.ajax({type:"post",url:"/chat/user/robotGuide.action",dataType:"json",data:{uid:a.apiInit.uid,robotFlag:a.urlParams.robotFlag||""},success:function(i){var s=i.data.ts?new Date(i.data.ts):new Date;s=new Date(s.getTime()+1e5);var n=r.formatDate(s,!0),o=i.data.answer||"";o.indexOf("<a")>=0&&(o=o.replace(/<a/g,'<a target="_blank"')),e.push({type:"robot",answerType:"welcome-sugguestions",date:n,content:[{senderName:a.apiConfig.robotName,senderType:3,msg:o,stripe:"",list:i.data.suggestions,ts:n}]}),t.resolve(e)}}):t.resolve(e),t};t.exports=function(t,i,o){return a=t,n=e("../util/monitAjax.js")(a),s=o,c(a).then(d).then(u)}},{"../util/date.js":28,"../util/monitAjax.js":34,"../util/promise.js":36,"./offlineMessage.js":17}],16:[function(e,t,i){function a(t){var i,a,r=3,l=4,c=1,d=2,u=e("./humanfirst.js"),f=e("./robotfirst.js"),p=e("./robotonly.js"),m=e("./humanonly.js"),g=e("../comm.js");if(i=g.getQueryParam(),a=i.moduleType>=1&&i.moduleType<=4?i.moduleType:t.apiConfig.type,s)return s;switch(a!=l&&a!=d||t.apiInit.pid!==o||n.specialError("qufenqi_human_first","mode",{url:location.href,moduleType:a,uid:t.apiInit.uid},t),a){case r:s=new f(t);break;case l:s=new u(t);break;case c:s=new p(t);break;case d:s=new m(t)}return s}var s=null,n=e("../util/errorlog.js"),o="a2a01f79faed48489058af7eabaafc1c";t.exports=a},{"../comm.js":1,"../util/errorlog.js":29,"./humanfirst.js":13,"./humanonly.js":14,"./robotfirst.js":19,"./robotonly.js":20}],17:[function(e,t,i){t.exports={}},{}],18:[function(e,t,i){function a(e){var t=0;for(var i in s)s.hasOwnProperty(i)&&t++;if(0!=t)for(var a=0;a<e.length;a++){for(var n=[],o=0;o<e[a].content.length;o++){var r=e[a].content[o];s[r.msgId]?delete s[r.msgId]:n.push(r)}e[a].content=n}}var s=e("./offlineMessage.js");t.exports=a},{"./offlineMessage.js":17}],19:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),d=e("./initsession.js"),u=e("../util/monitAjax.js")(t),f=e("../socket/socketfactory.js"),p=t.apiConfig.leaveMsg,m=t.language.lan,g=!1,v=(new n,0),h=function(){$transferBtn=$(".temp_test")},y=function(e,i){var i=i||new n;return d(t,i).then(function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};return t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0),i}),i},j=function(e,i){var a=!!e,n=e?i.aface:t.apiConfig.robotLogo,r=e?i.aname:t.apiConfig.robotName,e=e||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;d(t).then(function(i,c){i||(i=[]);var d=new Date,u={date:o.formatDate(d),content:[{senderType:l?1:e?2:1,t:+d,msg:e,ts:o.formatDate(d,!0),senderFace:n,senderName:r}]};return a&&!t.apiInit.multiFlag&&t.apiConfig.adminHelloWordFlag&&i.push(u),a||t.apiInit.multiFlag||!t.apiConfig.robotHelloWordFlag||i.push(u),setTimeout(function(){s.trigger("core.initsession",i)},0),c})},T=function(e,i){i?(j(null,e),setTimeout(function(){t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,t.apiConfig.adminNoneLineFlag&&s.trigger("core.system",{type:"system",status:"offline",data:e})},1)):(t.urlParams.msgflag?e.content=t.urlParams.adminNonelineTitle:e.content=t.urlParams.adminNonelineTitle+p,t.apiConfig.adminNoneLineFlag&&s.trigger("core.system",{type:"system",status:"offline",data:e})),l.setCurrentState("robot")},b=function(e,n,o){var c=e.queueDoc;g=!0,a||(a=f(e,t),a.start()),i&&i.destroy(),i=new r(t),n?(j(null,e),setTimeout(function(){t.urlParams.msgflag?e.content=c:e.content=c+" "+p,!o&&t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})},1)):(t.urlParams.msgflag?e.content=c:e.content=c+" "+p,!o&&t.apiConfig.customerQueueFlag&&s.trigger("core.system",{type:"system",status:"queue",data:e})),l.setCurrentState("robot")},I=function(e,a){i&&i.destroy(),window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),g=!1,window.parent&&window.postMessage&&window.parent.postMessage(JSON.stringify({type:"manual",status:"success"}),"*"),i=f(e,t),i.start(),l.setCurrentState("human"),e.adminHelloWord&&(t.urlParams.adminHelloWord=e.adminHelloWord),t.urlParams.queueDoc=e.queueDoc||"",e.serviceEndPushMsg&&(t.urlParams.serviceEndPushMsg=e.serviceEndPushMsg||""),a?(j(t.urlParams.adminHelloWord,e),s.trigger("core.transfersuccess",{data:e})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:m.L10002.replace("{0}",e.aname)}}),s.trigger("core.transfersuccess",{data:e}),e.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",data:e})),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},w=function(e,i){t.urlParams.msgflag?e.content=m.L10001:e.content=m.L10001+" "+p,s.trigger("core.system",{type:"system",status:"blacklist",data:e}),i&&F()},x=function(e){var i;e&&(i=!!e.clickType),c(t,null,g,e).then(function(e,n){var o,r=e.groupId||"",l=e.tranType||"",c=e.transferFlag||"",d=e.keyword||"",f=e.keywordId||"";o=a&&"websocket"==a.type?8:1;var p=t.urlParams,m="/chat/user/chatconnect.action",h={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:o,current:g,groupId:r||"",keyword:d||"",keywordId:f||""};p.autoManual&&p.aid&&(m="/chat/user/invite.action",h.aid=p.aid),u({url:m,type:"post",dataType:"json",data:h,success:function(e){if(1==e.status||"keySwitch"!=l||1!=c||e.count){if(e.status==-1)return void s.trigger("core.sessionclose",7);v++,v>6||(t.urlParams.leaveMsgGroupId=r,2==e.status?T(e,i):0==e.status?b(e,i,f):1==e.status?I(e,i):3==e.status?(s.trigger("core.sessionclose",7),w(e,i)):6==e.status?(delete t.urlParams.aid,t.apiConfig.smartRouteInfoFlag=!1,s.trigger("core.grouplist")):7==e.status&&(e.content=e.msg,s.trigger("core.system",{type:"system",status:"queue",data:e})))}},fail:function(){}})},function(){})},F=function(e,a){e||(e=[]);var n=new Date,c={date:o.formatDate(n),content:[{senderType:1,t:+n,msg:t.urlParams.robotHelloWord,ts:o.formatDate(n,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(c),setTimeout(function(){s.trigger("core.initsession",e)},0),i=new r(t),l.setCurrentState("robot")},k=function(e){for(var n=e.list||[],o=0,r=n.length;o<r;o++){var c=n[o],d=c;if(200===c.type){i&&a&&(i.destroy(),i=a,a=null),l.setCurrentState("human"),s.trigger("core.system",{type:"system",status:"transfer",data:{content:m.L10002.replace("{0}",d.aname)}}),d.serviceInfo.adminHelloWord&&(t.urlParams.adminHelloWord=d.serviceInfo.adminHelloWord),d.content=t.urlParams.adminHelloWord,t.apiConfig.adminHelloWordFlag&&s.trigger("core.system",{type:"human",data:d}),s.trigger("core.buttonchange",{type:"transfer",action:"hide"});break}}},C=function(){s.on("sendArea.artificial",x),s.on("listMsg.keyWordArtificial",x),s.on("core.onreceive",k)},L=function(){s.trigger("core.buttonchange",{type:"transfer",action:"show"});var e=t.apiInit.ustatus;if(0==e)i=new r(t),y(),l.setCurrentState("robot");else if(1==e||e==-2){var a={clickType:!0};x(a)}else e==-1&&d(t).then(F)},A=function(){h(),C(),L()};A()};t.exports=a},{"../socket/robot.js":24,"../socket/rolling.js":25,"../socket/socketfactory.js":26,"../socket/websocket.js":27,"../util/date.js":28,"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./currentState.js":11,"./initsession.js":15,"./transfer.js":22}],20:[function(e,t,i){var a=function(t){var i,a,s=e("../util/listener.js"),n=e("../util/promise.js"),o=e("../util/date.js"),r=e("../socket/robot.js"),l=e("./currentState.js"),c=(e("../socket/websocket.js"),e("../socket/rolling.js"),e("./transfer.js")),d=e("./initsession.js"),u=t.apiConfig.leaveMsg,f=e("../socket/socketfactory.js"),p=e("../util/monitAjax.js")(t),m=t.language.lan,g=!1,v=function(e,t,a){i&&i.destroy(),e.content=m.L10027+" "+u,s.trigger("core.buttonchange",{type:"transfer",action:"hide",data:e}),t?setTimeout(function(){s.trigger("core.sessionclose",-1)},1):s.trigger("core.sessionclose",-1)},h=function(e,i,a){var n=a?i.aface:t.apiConfig.robotLogo,r=a?i.aname:t.apiConfig.robotName,a=a||t.urlParams.robotHelloWord,l=t.apiInit.ustatus==-2?1:0;e||(e=[]);var c=new Date,d={date:o.formatDate(c),content:[{senderType:l?1:a?2:1,t:+c,msg:a,ts:o.formatDate(c,!0),senderFace:n,senderName:r}]};t.apiConfig.robotHelloWordFlag&&e.push(d),setTimeout(function(){s.trigger("core.initsession",e)},0)},y=function(e,i){t.urlParams.msgflag?e.content=m.L10001:e.content=m.L10001+" "+u,e.aname=m.L10025,s.trigger("core.system",{type:"system",status:"blacklist",data:e}),s.trigger("core.sessionclose",-1)},j=function(e,a,n){var o=m.L10004.replace("{0}",e.count);g=!0,i&&i.destroy(),i=f(e,t),i.start(),a?setTimeout(function(){t.urlParams.msgflag?e.content=o:e.content=o+" "+u,e.aname=m.L10026,s.trigger("core.system",{type:"system",status:"queue",data:e}),s.trigger("core.sessionclose",-2)},1):(t.urlParams.msgflag?e.content=o:e.content=o+" "+u,e.aname=m.L10026,s.trigger("core.system",{type:"system",status:"queue",data:e}),s.trigger("core.sessionclose",-2))},T=function(e,i){var i=i||new n;return d(t,i).then(function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};return t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0),i}),i},b=function(){setTimeout(function(){s.trigger("core.sessionclose",-1)},0)},I=function(e,n,o){var o=!!o;d(t,n).then(function(n,r){var c;c=a&&"websocket"==a.type?8:1;var d=t.urlParams,u="/chat/user/chatconnect.action",T={sysNum:t.sysNum,uid:t.apiInit.uid,chooseAdminId:t.urlParams.aid||"",tranFlag:t.urlParams.tranFlag,way:c,current:g,groupId:e||""};d.autoManual&&d.aid&&(u="/chat/user/invite.action",T.aid=d.aid),p({url:u,type:"post",dataType:"json",data:T,success:function(a){return a.status==-1?void s.trigger("core.sessionclose",7):void(2==a.status?v(a,o,n):0==a.status?(t.urlParams.groupId=e,j(a,o,n)):1==a.status?(window.parent&&window.postMessage&&"iframe"==t.urlParams.from&&window.parent.postMessage(JSON.stringify({name:"manual",status:"success"}),"*"),o?(h(n,a,t.urlParams.adminHelloWord),s.trigger("core.transfersuccess",{data:a})):(s.trigger("core.system",{type:"system",status:"transfer",data:{content:m.L10002.replace("{0}",a.aname)}}),s.trigger("core.transfersuccess",{data:a}),a.content=t.urlParams.adminHelloWord,s.trigger("core.system",{type:"human",status:"transfer",data:a})),i&&i.destroy(),i=f(a,t),l.setCurrentState("human"),i.start(),window.parent&&window.postMessage&&window.parent.postMessage(JSON.stringify({type:"manual",status:"success"}),"*"),s.trigger("core.buttonchange",{type:"transfer",action:"hide"})):3==a.status?(s.trigger("core.sessionclose",7),y(a,o)):6==a.status&&(delete t.urlParams.aid,s.trigger("core.grouplist")))},fail:function(){}})})},w=function(e,i,a){var a=!!a,i=new n;return c(t,i,g).then(function(){
I(null,null,a)},b),i},x=function(e,i){e||(e=[]);var a=new Date,n={date:o.formatDate(a),content:[{senderType:1,t:+a,msg:t.urlParams.robotHelloWord,ts:o.formatDate(a,!0),senderFace:t.apiConfig.robotLogo,senderName:t.apiConfig.robotName}]};!t.apiInit.multiFlag&&t.apiConfig.robotHelloWordFlag&&e.push(n),setTimeout(function(){s.trigger("core.initsession",e)},0)},F=function(){},k=function(){},C=function(){var e=t.apiInit.ustatus;0==e?(setTimeout(function(){s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},5),i=new r(t),l.setCurrentState("robot"),T()):e==-1?(setTimeout(function(){s.trigger("core.buttonchange",{type:"transfer",action:"hide"})},5),i=new r(t),l.setCurrentState("robot"),d(t).then(x)):w(null,null,!0)},$=function(){F(),k(),C()};$()};t.exports=a},{"../socket/robot.js":24,"../socket/rolling.js":25,"../socket/socketfactory.js":26,"../socket/websocket.js":27,"../util/date.js":28,"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./currentState.js":11,"./initsession.js":15,"./transfer.js":22}],21:[function(e,t,i){var a={},s='<div class="shadow-layer js-shadow-layer"><div class="group-outer js-group-outer"><div class="group-title">{{= it.languageText.T0010}}</div><div class="group-main"><ul class="clearfix">{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.groupId}}">{{=item.recGroupName}}</li>{{  } }}</ul></div><div class="group-footer"><span class="js-cancel-btn cancel">{{=it.languageText.T0000}}</span></div></div></div>',n='<div><div class="group-layer js-group-layer"></div><div class="group-outer js-group-outer"><p class="group-title">{{= it.languageText.T0010}}<span class="close_button js-cancel-btn js-group-cancel"></span></p><div class="group-main"><ul class="clearfix">{{  for(var i=0;i<it.list.length;i++){ }}{{ var item = it.list[i];}}<li class="js-item" data-id="{{=item.groupId}}">{{=item.recGroupName}}</li>{{  } }}</ul></div></div></div>',o='<div class=""><div class="chatBeforeFormlayer js-chatBeforeFormlayer"></div><div id="chatBeforeForm" class="chatBeforeForm js-chatBeforeForm"> <div class="js-chatBeforeFormHeader chatBeforeFormHeader"><p class="title">{{=it.formTitle}}</p><span class="close js-cancel-btn"></span></div><div class="chatBeforeFormBody js-chatBeforeFormBody"><div class="guide">{{=it.formDoc}}</div><div class="definedFields js-definedFields">{{for(var i=0;i<it.definedField.length;i++){}} {{if(it.definedField[i].cusFieldConfig.fieldType==1){}} <div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><input type="text" class="definedInput js-definedInput" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}"><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==2){}}<div class="definedArea js-definedArea"> <p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><textarea class="definedTextarea js-definedInput" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}"></textarea><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==3){}}<div class="definedArea definedDateArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><input type="text" class="definedInput js-definedDate" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId}}" id="dp{{=it.definedField[i].cusFieldConfig.fieldId}}" readonly="readonly" ><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}" style="margin:3px 3%">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p>{{}else if(it.definedField[i].cusFieldConfig.fieldType==4){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="definedTimeDropList js-dropdownList" id="hour{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="js-dropdown-btn"><p class="definedTimeInput js-dropdown-title js-definedHour">00</p><span class="dropListTitleIcn"></span></div><ul class="dropdown-menus js-dropdown-menu zc-scroll">{{for(var j=0;j < 24;j++){}}{{if(j<10){}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{="0"+j}}</li>{{}else{}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{=j}}</li>{{}}}{{}}}</ul></div><span class="definedTimeText">:</span><div class="definedTimeDropList js-dropdownList" id="minute{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="js-dropdown-btn"><p class="definedTimeInput js-dropdown-title js-definedMinutes">00</p> <span class="dropListTitleIcn"></span></div><ul class="dropdown-menus js-dropdown-menu zc-scroll">{{for(var j=0;j < 60;j++){}}{{if(j<10){}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{="0"+j}}</li>{{}else{}}<li class="js-dropdownLi dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" style="width:60px;">{{=j}}</li>{{}}}{{}}} </ul></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p> <div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==5){}}<div class="definedArea js-definedArea"><p class="title">{{=it.definedField[i].cusFieldConfig.fieldName}}{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}}</p><input class="definedInput js-definedInput js-definedNumInput js-definedNumInput{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" type="number" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==6){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="js-dropdownList dropdownList" id="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}"><div class="definedDropList js-dropdown-btn"><p class="definedDropListTitle js-dropdown-title">{{=it.languageText.T0118}}</p><span class="dropListTitleIcn"></span></div><ul class="definedDropListUl js-dropdown-menu zc-scroll">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}}<li class="js-dropdownLi" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue}}" fieldType="{{=it.definedField[i].cusFieldDataInfoList[j].fieldType}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}" title="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}<span></span></li>{{}}}</ul><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==7){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><ul class="definedCheckedUl">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}} <li class="definedCheckedLi  js-userCheck {{=it.definedField[i].cusFieldDataInfoList[j].userCheckIcoActive=="userCheckIcoActive"?"":"userCheck"}}" data-fieldId="{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue?it.definedField[i].cusFieldDataInfoList[j].dataValue:""}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}"><span class="definedCheckedLiIcn js-userCheckIco{{=it.definedField[i].cusFieldConfig.fieldId?it.definedField[i].cusFieldConfig.fieldId:""}} {{=it.definedField[i].cusFieldDataInfoList[j].userCheckIcoActive=="userCheckIcoActive"?"userCheckIcoActive":""}}"></span><span class="definedCheckedLiText">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}</span></li>{{}}}</ul><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==8){}}<div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span> {{}}} {{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="definedOptionUl js-optionArea">{{for(var j=0;j<it.definedField[i].cusFieldDataInfoList.length;j++){}} <div class="js-userOpt definedOptionLi {{=it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive=="userOptIcoActive"?"":"userOpt"}}" data-fieldId="{{=it.definedField[i].cusFieldDataInfoList[j].fieldId?it.definedField[i].cusFieldDataInfoList[j].fieldId:""}}" dataValue="{{=it.definedField[i].cusFieldDataInfoList[j].dataValue?it.definedField[i].cusFieldDataInfoList[j].dataValue:""}}" dataName="{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}"><span class="userOptIco js-userOptIco{{=it.definedField[i].cusFieldDataInfoList[j].fieldId}} {{=it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive=="userOptIcoActive"?it.definedField[i].cusFieldDataInfoList[j].userOptIcoActive:""}}"></span><p class="definedOptionLiText">{{=it.definedField[i].cusFieldDataInfoList[j].dataName}}</p></div>{{}}}</div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}else if(it.definedField[i].cusFieldConfig.fieldType==9){}} <div class="definedArea js-definedArea"><p class="title">{{if(it.definedField[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div class="js-dropdownList dropdownList" id="province"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title">{{=it.languageText.T0121}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-provinceDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both"></div></div><div class="js-dropdownList dropdownList" id="city"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title js-cityDropListTitle">{{=it.languageText.T0122}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-cityDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both;"></div></div><div class="js-dropdownList dropdownList" id="county"><div class="cityDropList js-dropdown-btn"><p class="cityDropListTitle js-dropdown-title js-countryDropListTitle">{{=it.languageText.T0123}}</p><span class="dropListTitleIcn"></span></div><ul class="cityDropListUl js-countryDropListUl js-dropdown-menu zc-scroll"></ul><div style="clear:both"></div></div><p class="errorTip js-errorTip{{=it.definedField[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0108}}{{=it.definedField[i].cusFieldConfig.fieldName}}</p><div style="clear:both"></div></div>{{}}}{{}}}</div></div><div class="submitArea"><span class="submit js-chatBeforeFormSubmit">{{=it.languageText.T0120}}</span></div></div></div>',r='<div><div class="chatFormLayer js-chatFormLayer"><div class="chatBeforeForm"><div class="header"><p class="title">{{=it.formTitle}}</p><span class="closeForm js-closeForm">×</span></div><div class="chatBeforeForm-content js-chatBeforeForm-content"><div class="wrap-helper js-wrap-helper"><div class="js-helper helper"><div><p><span>{{=it.formDoc}}</span></p></div></div></div><div class="definedAreas">{{for(var i=0;i<it.items.length;i++){}}{{if(it.items[i].cusFieldConfig.fieldType==1){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><input type="text" class="definedInput js-definedInput" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div>{{}else if(it.items[i].cusFieldConfig.fieldType==2){}} <div class="definedArea js-definedArea"><p class="title" style="height:80px">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><textarea class="definedTextarea js-definedInput" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></textarea></div>{{}else if(it.items[i].cusFieldConfig.fieldType==3){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDateArea js-definedDateArea"><input type="text" class="definedDate js-definedDate" placeholder="{{=it.languageText.T0127}}xxxx-xx-xx" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==4){}} <div class="definedArea js-definedArea"><p class="title" style="width:18%">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedTimeArea"><input type="text" readonly="readonly" value="00" date-type="hour" class="definedTimeDropList js-definedTimeDropList js-definedHour"><span  class="definedTimeText">{{=it.languageText.T0115}} <span class="definedTimeIcn"></span> |</span><input type="text" readonly="readonly" value="00" date-type="minutes" class="definedTimeDropList js-definedTimeDropList js-definedMinutes"><span  class="definedTimeText">{{=it.languageText.T0116}} <span class="definedTimeIcn"></span></span><div class="dropListArea js-dropListArea js-dropListHour"><p class="dropListAreaTitle"><span class="titleText">{{=it.languageText.T0114}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><ul class="definedTimeDropListUl">{{for(var j=0;j<24;j++){}} {{if(j<10){}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="hour" dataValue="{{="0"+j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{="0"+j}}<span></span></li>{{}else{}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="hour" dataValue="{{=j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=j}}<span></span></li>{{}}}{{}}}</ul></div><div class="dropListArea js-dropListArea js-dropListMinutes"><p class="dropListAreaTitle"><span class="titleText">{{=it.languageText.T0113}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><ul class="definedTimeDropListUl">{{for(var j=0;j<60;j++){}} {{if(j<10){}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="minutes" dataValue="{{="0"+j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{="0"+j}}<span></span></li>{{}else{}}<li class="js-definedTimeLi js-dropLIstAreaClose" date-type="minutes" dataValue="{{=j}}" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=j}}<span></span></li>{{}}}{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==5){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><input class="definedInput js-definedInput" type="number" oninput="if(value.length>300)value=value.slice(0,300)"  fieldId="{{=it.items[i].cusFieldConfig.fieldId}}"></div>{{}else if(it.items[i].cusFieldConfig.fieldType==6){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedDropListUlWidely"><ul class="definedDropListUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="js-definedDropListLi js-dropLIstAreaClose" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedDropListLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==7){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedCheckedUlWidely zc-scroll"><ul class="definedCheckedUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="definedCheckedLi js-definedCheckedLi" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedCheckedLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div><p class="checkedSure js-checkedSure" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}">{{=it.languageText.T0001}}</p></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==8){}} <div class="definedArea js-definedArea"><p class="title">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><div class="definedDropList js-definedDropList"><p class="definedDropListText js-definedDropListText"></p><span class="definedDropListTextIcn"></span></div><div class="dropListArea js-dropListArea"><p class="dropListAreaTitle"><span class="titleText">{{=it.items[i].cusFieldConfig.fieldName}}</span><span class="close js-dropLIstAreaClose">{{=it.languageText.T0111}}</span></p><div class="definedDropListUlWidely"><ul class="definedDropListUl">{{for(var j=0;j<it.items[i].cusFieldDataInfoList.length;j++){}}<li class="js-definedDropListLi js-dropLIstAreaClose" fieldId="{{=it.items[i].cusFieldConfig.fieldId}}" dataValue="{{=it.items[i].cusFieldDataInfoList[j].dataValue}}" dataName="{{=it.items[i].cusFieldDataInfoList[j].dataName}}"><span class="definedDropListLiText">{{=it.items[i].cusFieldDataInfoList[j].dataName}}</span><span class="icn"></span></li>{{}}}</ul></div></div></div>{{}else if(it.items[i].cusFieldConfig.fieldType==9){}}<div class="cityArea "><p class="text">{{=it.items[i].cusFieldConfig.fieldName}}{{if(it.items[i].cusFieldConfig.fillFlag==1){}}<span class="icon">*</span>{{}}}</p><p class="cityAreaTitle js-cityAreaTitle"></p><span class="classIfyIcn"></span><div class="cityAreaLayer js-orderClassifyLayer"><div class="cityAreaInner js-orderClassifyInner"><div class="titleArea"><span class="title js-cityTitle">{{=it.languageText.T0121}}</span><span class="close js-orderClassifyClose">{{=it.languageText.T0111}}</span></div><div class="areaListArea js-areaListArea"></div></div></div></div>{{}}}{{}}}</div><div class="chatBeforeFormCommitWidely"><p class="chatBeforeFormCommit js-chatBeforeFormCommit">{{=it.languageText.T0120}}</p></div></div><div class="definedLayer js-definedLayer"></div></div></div>',l='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].provinceId){}}<p class="js-provinceList" provinceId="{{=it.items[i].provinceId}}" provinceName="{{=it.items[i].provinceName}}" endFlag="{{=it.items[i].endFlag}}">{{=it.items[i].provinceName}}{{if(!it.items[i].endFlag){}}<span class="firstIcon"></span>{{}}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',c='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].cityId){}}<p class="js-provinceList" cityId="{{=it.items[i].cityId}}" cityName="{{=it.items[i].cityName}}" endFlag="{{=it.items[i].endFlag}}">{{=it.items[i].cityName}}{{if(!it.items[i].endFlag){}}<span class="firstIcon"></span>{{}}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',d='<div class="cityList"><div class="questionList js-firstQuestionList">{{ for(var i=0;i<it.items.length;i++){ }}{{if(it.items[i].areaId){}}<p class="js-provinceList" areaId="{{=it.items[i].areaId}}" areaName="{{=it.items[i].areaName}}">{{=it.items[i].areaName}}<span class="sureActive"></span></p>{{}}}{{ } }}</div></div>',u='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" provinceId="{{=it.list[i].provinceId}}" title="{{=it.list[i].provinceName}}">{{=it.list[i].provinceName}}</li>{{}}}',f='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" cityId="{{=it.list[i].cityId}}" title="{{=it.list[i].cityName}}">{{=it.list[i].cityName}}</li>{{}}}',p='{{for(var i=0;i<it.list.length;i++){}}<li class="js-cityLi" areaId="{{=it.list[i].areaId}}" title="{{=it.list[i].areaName}}">{{=it.list[i].areaName}}</li>{{}}}',m='<div><div class="js-showTip showTip"><p class="showTipText">{{=it.text}}</p></div></div>';a.groupTemplate=s,a.groupTemplatePC=n,a.provinceEle=u,a.cityEle=f,a.countryEle=p,a.chatBeforeFormPc=o,a.chatBeforeFormH5=r,a.provinceEleH5=l,a.cityListEleH5=c,a.areaListEleH5=d,a.showTip=m,t.exports=a},{}],22:[function(e,t,i){function a(t,i,a,s){var n=(e("../util/listener.js"),e("../util/promise.js"));i=i||new n;var o=(e("./template.js"),t.language.lan,t.language.text,e("./chatGroups.js")),r=e("./chatBeforeForm.js"),l=e("../util/monitAjax.js")(t),c=function(e,t,i,a){var s=e.urlParams.groupId||"",n=e.urlParams,o={global:e,groupId:s},r=a?a.switchType:"",c=a?a.groupId:"",d=a?a.transferFlag:"",u=a?a.keyword:"",f=a?a.keywordId:"";if("keySwitch"==r){if(!s){var p={global:e,groupId:c,tranType:r,transferFlag:d,keyword:u,keywordId:f};setTimeout(function(){t.resolve(p)},0)}}else n.aid&&"number"==typeof n.tranFlag?setTimeout(function(){t.resolve(o)},0):n.autoManual&&n.aid?setTimeout(function(){t.resolve(o)},0):0!==e.apiInit.ustatus&&e.apiInit.ustatus!==-1?setTimeout(function(){t.resolve(o)},0):i?setTimeout(function(){t.resolve(o)},0):0===e.apiConfig.groupflag?setTimeout(function(){t.resolve(o)},0):"keySwitch"!=r&&e.urlParams.groupId&&e.urlParams.groupId.length?setTimeout(function(){t.resolve(o)},0):e.apiConfig.smartRouteInfoFlag?setTimeout(function(){t.resolve(o)},0):l({url:"/chat/user/getGroupList.action",dataType:"json",type:"get",data:{companyId:e.apiInit.pid,source:e.userInfo.source},success:function(e){if(1==e.length){var i=e[0];o.global.urlParams.groupId=i.groupId,o.groupId=i.groupId,t.resolve(o)}else 0==e.length?t.resolve(o):(o.groupList=e,t.resolve(o))},fail:function(){}});return t};return c(t,i,a,s).then(o).then(r,function(e){e.reject(e)}).then(function(e){i.resolve(e)},function(e){e.reject(e)}),i}t.exports=a},{"../util/listener.js":32,"../util/monitAjax.js":34,"../util/promise.js":36,"./chatBeforeForm.js":9,"./chatGroups.js":10,"./template.js":21}],23:[function(e,t,i){function a(t){var i,i,a=2e4,r=3e3,l=e("../util/monitAjax.js")(t);s.on("core.sessionclose",function(e){e!==-2&&e!==-3&&clearInterval(i)});var c=function(){l({url:"/chat/user/msgt.action",type:"post",dataType:"json",data:{uid:t.apiInit.uid,pid:t.apiInit.pid},success:function(e){e&&0==e.ustatus&&"human"==n.getCurrentState()&&s.trigger("core.sessionclose",4);var t=o.isReady();if(t){var i="rolling"===o().getType()?1:8;i!==e.way&&s.trigger("core.sessionclose",4)}},error:function(e){var t=new Image;t.src="images/static/errorlog.png?t="+ +new Date+"&response="+encodeURIComponent(e.response)+"&status="+e.status+"&statusText="+encodeURIComponent(e.statusText)+"&timeout="+e.timeout+"&from=heartbeat_user"}})};setTimeout(function(){c(),i=setInterval(c,a)},r)}var s=e("../util/listener.js"),n=e("../mode/currentState.js"),o=e("./socketfactory.js");t.exports=a},{"../mode/currentState.js":11,"../util/listener.js":32,"../util/monitAjax.js":34,"./socketfactory.js":26}],24:[function(e,t,i){function a(t){var i=e("../util/listener.js"),a="robot",s=!1,n=e("../util/monitAjax.js")(t),o=e("../util/errorlog.js"),r=function(){},l=function(e){return e.uid+""+e.date},c=function(e){var r=e[0];if("robot"===r.currentStatus){var c=(l(r),r.answer.replace(/(^\s+|\s+$)/g,""));/^\d+$/.test(c)||(s=!1),"question"==r.requestType&&(s=!0),r.answer||o.specialError("question_blank","common_robot",r,t),n({url:"/chat/user/robotsend.action",data:"type",data:{requestText:("string"==typeof r.requestText?r.requestText:JSON.stringify(r.requestText))||r.answer||"",question:("object"==typeof r.multiDiaQuestion?JSON.stringify(r.multiDiaQuestion):r.multiDiaQuestion)||r.answer,sysNum:t.sysNum,uid:t.apiInit.uid,cid:t.apiInit.cid,source:t.userInfo.source,questionFlag:2===r.questionFlag?r.questionFlag:s?1:0,lanFlag:t.urlParams.lanFlag||0,robotFlag:t.urlParams.robotFlag||""},type:"post",success:function(e){var t="object"==typeof e?e:JSON.parse(e);4==t.answerType&&(s=!0),i.trigger("core.onreceive",{list:[t],type:a}),i.trigger("core.msgresult",{msgId:r.dateuid,result:"success"}),t.keyword&&i.trigger("core.keySwitchAdmin",t),0===t.ustatus&&i.trigger("core.sessionclose",8)},error:function(e){i.trigger("core.msgresult",{msgId:r.dateuid,result:"fail"})}}),s=!1}},d=function(){i.off("sendArea.send",c),i.off("sendArea.sendSugguestions",c),i.off("multiConv.send",c)},u=function(){i.on("sendArea.send",c),i.on("sendArea.sendSugguestions",c),i.on("multiConv.send",c)},f=function(){r(),u()};this.destroy=d,f()}t.exports=a},{"../util/errorlog.js":29,"../util/listener.js":32,"../util/monitAjax.js":34}],25:[function(e,t,i){function a(t,i,a){this.puid=t;var n,o=e("../util/listener.js"),r=e("../util/monitAjax.js")(a),l=e("../util/errorlog.js"),c="human",d=0,u={},f=(a.language.lan,this),p=function(e,i){var i=i||0,a=e[0];"human"===a.currentStatus&&(a.date?a.ts=a.date:a.ts=+new Date,r({url:"/chat/user/chatsend.action",data:{puid:t,cid:a.cid,uid:a.uid,content:a.answer},dataType:"json",type:"POST",success:function(e){o.trigger("core.msgresult",{msgId:a.dateuid,result:"success"})},error:function(e){i>=3?o.trigger("core.msgresult",{msgId:a.dateuid,result:"fail"}):setTimeout(function(){p([a],i+1)},1e3)}}))},m=function(){clearInterval(n)},g=function(e){for(var t=[],i=0,a=e.length;i<a;i++){var s=e[i],n={type:300,utype:d,cid:s.cid,uid:s.uid,msgId:s.msgId};t.push(n)}t.length<=0||!JSON.stringify||r({url:"/chat/user/msg/ack.action",dataType:"json",data:{content:JSON.stringify(t),tnk:+new Date},type:"POST"})},v=function(){r({url:"/chat/user/msg.action",dataType:"json",data:{puid:t,uid:a.apiInit.uid,token:+new Date},type:"get",success:function(e){if(e&&e.length)try{for(var t=[],i=[],s=0;s<e.length;s++){var n=JSON.parse(e[s]);if(n.msgId||(n.msgId=+new Date+Math.random().toString(36).substr(2)+n.type),!u[n.msgId])if(u[n.msgId]=!0,t.push(n),202===n.type&&i.push(n),204===n.type){var r=a.urlParams.serviceEndPushMsg.replace("#客服#",n.aname);if(o.trigger("core.sessionclose",n.status),2==n.status||4==n.status)a.apiConfig.serviceEndPushFlag&&o.trigger("core.system",{type:"system",status:"kickout",data:{content:r}});else if(5==n.status){var d="温馨提示：请提高警惕，谨防被骗！不要轻信转账、付款二维码等信息！";o.trigger("core.system",{type:"system",status:"kickout",data:{content:d}})}}else 212==n.type&&o.trigger("core.system",{type:"system",status:"",data:{content:n.content}})}window.parent&&"iframe"===a.urlParams.from&&i.length>0&&window.postMessage&&window.parent.postMessage(JSON.stringify({name:"zhichiReceive",data:i}),"*"),g(t),o.trigger("core.onreceive",{type:c,list:t})}catch(f){l.runtimeError(f,"onreceive.rolling",{type:c,list:t},a)}},error:function(e,t){var i=new Image;i.src="images/static/errorlog.png?t="+ +new Date+"&e="+encodeURIComponent(t)+"&reponse="+e.responseText+"&uid="+a.apiInit.uid}})},h=function(){o.on("sendArea.send",p),o.on("multiConv.send",p),o.on("sendArea.sendSugguestions",p)},y=function(){setInterval(v,1500),s(a)},j=function(){h(),y()};j(),this.getType=function(){return f.type},this.type="rolling",this.destroy=m,this.start=v}var s=e("./heartbeat.js");t.exports=a},{"../util/errorlog.js":29,"../util/listener.js":32,"../util/monitAjax.js":34,"./heartbeat.js":23}],26:[function(e,t,i){var a=null,s=3e5,n=!1,o=function(t,i){if(a)return a;var o=+new Date;window.localStorage&&(o=+window.localStorage.getItem("websocketerror"));var r=!0;o&&(r=+new Date-o>s);var l=e("../socket/websocket.js"),c=e("../socket/rolling.js"),d=t["wslink.bak"];d.push(t["wslink.default"]);var u=t["wslink.default"];return a=window.WebSocket&&r&&(u.indexOf("ws:")>=0||u.indexOf("wss:")>=0)?new l(t.puid,d,u,i):new c(t.puid,t["wslink.default"],i),n=!0,a};o.isReady=function(){return n},t.exports=o},{"../socket/rolling.js":25,"../socket/websocket.js":27}],27:[function(e,t,i){function a(t,i,a,n){this.puid=t;var o,r,l,c=(Math.floor(Math.random()*i.length),"human"),d={},u=e("../util/listener.js"),f=e("../util/errorlog.js"),p=e("../util/date.js"),m=15e3,g=n.language.lan,v=this;this.channelId=Math.random().toString(32).substr(2);var h=!1,y=0,j=0,T=0,b=(new Date,5e3),I=0,w={},x=function(){var e=+new Date;for(var t in w){var i=w[t];e-i.sendTime>=b&&(delete w[t],u.trigger("core.msgresult",{msgId:i.dateuid,result:"fail"}))}},F=function(e){var t=e;if(Object.prototype.toString.call(e).indexOf("Array")>=0&&(t=e[0]),"human"===t.currentStatus){var i=t.date?new Date(t.date):new Date;t.t=+i,t.ts=p.formatDate(i,!0),t.type=103,t.msgId=t.dateuid,t.sendTime=t.date,t.channelId=v.channelId,t.content=t.answer,t.uname=n.userInfo.uname;var a=$("<div></div>");a.text(t.uname),t.uname=a.html(),t.face=n.userInfo.face,w[t.msgId]=t,j++,o.send(JSON.stringify(t))}},k=function(e){u.trigger("core.msgresult",{msgId:e.msgId,result:"success"}),delete w[e.msgId]},C=function(e){u.trigger("core.onreceive",{type:c,list:[e]})},L=function(e){var t=n.urlParams.serviceEndPushMsg.replace("#客服#",e.aname);if(204==e.type){if(u.trigger("core.sessionclose",e.status),h=e.status%2==0,o.close(),2==e.status||4==e.status)u.trigger("core.system",{type:"system",status:"kickout",data:{content:t}});else if(5==e.status){var i="温馨提示：请提高警惕，谨防被骗！不要轻信转账、付款二维码等信息！";
u.trigger("core.system",{type:"system",status:"kickout",data:{content:i}})}}else 212==e.type&&u.trigger("core.system",{type:"system",status:"",data:{content:e.content}});u.trigger("core.onreceive",{type:c,list:[e]})},A=function(e){if(301!=e.type){var t={type:300,msgId:e.msgId,utype:I,data:[e],channelId:v.channelId};try{o.send(JSON.stringify(t))}catch(i){}}},M=function(e){if("pong"===e.data)return clearTimeout(l),void(l=setTimeout(function(){o.close()},m));T++;var t=JSON.parse(e.data);if(!d[t.msgId+"_"+t.type]){var i=[];202===t.type&&i.push(t),window.top&&"iframe"===n.urlParams.from&&i.length>0&&window.top.postMessage(JSON.stringify({name:"zhichiReceive",data:i}),"*"),A(t),t.msgId||(t.msgId=+new Date+Math.random().toString(36).substr(2)+t.type),d[t.msgId+"_"+t.type]=t;try{301==t.type?k(t):202==t.type?C(t):L(t)}catch(a){f.runtimeError(a,"receive.websocket",t,n)}}},S=function(){if(y++>=3){var e=g.L10003.replace("{0}","");return u.trigger("core.system",{type:"system",status:"kickout",data:{content:e}}),void u.trigger("core.sessionclose",-4)}setTimeout(function(){Math.floor(Math.random()*i.length);o=new WebSocket(a),o.onerror=_,o.onopen=D,o.onclose=N,o.onmessage=M},5e3)},P=function(e){if(window.localStorage&&!h)try{window.localStorage.setItem("websocketerror",+new Date)}catch(e){f.runtimeError(e,"localStorage error",data,n)}h||S()},D=function(){r=setInterval(function(){o.send("ping")},5e3),window.localStorage&&window.localStorage.removeItem("websocketerror");var e={t:I,u:n.apiInit.uid,puid:t,s:n.sysNum,ts:+new Date},i=0;for(var a in w)i++;y=0,o.send(JSON.stringify(e));for(var a in w){var s=w[a];o.send(JSON.stringify(s))}setInterval(x,1e3)},N=function(e){P(e),clearTimeout(r)},_=function(e){},B=function(){o.onerror=_,o.onopen=D,o.onclose=N,o.onmessage=M,u.on("sendArea.send",F),u.on("sendArea.sendSugguestions",F)},O=function(){B()},R=function(){o&&(o.close(),clearTimeout(r))},z=function(){o=new WebSocket(a),O(),s(n)},E=function(){};this.getType=function(){return v.type},this.type="websocket",this.destroy=R,this.start=z,this.stop=E}var s=e("./heartbeat.js");t.exports=a},{"../util/date.js":28,"../util/errorlog.js":29,"../util/listener.js":32,"./heartbeat.js":23}],28:[function(e,t,i){var a={},s=function(e){return e>=10?e+"":"0"+e},n=function(e){var t=s,i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),o=[t(i),t(a),t(n)];return o.join(":")},o=function(e,t){var i=s,a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),l=[i(a),i(o),i(r)],c=e.getHours(),d=e.getMinutes(),u=e.getSeconds();[i(c),i(d),i(u)];return l.join("-")+(t?" "+n(e):"")};a.formatTime=n,a.formatDate=o,t.exports=a},{}],29:[function(e,t,i){var a,s={},n=e("../config/config.json"),o=e("../lib/detect.js"),r=encodeURIComponent,l=/Mobile/.test(window.navigator.userAgent)?"wap":"pc",c=function(e,t,i,s){var o=new Image,c="error="+r(e.toString());c+="&stack="+r(e.stack),c+="&from="+t,c+="&os="+a.os.family,c+="&osVersion="+a.os.version,c+="&browser="+a.browser.family,c+="&browserVersion="+a.browser.version,c+="&type="+l,c+="&uid="+s.apiInit.uid,c+="&data="+r(JSON.stringify(i)),c+="&pid="+s.apiInit.pid,o.src="//"+n.errorlogPath+"runtime?"+c},d=function(e,t,i,a){new Image;$.ajax({url:"//"+n.errorlogPath+"special",type:"post",dataType:"json",data:{errorType:e,from_type:t,data:r(JSON.stringify(i)),pid:a.apiInit.pid,type:l}})},u=function(e,t,i,a,s,o){var c=new Image,d=[];d.push("url="+r(t)),d.push("data="+r(JSON.stringify(i))),d.push("pid="+o.apiInit.pid),d.push("duration="+r(a)),d.push("uid="+r(o.apiInit.uid)),d.push("type="+l),d.push("reqType="+s);var u=d.join("&");c.src="//"+n.errorlogPath+"overtime?"+u},f=function(e,t,i,a,s){var o=new Image,c=[];c.push("status="+e.status),c.push("statusText="+e.statusText),c.push("url="+r(t)),c.push("data="+r(JSON.stringify(i))),c.push("pid="+s.apiInit.pid),c.push("responseText="+r(e.responseText)),c.push("type="+l),c.push("uid="+r(s.apiInit.uid)),c.push("reqType="+a);var d=c.join("&");o.src="//"+n.errorlogPath+"network?"+d};!function(){var e=window.navigator.userAgent;a=o.parse(e)}(),s.networkError=f,s.runtimeError=c,s.overTimeError=u,s.specialError=d,s.init=function(){},s.getFlag=function(){return!1},t.exports=s},{"../config/config.json":2,"../lib/detect.js":5}],30:[function(e,t,i){function a(e,t){var t=t||0;if("object"!=typeof e)throw"not a json";var i=Object.prototype.toString.call(e),s="";if(/Array/.test(i)){s="[";for(var n=[],o=0;o<e.length;o++){var r=e[o];if("object"==typeof r)try{n.push(a(r,t))}catch(l){continue}else n.push(r.toString())}return s+n.join(", ")+"]"}if(/Object/.test(i)){var c,d="",u="",n=[];s="{";var f=0;for(var p in e)if(e.hasOwnProperty(p)){if("number"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":'+e[p],n.push(c);else if("boolean"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":'+e[p],n.push(c);else if("string"==typeof e[p])c="",f>0&&(c+=","),c+='"'+p+'":"'+e[p]+'"',n.push(c);else if("object"==typeof e[p]){c="";try{f>0&&(c+=","),c+='"'+p+'":'+a(e[p],t+1),n.push(c)}catch(l){continue}}f++}return s+=n.join(""+d)+""+u+"}"}throw"not a json"}t.exports=a},{}],31:[function(require,module,exports){function init(){var parse=function(str){var obj;try{obj=eval("("+str+")")}catch(e){}return obj},stringify=function(e){if(e){var t=formatJSON(e,0);return t}return""};window.JSON||(window.JSON={parse:parse,stringify:stringify})}var formatJSON=require("./formatJSON.js");module.exports=init},{"./formatJSON.js":30}],32:[function(e,t,i){var a={},s={},n=function(e,t){if(s[e])for(var i=0,a=s[e].length;i<a;i++){var n=s[e][i];n(t)}},o=function(e,t){s[e]||(s[e]=[]);for(var i=!1,a=s[e],n=0,o=a.length;n<o;n++)if(a[n]==t){i=!0;break}i||s[e].push(t)},r=function(e,t){if(t&&"function"==typeof t){var i=s[e];if(i&&i.length)for(var a=i.length,n=a-1;n>=0;n--){var o=i[n];if(o==t){i.splice(n,1);break}}}else delete s[e]};a.on=o,a.off=r,a.trigger=n,t.exports=a},{}],33:[function(e,t,i){var a=e("./promise.js"),s={},n={},o=function(e,t){var t=t||new a;if(n[e])return a.when(function(){var t=n[e],i=new a;return setTimeout(function(){i.resolve(t)},0),i});var t=a.when(function(){return $.ajax({url:e,dataType:"text",type:"get"}).success(function(i){t.resolve(i),n[e]=i}).fail(function(e){t.reject(e)}),t});return t};s.load=o;var r=function(){return s};t.exports=r},{"./promise.js":36}],34:[function(e,t,i){t.exports=function(t){if(!t)throw"global is not defined";return function(i){var a=5e3,s=e("./errorlog.js"),n={},o=$.extend({url:"",data:{}},i),r=new Date;o.success&&(n.successCallback=o.success,delete o.success),o.fail&&(n.failCallback=o.fail,delete o.fail),o.error&&(n.failCallback=o.error,delete o.error);var l=o.url,c=o.data;return o.success=function(e){var i=(new Date,new Date-r);i>=a&&s.overTimeError(e,l,c,i,o.type,t),n.successCallback&&n.successCallback(e)},o.error=function(e){s.networkError(e,l,c,o.type,t),n.failCallback&&n.failCallback(e)},$.ajax(o),n.success=function(e){return n.successCallback=e,n},n.fail=function(e){return n.failCallback=e,n},n}}},{"./errorlog.js":29}],35:[function(e,t,i){var a={doc:document,timer:null,oldTitle:"",flashFlag:!1,count:0,msg:"您有【新消息】",flash:function(){this.flashFlag?this.clear():this.oldTitle=this.doc.title,this.flashFlag=!0;var e=this;this.timer=setInterval(function(){e.count++,e.count>=30&&(e.count=0,e.clear()),e._flash()},500)},_flash:function(){this.index=this.index?0:1,this.doc.title=this.index?this.msg:this.oldTitle},clear:function(){clearInterval(this.timer),this.flashFlag&&(this.doc.title=this.oldTitle),this.flashFlag=!1}};t.exports=a},{}],36:[function(e,t,i){function a(){var e=[],t=this;this.resolve=function(i){var a=e.shift();a&&a.success&&"function"==typeof a.success&&a.success(i,t)},this.reject=function(i){var a=e.shift();a&&a.fail&&"function"==typeof a.fail&&a.fail(i,t)},this.then=function(i,a){return e.push({success:i,fail:a}),t}}a.when=function(e){return e()},t.exports=a},{}],37:[function(e,t,i){t.exports={basePath:"//www.sobot.com/chat/pc_new"}},{}],38:[function(e,t,i){var a=function(t){var i,a=e("../../../common/initConfig.js")("pc"),s=e("../../../common/mode/mode.js");e("../../../common/socket/heartbeat.js");e("../../../common/util/initJSON.js")();var n,o=e("../../../common/util/listener.js"),r=function(){},l=function(){o.on("system.send",function(e){})},c=function(){i=s(n)},d=function(){r(),l(),c()};a.then(function(e){$(".white-layer").remove(),$(document.body).trigger("core.onload",[{data:e}]),n=e,d(),t.parent&&t.parent!==t&&t.parent.postMessage(JSON.stringify({name:"init"}),"*"),o.trigger("core.onload",[n])})};t.exports=a},{"../../../common/initConfig.js":3,"../../../common/mode/mode.js":16,"../../../common/socket/heartbeat.js":23,"../../../common/util/initJSON.js":31,"../../../common/util/listener.js":32}],39:[function(e,t,i){!function(t){var i=e("./core/core.js")(window,"pc"),a=e("./nesting/nesting.js"),s=e("./listMsg/index.js"),n=e("./sendArea/index.js");e("./util/json.js");var o=function(){},r=function(){window.console||(window.console={log:function(){}}),s(),n($("#footer"),i,window),a()},l=function(){o(),r()};l()}(document.body)},{"./core/core.js":38,"./listMsg/index.js":40,"./nesting/nesting.js":47,"./sendArea/index.js":52,"./util/json.js":63}],40:[function(e,t,i){var a=function(){var t,i,a,s,n,o,r,l,c,d,u,f,p=e("../../../common/util/listener.js"),m=e("../../../common/util/load.js")(),g=e("../util/qqFace.js"),v=e("../../../common/mode/offlineMessageFilter.js"),h=e("../config/config.json"),y=e("./template.js"),j=e("./theme.js"),T=e("./msgHandler.js"),b=e("../util/datetime.js"),I=e("../../../common/comm.js"),w={},x=60,F=107,k=0,C=0,L=[],A=0,M=0,S="",P=!0,D=function(){0===A&&P?(P=!1,t({type:"post",url:"/chat/user/queryUserCids.action",dataType:"json",data:{uid:i.apiInit.uid,time:i.urlParams.time||0},success:function(e){L=e.cids.reverse(),S=L[A],M=L.length-1,N(S)}})):A>0&&P&&(P=!1,S=L[A],N(S))},N=function(e){if(A<=M){$pulldownLoading.css("display","block"),$pulldownText.css("display","none");var r=o.find(".magBox").eq(0).attr("creattime");Number(k)||r,$(this);f=o.children().eq(0),t({type:"post",url:"/chat/user/getChatDetailByCid.action",dataType:"json",data:{uid:i.apiInit.uid,cid:e},success:function(t){t.length>0?(v(t),k=t[0].content.length>0?t[0].content[0].t:+new Date,m.load(h.basePath+"/views/listMsg/historyMsg.html").then(function(e){for(var i="",r=["<a","<img","<frame","<audio","<video","<iframe","<IFRAME","<EMBED","<embed"],l=!1,c=["<script"],d=0;d<t.length;d++){var u=t[d].date;if(u){var p=t[d].content[0].ts;u=b.formatTime(p,s),i+=doT.template(y.msgDate)(u)}for(var m=0;m<t[d].content.length;m++){if(l=!1,9==t[d].content[m].msgType||10==t[d].content[m].msgType){"string"==typeof t[d].content[m].msg&&(t[d].content[m].msg=JSON.parse(t[d].content[m].msg));var g=t[d].content[m].msg;if(g.retCode&&"000000"!=g.retCode)"000002"==g.retCode?t[d].content[m].msg=g.retErrorMsg:"000001"==g.retCode&&(t[d].content[m].msg=doT.template(y.cyclicSessionError)(g));else if("string"==typeof g.inputContentList){var v=g.inputContentList.split(","),h={multiDiaRespInfo:g,contentAry:v,msgId:""};t[d].content[m].msg=doT.template(y.inputContentTMP)(h)}else if("object"==typeof g.inputContentList){for(var v=[],j=[],T=0;T<g.inputContentList.length;T++)for(var x in g.inputContentList[T])j.push(x),v.push(g.inputContentList[T][x]);var h={multiDiaRespInfo:g,titleAry:j,contentAry:v,msgId:""};t[d].content[m].msg=doT.template(y.inputContentTMP_1511)(h)}else switch(g.template){case 0:var h={multiDiaRespInfo:g,msgId:g.msgId,from:"history"};t[d].content[m].msg=doT.template(y.cyclicSessionTMP0)(h);break;case 1:var h={multiDiaRespInfo:g,from:"history"};t[d].content[m].msg=doT.template(y.cyclicSessionTMP1)(h);break;case 2:var h={multiDiaRespInfo:g,from:"history"};t[d].content[m].msg=doT.template(y.cyclicSessionTMP2)(h);break;case 3:var h={multiDiaRespInfo:g};t[d].content[m].msg=doT.template(y.cyclicSessionTMP3)(h);break;case 4:var h={multiDiaRespInfo:g};t[d].content[m].msg=doT.template(y.cyclicSessionTMP4)(h);break;default:t[d].content[m].msg=g.remindQuestion}}for(var T=0;T<r.length;T++)"string"==typeof t[d].content[m].msg&&t[d].content[m].msg.indexOf(r[T])>=0&&(l=!0);if("string"==typeof t[d].content[m].msg&&t[d].content[m].msg.indexOf(c[0])>=0){var F=$("<div></div>").text(t[d].content[m].msg);t[d].content[m].msg=F.html()}"object"!=typeof t[d].content[m].msg&&(t[d].content[m].msg=l?t[d].content[m].msg:I.getNewUrlRegex(t[d].content[m].msg)),t[d].content[m].recallMsg=a.L10040.replace("{0}",t[d].content[m].senderName)}i+=doT.template(e)({data:t[d].content})}i=w.analysis(i),o.find("li:first").before(i);var k=f.offset().top;n.scrollTop(k-n.offset().top-100),$("#cutoff").css("display","none")}),A++):(A++,e=L[A],N(e)),P=!0,$pulldownLoading.css("display","none"),$pulldownText.css("display","block")}})}else $pulldownText.html(s.T0004)},_=function(e){var e=e.data;p.trigger("listMsg.artificial",e),d.attr("src",e.aface),u.html(e.aname),C=1},B=function(){$(this).hasClass("removeVoice")?(l.css("background-position","-581px 0px"),$(this).removeClass("removeVoice"),p.trigger("listMsg.openVoice",!0)):(l.css("background-position","-501px 0px"),$(this).addClass("removeVoice"),p.trigger("listMsg.openVoice",!1))},O=function(){if(i.urlParams.satDegree_A){var e={from:"close",resultFlag:!0,sourceType:1};p.trigger("listMsg.toEvaluate",e)}else window.parent!==window?window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"):(window.close(),window.location.href="about:blank")},R=function(e){var t=0,i=($(window).height(),$(window).width(),$(".js-mainBox").width(),$(".js-mainBox").height());e&&(t=e.noticeMsgHeight||0);var a=i-x-F-t;n.css("height",a+"px")},z=function(e){"human"===e?C=1:"robot"===e&&(C=0)},E=function(n){i=n[0],t=e("../../../common/util/monitAjax.js")(i),a=i.language.lan,s=i.language.text,document.title=i.apiConfig.companyName,H()},H=function(){j(i),w=g(window,i),R(),T(i,window),d.attr("src",i.apiConfig.robotLogo),u.html(i.apiConfig.robotName),c.html(i.apiConfig.companyName),u.attr("title",i.apiConfig.robotName),c.attr("title",i.apiConfig.companyName)},q=function(){n=$(".js-chatPanel"),o=$(".js-chatPanelList"),r=$(".js-historyTrigger"),$pulldownLoading=$(".js-pulldown-loading"),l=$(".js-zhichiVoice"),c=$(".js-infoBarCompany"),$pulldownText=$(".js-pulldown-text"),d=$(".js-infoBarLogo"),u=$(".js-titleName"),$closeForm=$(".js-closeForm")},W=function(){p.on("core.onload",E),r.on("click",D),p.on("core.transfersuccess",_),l.on("click",B),$closeForm.on("click",O),$(window).resize(function(){R()}),p.on("listMsg.noticeInit",R)},U=function(){q(),W(),p.on("core.statechange",z)};U()};t.exports=a},{"../../../common/comm.js":1,"../../../common/mode/offlineMessageFilter.js":18,"../../../common/util/listener.js":32,"../../../common/util/load.js":33,"../../../common/util/monitAjax.js":34,"../config/config.json":37,"../util/datetime.js":58,"../util/qqFace.js":69,"./msgHandler.js":41,"./template.js":45,"./theme.js":46}],41:[function(e,t,i){var a=function(t,i){var a,t,s,n,o,r,l,c,d,u,f,p,m,g,v=e("../../../common/util/listener.js"),h=e("../../../common/comm.js"),y=e("../util/qqFace.js"),j=(e("../../../common/util/promise.js"),!0),T=e("../../../common/util/errorlog.js"),b=e("../../../common/util/monitAjax.js")(t),I=0,w=e("./template.js"),x=e("../util/datetime.js"),F=e("./noticeMessage.js"),k=e("./pushEvaHandler.js"),C=e("../util/showTip.js"),L=e("../../../common/util/msgReminder.js"),A="",M={},S=0,P=!0,D=0,N=!0,_="",B=0,O=!1,R="",z=!1,E="",H=!1,q=!1,W=!0,U="",G=[],Z=t.language.lan,V=t.language.text,J=t.apiConfig.userOutFlag,Q=t.apiConfig.adminOutFlag,K=t.urlParams.adminTipWord,X=60*t.apiConfig.adminTipTime,Y=t.apiConfig.accountStatus,ee=function(e){"human"==e&&(S=1)},te=function(e){var t=JSON.parse(e.originalEvent.data);"offlineMessage"==t.name?(0==$(".cutoff").length&&v.trigger("core.onreceive",{type:"human",list:[{type:-110}]}),t.data.type=202,t.data.msg=t.data.content,v.trigger("core.onreceive",{type:"human",list:[t.data]})):"collapse"==t.name?(a=t.name,I=0,$(".cutoff").length>0&&$(".cutoff").remove(),v.trigger("core.onreceive",{type:"human",list:[{type:-110}]})):"expand"==t.name&&(a=t.name,He(),0==I?($(".cutoff").remove(),$(".js-unread").hide()):$(".js-unread").show().text(I+V.T0058))},ie=function(e){var t=new Date,i=t.getHours()>=10?t.getHours():"0"+t.getHours(),a=t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes(),s=V.T0011+i+":"+a,n=d.children().last().prev();if(d&&d.children().length&&n.hasClass("sysData")&&n.find(".msgData").html(s),1===e){var o=doT.template(w.msgDate)(s);d.append(o)}},ae=function(e){if("humanOnly"!=e.moduleType||"blacklist"!=e.status){if("system"===e.type){var a=(+new Date,""),s="";if("queue"==e.status)return $(".js-queueing").remove(),s=doT.template(w.systemMsg)(e.data),s=Re(s),A=$(s),d.append(A),7==e.data.status&&setTimeout(function(){t.urlParams.isLeaveCustomSysFlag?i.open(t.urlParams.leaveCustomUrl,"_self"):v.trigger("listMsg.openleaveMsgPage")},5e3),He(),se(),ne(e.data.id),$(".js-moduleSwitch").remove(),d.find(".js-fengefu1").remove(),z=!0,void(_&&$("#"+_).remove());if("kickout"==e.status)return;e.data.id="systemMsg"+ +new Date,2===e.data.status&&(_&&$("#"+_).remove(),_=e.data.id),a=doT.template(w.systemMsg)(e.data),a=Re(a);var n=$(a);d.append(n),"evaluate"!=e.status&&"leaveMsgComplete"!=e.status||setTimeout(function(){ne(e.data.id)},5e3),"transfer"==e.status&&ie(1),He()}else if("human"==e.type){var e=e.data;f.attr("src",e.aface),u.html(e.aname),v.trigger("listMsg.artificial",e);var a=doT.template(w.transferSayHello)(e);a=Re(a),t.apiConfig.adminHelloWordFlag&&d.append(a),d.find(".js-SwitchAdminsMsg").remove()}He()}},se=function(){var e=40;$(".js-queueing").css("width",$(".js-chatPanelBody").width()-e+"px")},ne=function(e){$("#"+e).remove()},oe=function(e){if(e&&e.length)for(var a=0;a<e.length;a++){var s=e[a].date||"",n="";if(s&&"welcome-sugguestions"!==e[a].answerType){var o=e[a].content[0].ts,r=0;try{r=e[1].content[0].t}catch(l){}s=x.formatTime(o,V),n+=doT.template(w.msgDate)(s),d.append(n)}"welcome-sugguestions"===e[a].answerType&&(e[a].content[0].answer=e[a].content[0].msg,ce(e[a],!1));var c=e[a].content||[];re(c,0,function(){$(".webchat_img_upload")&&$(".webchat_img_upload").parent().parent().parent().addClass("imgMagBox"),$(".js-msgFileIco")&&$(".js-msgFileIco").parent().parent().parent().addClass("fileMagBox")}),D>10&&$(".js-unread").css("display","block").html(D+V.T0058)}if(0==$(".js-chatPanelList").find(".js-noticeMsg").length){var u=doT.template(w.noticeHtml)({languageText:V,style:t.apiConfig.announceTopFlag});t.apiConfig.announceTopFlag?(p.append(u),t.apiConfig.announceClickUrl&&t.apiConfig.announceClickFlag&&(p.find(".js-noticeMsg").attr("href",t.apiConfig.announceClickUrl),p.find(".js-openUrl").addClass("openUrlShow"))):setTimeout(function(){$(".js-chatPanelList  > li:first-child").before(u)},10),!t.apiConfig.announceMsgFlag||t.apiInit.multiFlag&&!t.apiConfig.announceTopFlag||setTimeout(function(){F(t,i)},50)}if(d.append(R),t.multiGuideData){var f=doT.template(w.multiGuideHtml)({languageText:V,robotData:t.apiConfig,multiGuideData:t.multiGuideData});d.append(f)}d.append(A),ie(),He()},re=function(e,i,a){try{if(i>=e.length)return void(a&&a(i));var s=e[i],n=function(){re(e,i+1,a)};switch(s.senderType){case-1:var o={content:V.T0059},r=doT.template(w.cutoffMsg)(o);d.append(r),n();break;case 0:var l="";9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),l=le(s.msg,s.senderType)):"string"==typeof s.msg&&(l=$e(s.msg));var c={msg:l,t:s.t,dateuid:s.msgId,senderType:s.senderType,from:"initHistory"},r=doT.template(w.rightMsg)(c);d.append(r),n();break;case 1:try{9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),s.msg=le(s.msg,s.senderType)):"string"==typeof s.msg&&(s.msg=$e(s.msg));var c={msg:s.msg,aname:s.senderName,t:s.t,languageText:V,revokeFlag:s.revokeFlag,from:"initHistory"},r=doT.template(w.leftMsg)(c);r=Re(r),d.append(r),n()}catch(u){}break;case 2:try{9==s.msgType||10==s.msgType?(s.msg=JSON.parse(s.msg),s.msg=le(s.msg,s.senderType)):"string"==typeof s.msg&&(s.msg=$e(s.msg));var c={msg:s.msg,aname:s.senderName,t:s.t,languageText:V,revokeFlag:s.revokeFlag,from:"initHistory"},r=doT.template(w.leftMsg)(c);r=Re(r),d.append(r),"offline"===s.msgType&&D++,n()}catch(u){}break;case 3:n();break;default:n()}}catch(u){T.runtimeError(u,"initmessage",s,t)}},le=function(e,t){var i=e;if(1==t||2==t)if("000000"==i.retCode)if("string"==typeof i.inputContentList){var a=i.inputContentList.split(","),s={multiDiaRespInfo:i,contentAry:a,msgId:e.msgId};e.msg=doT.template(w.inputContentTMP)(s)}else if("object"==typeof i.inputContentList){for(var a=[],n=[],o=0;o<i.inputContentList.length;o++)for(var r in i.inputContentList[o])n.push(r),a.push(i.inputContentList[o][r]);var s={multiDiaRespInfo:i,titleAry:n,contentAry:a,msgId:e.msgId};e.msg=doT.template(w.inputContentTMP_1511)(s)}else if(i.interfaceRetList)switch(i.template){case 0:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP0)(s);break;case 1:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP1)(s);break;case 2:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP2)(s);break;case 3:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP3)(s);break;case 4:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP4)(s);break;default:e.msg=i.remindQuestion}else e.msg=i.remindQuestion||i.answer;else if("000002"==i.retCode)e.msg=i.retErrorMsg;else{var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionError)(s)}else switch(i.template){case 0:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP0)(s);break;case 1:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP1)(s);break;case 2:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP2)(s);break;case 3:var s={multiDiaRespInfo:i};e.msg=doT.template(w.cyclicSessionTMP3)(s);break;default:e.msg=i.remindQuestion}return e.msg},ce=function(e,i){if("robot"==e.type||i===!0){if(g&&g.play&&N)try{g.play()}catch(a){}if(i===!0)var s=e,n=e.answerType;else{if(e.list)var s=e.list[0],n=e.list[0].answerType;if(e.content)var s=e.content[0],n=e.content[0].answerType}if(contentInner=fe(s),contentInner&&0!=contentInner){var o={aname:t.apiConfig.robotName,msg:contentInner,languageText:V,showArtificial:O,showEvaluate:showEvaluate,wurl:E,wurlOpenStyle:q,robotFlag:s.robotFlag,docId:s.docId,question:s.question,msgId:s.msgId},r=doT.template(w.leftMsg)(o),c=$(r);if(1==t.urlParams.realuateFlag&&s.docId&&c.find(".msgDiv").css("display","block"),n&&c.find(".msgText").find("a").attr("target","_blank"),"welcome-sugguestions"===e.answerType)return void(R=c);if(d.append(c),$(".sugguestions").find("a").attr("target","_self"),s.multiDiaRespInfo){var u=s.multiDiaRespInfo.level;if(U!=G[u].conversationId)return d.find(".js-tmp"+G[u].conversationId).parents(".msgDiv").addClass("noneClick"),void He()}}$(".sugguestions").find("a").attr("target","_self"),Q&&clearInterval(l)}else"human"==e.type?(Ie(e.list,0,function(){}),L.flash()):T.specialError("ignore message","msgHandler",{data:e,searchFlag:i},t);setTimeout(function(){He()},100)},de=function(e){if(1==e.transferFlag||3==e.transferFlag){var i={switchType:"keySwitch",groupId:e.groupId,transferFlag:e.transferFlag,keyword:e.keyword,keywordId:e.keywordId};v.trigger("listMsg.keyWordArtificial",i)}else if(2==e.transferFlag&&!t.urlParams.groupId){var i={aname:t.apiConfig.robotName,list:e.groupList,tipsMessage:e.tipsMessage,transferFlag:e.transferFlag,keyword:encodeURIComponent(e.keyword),keywordId:e.keywordId},a=doT.template(w.keySwitchAdmins)(i),s=$(a);d.append(s)}},ue=function(){var e=$(this).attr("data-id"),t=$(this).attr("keyword"),i=$(this).attr("keywordId"),a={switchType:"keySwitch",groupId:e,keyword:decodeURIComponent(t),keywordId:i};v.trigger("listMsg.keyWordArtificial",a)},fe=function(e){var i=e.answer,a=e.answerType,s=["1511","1522","1523","15239","1524"],n=!1;if((e.sugguestions||[]).length>0||3==e.senderType){for(var o=0;o<s.length;o++)s[o]==a&&(n=!0);n||(i=Te(e,!1))}else i=$e(i);if(0===e.ustatus)return!1;switch(O=!1,showEvaluate=!1,a){case"1":"1"!==t.urlParams.manualTypeObj.direct||z||1==t.apiConfig.type||(O=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"2":"1"!==t.urlParams.manualTypeObj.under||z||1==t.apiConfig.type||(O=!0);break;case"3":1===t.urlParams.chatConnectButton&&(B++,B==t.urlParams.manualBtnCount&&v.trigger("listMsg.showChatSwitch")),"1"!==t.urlParams.manualTypeObj.unknow||z||1==t.apiConfig.type||(O=!0);break;case"4":"1"!==t.urlParams.manualTypeObj.guide||z||1==t.apiConfig.type||(O=!0);break;case 5:break;case 6:break;case 7:break;case 8:break;case"9":"1"!==t.urlParams.manualTypeObj.direct||z||1==t.apiConfig.type||(O=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case 10:break;case"11":"1"!==t.urlParams.manualTypeObj.direct||z||1==t.apiConfig.type||(O=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"12":"1"!==t.urlParams.manualTypeObj.direct||z||1==t.apiConfig.type||(O=!0),1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"14":1==t.urlParams.realuateFlag&&(showEvaluate=!0);break;case"15":case"151":case"1521":case"153":if("000000"==e.multiDiaRespInfo.retCode){var r=e.multiDiaRespInfo;if(G[r.level]=r,U=r.conversationId,r.endFlag&&(U=""),r.inputContentList){var l=r.inputContentList.split(",");l.length>9&&(l=l.slice(0,9));var c={multiDiaRespInfo:r,contentAry:l,msgId:e.msgId};i=doT.template(w.inputContentTMP)(c)}else if(r.interfaceRetList){if(0==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(w.cyclicSessionTMP0)(c)}else if(1==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(w.cyclicSessionTMP1)(c)}else if(2==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(w.cyclicSessionTMP2)(c)}else if(3==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(w.cyclicSessionTMP3)(c)}else if(4==r.template){var c={multiDiaRespInfo:r,msgId:e.msgId};i=doT.template(w.cyclicSessionTMP4)(c)}}else i=e.multiDiaRespInfo.remindQuestion}else if("000002"==e.multiDiaRespInfo.retCode){var r=e.multiDiaRespInfo;G[r.level]=r,U=r.conversationId,r.endFlag&&(U=""),i=e.multiDiaRespInfo.retErrorMsg}else{var r=e.multiDiaRespInfo;G[r.level]=r,U=r.conversationId,r.endFlag&&(U=""),i=doT.template(w.cyclicSessionError)(e)}break;case"1511":var r=e.multiDiaRespInfo;U=r.conversationId,G[r.level]=r,r.endFlag&&(U="");var l=[],d=[],u={};if("000000"==r.retCode){for(var o=0;o<r.inputContentList.length;o++)for(var f in r.inputContentList[o])d.push(f),l.push(r.inputContentList[o][f]);u={multiDiaRespInfo:r,titleAry:d,contentAry:l,msgId:e.msgId}}else u={multiDiaRespInfo:r};i=doT.template(w.inputContentTMP_1511)(u);break;case"1522":case"1523":case"15239":case"1524":var r=e.multiDiaRespInfo;U=r.conversationId,G[r.level]=r,e.multiDiaRespInfo.endFlag&&(U=""),i=pe(e)}return i},pe=function(e){var t=e.sugguestions||e.list,i="";i=e.answer||e.multiDiaRespInfo.answer||"";var a={list:t,answerStrip:e.multiDiaRespInfo.answerStrip||e.answerStrip||"",stripe:e.stripe||"",answer:i},s=doT.template(w.multiListSugguestionsMsg)(a);return s},me=function(){var e=$(this).attr("conversationId"),t=parseInt($(this).attr("page")),i=91,a=$(this).parent().find(".js-interfaceRetList"+e),s=a.find("li").length,n=0;if(t<=Math.floor(s/3)-1)n=t*(3*i),t++;else{var o=i*(s%3);0==o?(n=0,t=1):(n=(t-1)*(3*i)+o,t=0)}$(this).attr("page",t),a.stop(!0).animate({"margin-top":-n},500)},ge=function(){var e=parseInt($(this).attr("page")),t=$(this).parent().find(".js-tmp2List li"),i=t.length;if(i>3*e){e++,$(this).attr("page",e);for(var a=3*(e-1);a<3*e;a++){if(a>i-1)return $(this).find("span").html("收起全部"),void $(this).find("i").addClass("pull");a==i-1&&($(this).find("span").html("收起全部"),$(this).find("i").addClass("pull")),t.eq(a).removeClass("multiHide")}}else{$(this).find("span").html("展开更多"),$(this).find("i").removeClass("pull");for(var a=3;a<i;a++)t.eq(a).addClass("multiHide");$(this).attr("page",1)}},ve=function(){var e=parseInt($(this).attr("page")),t=$(this).parent().find(".js-tmp1List li"),i=t.length;if(i>9*e){e++,$(this).attr("page",e);for(var a=9*(e-1);a<9*e;a++){if(a>i-1)return $(this).find("span").html("收起全部"),void $(this).find("i").addClass("pull");t.eq(a).removeClass("multiHide")}}else{$(this).find("span").html("展开更多"),$(this).find("i").removeClass("pull");for(var a=9;a<i;a++)t.eq(a).addClass("multiHide");$(this).attr("page",1)}},he=function(){try{var e=$(this).attr("level"),i=$(this).attr("data-index");$(this).attr("conversationId");if(!G.length)return;var a=G[e],o=a.interfaceRetList[i],r=a.outPutParamList,l=a.template,c={},d=[],u=a.conversationId;if(U!=u)return;d.push(o),c={interfaceRetList:d,template:l},r=r.split("#");for(var f={},p=0;p<r.length;p++)f[r[p]]=o[r[p]];f.level=G[a.level].level,f.conversationId=G[a.level].conversationId;var m="";0==l?m=0==S?'<div class="tmp0InnerList">'+$(this).html()+"</div>":c.interfaceRetList[0].title:1==l?(m=$(this).html(),c=$(this).html()):2==l&&(m=0==S?'<div class="tmp2InnerList">'+$(this).html()+"</div>":c.interfaceRetList[0].title),v.trigger("sendArea.send",[{answer:m,requestText:f,multiDiaQuestion:c,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==S?"robot":"human"}])}catch(g){}},ye=function(){try{if(!G.length)return;var e={},i=($(this).attr("data-index"),$(this).text()),a=$(this).attr("level"),o=G[a].outPutParamList;$(this).attr("conversationId");if(e.level=G[a].level,e.conversationId=G[a].conversationId,e[o]=i,U!=G[a].conversationId)return;v.trigger("sendArea.send",[{answer:i,requestText:e,multiDiaQuestion:i,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==S?"robot":"human"}])}catch(r){}},je=function(){try{if(!G.length)return;var e={},i=$(this).attr("title"),a=$(this).attr("content"),o=$(this).attr("level"),r=(G[o].remindQuestion,$(this).attr("conversationId"),i+"："+a);if(e.level=G[o].level,e.conversationId=G[o].conversationId,e[i]=a,U!=G[o].conversationId)return;v.trigger("sendArea.send",[{answer:r,requestText:e,multiDiaQuestion:r,uid:s,cid:n,sysNum:t.sysNum,date:+new Date,questionFlag:2,source:0,robotFlag:t.urlParams.robotFlag||"",lanFlag:t.urlParams.lanFlag||0,currentStatus:0==S?"robot":"human"}])}catch(l){}},Te=function(e,t){if(e){var i=e.sugguestions||e.list,a="";e.answer&&(a="[object Object]"==Object.prototype.toString.call(e.answer)?e.answer.msg:e.answer);var s={list:i,isHistory:t,stripe:e.stripe,answer:a},n=doT.template(w.listSugguestionsMsg)(s);return n}return Z.L10032},be=function(){},Ie=function(e,s,n){if(s>=e.length)return void(n&&n(s));var r=e[s],c=function(){Ie(e,s+1,n)};switch(r.type){case 200:r.serviceInfo.serviceOutDoc&&(K=r.serviceInfo.serviceOutDoc),r.serviceInfo.serviceOutTime&&r.serviceInfo.serviceOutDoc&&(X=60*r.serviceInfo.serviceOutTime);case 201:if(t.urlParams.msgflag)var p=r.queueDoc;else var p=r.queueDoc+Z.L10039;var m={id:r.msgId,content:p},h=doT.template(w.systemqueue)(m);$(".js-queueing").html(h),se(),c();break;case 202:"collapse"==a&&I++;var y=$e(r.content);y.indexOf("验证码")==-1||0!=Y&&1!=Y||(H=!0);var m={msg:y,msgId:r.msgId,aname:r.aname,languageText:V,language:Z,revokeFlag:r.revokeFlag,dangerWarnFlag:H},h=doT.template(w.leftMsg)(m),T=$(h);if(1==t.urlParams.realuateFlag&&r.docId&&T.find(".msgDiv").css("display","block"),d.append(T),H=!1,$("#js-inputIng").removeClass("inputIngActive"),Q&&clearInterval(l),J&&Me(),(document.hidden||!j)&&N&&g&&g.play)try{g.play()}catch(b){}c();break;case 204:var h="";i.parent!==i&&i.parent.postMessage(JSON.stringify({name:"closeSession",data:r,status:r.status}),"*"),P=!1,c();break;case 205:clearInterval(o),r.content=V.T0119,$("#js-inputIng").html(r.content).addClass("inputIngActive"),o=setTimeout(function(){$("#js-inputIng").removeClass("inputIngActive")},5e3),c();break;case 206:var y=$e(r.content),m={msg:y,aname:u.html(),languageText:V},h=doT.template(w.leftMsg)(m);d.append(h),$("#js-inputIng").removeClass("inputIngActive"),c();break;case 210:f.attr("src",r.face),u.html(r.name),u.attr("title",r.name),
v.trigger("listMsg.artificial",r),r.serviceInfo.serviceOutDoc&&(K=r.serviceInfo.serviceOutDoc),r.serviceInfo.serviceOutTime&&r.serviceInfo.serviceOutDoc&&(X=60*r.serviceInfo.serviceOutTime),c();break;case-110:var h=doT.template(w.cutoffMsg)({content:V.T0059});d.append(h),c();break;case 209:k(t,i,r),c();break;case 211:var x=Z.L10040.replace("{0}",r.adminName),m={tips:x},h=doT.template(w.recallMsg)(m);d.find('[data-msg-id="'+r.revokeMsgId+'"]').html(h),c();break;default:c()}He()},we=function(e){var t=e.percentage;$("#"+e.token).find(".js-processSpan").css("width",t+"%")},xe=function(e){var t="fileOther";switch(e.filetype){case"rar":t="fileRar";break;case"txt":t="fileTxt";break;case"doc":t="fileDoc";break;case"pdf":t="filePdf";break;case"ppt":t="filePpt";break;case"xls":t="fileXls";break;default:t="fileOther"}if(e.browserVersion&&"ie-"===e.browserVersion)var i={filename:e.filename+e.extension,filetype:e.filetype,filesize:e.filesize,t:e.date,dateuid:e.token,fileIcoClass:t,source:"uploadFile"};else var i={filename:e.filename+e.extension,filetype:e.filetype,filesize:e.filesize||"",t:e.date,dateuid:e.token,fileIcoClass:t,source:"uploadFile"};var a=doT.template(w.rightMsg)(i),s=$(a);d.append(s),e.browserVersion&&"ie-"===e.browserVersion?(s.find(".js-uploadFileProcess").remove(),s.find(".js-filecancel").remove(),s.find(".js-fileSize").remove(),s.find(".js-sizeAfter").html("上传中...")):s.delegate("#filecancel"+e.token,"click",function(){v.trigger("listMsg.closeUploadFile","cancel"),s.find(".js-uploadFileProcess").remove(),s.find(".js-filecancel").remove(),s.find(".js-filecanceled").css("display","block")}),He()},Fe=function(e){if(e.browserVersion&&"ie-"===e.browserVersion)var t={msg:'<img  class="webchat_img_upload js-zhichiMsgReUpload" src="img/upImgLoad.png"/>',t:e.date,dateuid:e.token,source:"uploadImg"};else var t={msg:'<img  class="webchat_img_upload js-zhichiMsgReUpload" src="'+e.result+'"/>',t:e.date,dateuid:e.token,source:"uploadImg"};var i=doT.template(w.rightMsg)(t),a=$(i);d.append(a);var s=$("#"+e.token).find(".js-uploadImgLayer").height();$("#"+e.token).find(".js-cancelUploadImg").css("margin-top",(s-60)/2+"px"),a.delegate("#imgCancel"+e.token,"click",function(){v.trigger("listMsg.closeUploadImg"),$("#"+e.token).remove()}),He()},ke=function(e){"ie-"===e.browserVersion?($("#"+e.dateuid).find(".js-sizeAfter").remove(),$("#"+e.dateuid).find(".js-filefail").css("display","block")):($("#"+e.dateuid).find(".js-uploadFileProcess").remove(),$("#"+e.dateuid).find(".js-filecancel").remove(),$("#"+e.dateuid).find(".js-filefail").css("display","block"))},Ce=function(e){L.clear(),e=e[0];var t=$e(e.answer);e.dateuid||(e.dateuid=e.uid+ +new Date);var i=e.dateuid,a={msg:t,dateuid:i};if("image"===e.msgSendType)$("#"+i).find(".msgText").html(e.answer),$("#"+i).find(".js-uploadImgLayer").remove(),$("#msgStatus"+i).remove();else if("file"===e.msgSendType)$("#"+i).find(".js-filecancel").remove(),$("#"+i).find(".js-uploadFileProcess").remove(),$("#"+i).find(".js-filedownload").css("display","inline-block").attr("href",e.fileurl);else if("ie-image"===e.msgSendType)$("#"+i).find(".js-zhichiMsgReUpload").attr("src",e.fileurl),$("#"+i).find(".js-uploadImgLayer").remove();else if("ie-file"===e.msgSendType)$("#"+i).find(".js-sizeAfter").html("上传完成");else{var s=doT.template(w.rightMsg)(a);d.append(s),$("#msgStatus"+i).addClass("msgsending")}J&&clearInterval(r),Q&&Se(),e.image===!0?setTimeout(function(){He()},500):He()},$e=function(e){var t=["<a","<img","<frame","<audio","<video","<iframe","<IFRAME","<EMBED","<embed"],i=!1;if("string"==typeof e){var a=["<script"];if(e.indexOf(a[0])>=0){var s=$("<div></div>").text(e);e=s.html()}for(var n=0;n<t.length;n++)e.indexOf(t[n])>=0&&(i=!0);return e=i?e:h.getNewUrlRegex(e),e=M.analysis(e)}},Le=function(e){"success"===e.result?$("#msgStatus"+e.msgId).remove():"ImgSendFail"==e.result?$("#msgStatus"+e.msgId).addClass("msgsendError js-ImgSendFail"):$("#msgStatus"+e.msgId).addClass("msgsendError")},Ae=function(){L.clear();var e=$(this).attr("id"),t=$("#"+e).parent().find(".msgText").html();if($("#"+e).parent().parent().remove(),e=e.substr(9,e.length),$(this).hasClass("js-ImgSendFail")){var i=$(this).parent().find(".js-zhichiMsgReUpload").attr("src");return void v.trigger("sendArea.createUploadImg",{result:i,date:+new Date,token:e})}v.trigger("sendArea.send",[{answer:t,uid:s,cid:n,dateuid:e,currentStatus:0==S?"robot":"human",date:+new Date,token:e,sendAgain:!0}]),J&&clearInterval(r),Q&&Se()},Me=function(){var e=t.urlParams.userTipWord,i=60*t.apiConfig.userTipTime,a=0;clearInterval(r),r=setInterval(function(){if(P){if(a+=1,i===a){e=Re(e);var t=[{type:206,content:e}];Ie(t,0,function(){}),He()}}else clearInterval(r)},1e3)},Se=function(){if(1===S){var e=0;clearInterval(l),l=setInterval(function(){if(P){if(e+=1,X===e){K=Re(K);var t=[{type:206,content:K}];Ie(t,0,function(){}),He()}}else clearInterval(l)},1e3)}},Pe=function(){var e=$(this).attr("data-docid")||"",t=$(this).html();if(W){W=!1;var i=s+ +new Date;v.trigger("sendArea.send",[{requestText:e,answer:t,uid:s,cid:n,dateuid:i,requestType:"question",questionFlag:1,date:+new Date,currentStatus:0==S?"robot":"human"}]),$("#msgStatus"+i).removeClass("msgsending"),setTimeout(function(){W=!0},1e3)}},De=function(){var e=($(this).attr("data-docid")||"",$(this).attr("data-num")),i=[{question:e,answer:e,sysNum:t.sysNum,uid:s,cid:n,currentStatus:0==S?"robot":"human",source:t.userInfo.source,lanFlag:t.urlParams.lanFlag||0,robotFlag:t.urlParams.robotFlag||"",questionFlag:0}];v.trigger("sendArea.send",i)},Ne=function(){},_e=function(e){switch(e){case-3:u.attr("title","").html(t.apiConfig.robotName),z=!0;break;case-1:if(t.urlParams.msgflag)var i=t.urlParams.adminNonelineTitle;else var i=t.urlParams.adminNonelineTitle+t.apiConfig.leaveMsg;var a={type:"system",status:"offline",data:{content:i}};t.apiConfig.adminNoneLineFlag&&ae(a);break;case-2:u.attr("title","").html(Z.L10026),f.attr("src","img/nolink.png"),1===t.apiConfig.sideBarStatus&&($(".js-barRobotName").html(Z.L10026),$(".js-barHeadImg").attr("src","img/nolink.png")),z=!0;break;case-4:var a={type:"system",status:"offline",data:{content:t.urlParams.adminNonelineTitle}};t.apiConfig.adminNoneLineFlag&&ae(a);break;case 2:case 3:if(t.apiConfig.serviceEndPushFlag){var a={type:"system",status:"offline",data:{content:t.urlParams.serviceEndPushMsg.replace("#客服#",u.html())}};ae(a)}break;case 5:var a={type:"system",status:"offline",data:{content:"温馨提示：请提高警惕，谨防被骗！不要轻信转账、付款二维码等信息！"}};ae(a);break;case 6:var a={type:"system",status:"offline",data:{content:Z.L10030}};ae(a);break;case 1:var s="";s="暂无客服在线"===u.html()?t.urlParams.serviceEndPushMsg.replace("#客服#","客服"):t.urlParams.serviceEndPushMsg.replace("#客服#","客服");var n={content:s};_html=doT.template(w.systemMsg)(n),t.apiConfig.serviceEndPushFlag&&d.append(_html);break;case 4:var o=Re(t.apiConfig.userOutWord),n=[{type:206,content:o,aname:u.html()}];Ie(n,0,function(){});case 7:break;case 8:var a={type:"system",status:"offline",data:{content:Z.L10031.replace("{0}",u.html())}};ae(a)}},Be=function(e){E=e.wurl,q=e.wurlOpenStyle},Oe=function(){$(".js-moduleSwitch").remove()},Re=function(e){return e+="",e.replace(/target=\"_self\"/g,'target="_blank"')},ze=function(e){"transfer"===e.status&&($(".js-queueing").remove(),clearInterval(r),$(".js-switchRobot").remove())},Ee=function(){var e=$(this),t=e.attr("docId"),i=e.attr("robotFlag"),a=e.attr("question"),o=e.attr("status"),r=e.attr("msgId");b({type:"post",url:"/chat/user/rbAnswerComment.action",dataType:"json",data:{uid:s,cid:n,docId:t,msgId:r,docName:a,status:o,robotFlag:i},success:function(t){if(t.ustatus!==-1&&1!==t.ustatus){if(0===t.ustatus){var i=V.T0072;return void C.show(i)}var i=V.T0073;return void C.show(i)}if(1==o)var i=V.T0070;else var i=V.T0071;C.show(i),e.hide().siblings(".js-evaback").show(),1==o?(e.siblings(".js-okBack").addClass("yesBack"),e.siblings(".js-noBack").addClass("no2Back")):(e.siblings(".js-okBack").addClass("yes2Back"),e.siblings(".js-noBack").addClass("noBack")),e.siblings(".js-msgEvaluate").remove()}})},He=function(){try{var e=document.getElementById("chatPanel");e.scrollTop=e.scrollHeight}catch(t){return"滚动至底部失败"}},qe=function(){var e=(document.getElementById("chatPanel"),$(".cutoff")),t=$(".js-chatPanel"),i=e.parent(),a=e.offset().top-i.offset().top;t.animate({scrollTop:a-25},300)},We=function(){$(".js-chatSwitch").hide(),$(".js-fengefu1").hide(),$(".js-manual-remove").remove();for(var e=$(".js-msgBottomArea").length,t=0;t<e;t++)if(!$($(".js-msgBottomArea")[t]).attr("showEvaluate")){$(".js-msgBottomArea").remove();break}},Ue=function(e){e.data.serviceOutDoc&&(K=e.data.serviceOutDoc),e.data.serviceOutTime&&e.data.serviceOutDoc&&(X=60*e.data.serviceOutTime),$(".js-switchRobot").remove()},Ge=function(){M=y(i,t),C=C(t)},Ze=function(){c=$(".js-chatPanel"),d=$(".js-chatPanelList"),$msgStatus=$(".js-msgStatus"),u=$(".js-titleName"),f=$(".js-infoBarLogo"),p=$(".js-header"),m=$(".js-queueing"),g=document.getElementById("newMsgAudio")},Ve=function(){v.on("core.initsession",oe),v.on("core.onreceive",ce),v.on("core.keySwitchAdmin",de),v.on("sendArea.send",Ce),$(i).on("message",te),v.on("core.msgresult",Le),v.on("sendArea.msgresult",Le),v.on("core.statechange",ee),v.on("core.sessionclose",_e),v.on("core.system",ae),v.on("core.system_pc",be),v.on("sendArea.sendAreaSystemMsg",ae),v.on("sendArea.robotOverTimeHandler",Ne),v.on("listMsg.openVoice",function(e){N=e}),v.on("listMsg.scrollToBottom",He),v.on("sendArea.wurlHandler",Be),v.on("sendArea.revmoveChatSwitch",Oe),v.on("sendArea.createUploadFile",xe),v.on("sendArea.uploadFileProcess",we),v.on("sendArea.createUploadImg",Fe),v.on("sendArea.uploadFileFail",ke),v.on("sendArea.hideMsgBotBtn",We),v.on("core.system",ze),v.on("core.transfersuccess",Ue),d.delegate("img","click",function(){var e=$(this).attr("src"),t=$(this).attr("noJump");e.indexOf("data:")>=0||t||i.open(e)}),$(document.body).delegate(".js-unread","click",function(){qe(),$(".js-unread").css("display","none")}),$(i).resize(function(){se()}),d.delegate(".js-answerBtn","click",Pe),d.delegate(".js-multiAnswerBtn","click",De),d.delegate(".js-msgStatus","click",Ae),d.delegate(".js-msgEvaluate","click",Ee),d.delegate(".js-tmpInnerList","click",he),d.delegate(".js-inputContent","click",ye),d.delegate(".js-inputContent_1511","click",je),d.delegate(".js-tranMultiGroup","click",me),d.delegate(".js-tmp2MultiMore","click",ge),d.delegate(".js-tmp1MultiMore","click",ve),d.delegate(".js-keySwitchAdmin","click",ue),i.onfocus=function(){j=!0},i.onblur=function(){j=!1},c.on("scroll",function(){var e=c.scrollTop(),t=$(".cutoff"),i=($(".js-chatPanel"),t.parent());if(!(t.length<=0)){var a=t.offset().top-i.offset().top;e<a&&$(".js-unread").css("display","none")}})},Je=function(){s=t.apiInit.uid,n=t.apiInit.cid,Ze(),Ge(),Ve()};Je()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/errorlog.js":29,"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"../../../common/util/msgReminder.js":35,"../../../common/util/promise.js":36,"../util/datetime.js":58,"../util/qqFace.js":69,"../util/showTip.js":70,"./noticeMessage.js":42,"./pushEvaHandler.js":43,"./template.js":45}],42:[function(e,t,i){var a=function(t,i){var a,s,n,o,r=e("../../../common/util/listener.js"),l=(e("./template.js"),t.language.lan,t.language.text),c=t.apiConfig.announceTopFlag,d=function(){s.css("display","block"),n.append(t.apiConfig.announceMsg),n.find("a").attr("target","_blank"),n.height()>114&&(n.addClass("noticeInner-ellipsis-5"),o.css("display","block"),s.css("padding-bottom","30px"))},u=function(){var e=40,t=$(".js-chatPanelBody").width()-e;s.css("width",t+"px"),n.css("width",t+"px");var i=40;c&&($(".js-chatPanelBody").css("padding-top",i),n.css("overflow","hidden")),r.trigger("listMsg.noticeInit",{noticeMsgHeight:i})},f=function(){o.hasClass("openActive")?(o.removeClass("openActive").addClass("closeActive"),o.html(l.T0069),n.removeClass("noticeInner-ellipsis-5")):(o.addClass("openActive").removeClass("closeActive"),o.html(l.T0068),n.addClass("noticeInner-ellipsis-5"))},p=function(){},m=function(){$mainBox=$(".js-mainBox"),a=$mainBox.find(".js-header"),s=$mainBox.find(".js-noticeMsg"),n=$mainBox.find(".js-noticeInner"),o=$mainBox.find(".js-openNotice")},g=function(){c&&$(i).resize(function(){u()}),o.on("click",f),r.on("listMsg.noticeToTop",p),r.on("listMsg.sideBarAfterNotice",u)},v=function(){m(),g(),d(),c&&u()};v()};t.exports=a},{"../../../common/util/listener.js":32,"./template.js":45}],43:[function(e,t,i){var a=function(t,i,a){var s,n=e("../../../common/util/listener.js"),o=e("./template.js"),r=e("../util/showTip.js"),l=!0,c=0,d={},u=1,f=e("../../../common/util/monitAjax.js")(t),p=t.language.lan,m=t.language.text,g=t.userInfo.color?t.userInfo.color:t.apiConfig.color,v=function(){$aLi=s.find("#pushStar li");for(var e=0,t=1;t<=$aLi.length;t++)$aLi[t-1].index=t,$($aLi[t-1]).bind("click",function(){switch(e=this.index,h(e),e){case 1:case 2:case 3:case 4:c=e,j();break;case 5:c=5,T()}s.find(".js-commit").css({"background-color":g,color:"#fff"})})},h=function(e){for(var t=0;t<$aLi.length;t++)$aLi[t].className=t<e?"on":""},y=function(){s.find("#pushStar li").unbind()},j=function(){I()},T=function(){l&&(l=!1,1!=d[0].isQuestionFlag&&(u=-1),f({type:"post",url:"/chat/user/comment.action",dataType:"json",data:{cid:t.apiInit.cid,visitorId:t.apiInit.uid,score:5,tag:"",remark:"",commentType:0,type:1,solved:u},success:function(e){1===e.status?(y(),showTipObj.show(m.T0032),s.undelegate(),s.find(".js-moregood").html(m.T0025),1==u?(s.find(".js-unSolved").removeClass("unsolveActive"),s.find(".js-unSolved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-solved").css({background:g,border:"1px solid "+g}),s.find(".js-solved").removeClass("defaultSolveActive").addClass("solveActive")):0==u&&(s.find(".js-solved").removeClass("solveActive"),s.find(".js-solved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-unSolved").addClass("unsolveActive"),s.find(".js-unSolved").css({background:g,border:"1px solid "+g}))):showTipObj.show(m.T0033)},error:function(){showTipObj.show(m.T0033)}})),setTimeout(function(){l=!0},4e3)},b=function(){v()},I=function(){var e=0;e=s.find(".js-solved").hasClass("solveActive")?1:s.find(".js-unSolved").hasClass("unsolveActive")?2:0;var t={from:"push",score:c,resultFlag:!1,sourceType:0,commentType:0,solveActive:e};n.trigger("listMsg.toEvaluate",t)},w=function(e){$aLi=$("#pushStar li");var t=e.score,i=e.solved;1==i?(s.find(".js-unSolved").removeClass("unsolveActive"),s.find(".js-unSolved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-solved").css({background:g,border:"1px solid "+g}),s.find(".js-solved").removeClass("defaultSolveActive").addClass("solveActive")):0==i&&(s.find(".js-solved").removeClass("solveActive"),s.find(".js-solved").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-unSolved").addClass("unsolveActive"),s.find(".js-unSolved").css({background:g,border:"1px solid "+g})),h(t),s.undelegate(),s.find(".js-moregood").html(m.T0025)},x=function(){$mainBox=$(".js-mainBox"),$chatPanelList=$(".js-chatPanelList")},F=function(){s.delegate(".js-commit","click",T),n.on("listMsg.closePushEva",y),n.on("sendArea.toPushEav",w),n.on("sendArea.reTopushEav",b),s.delegate(".js-solved","click",function(){$(this).hasClass("solveActive")||($(this).addClass("solveActive"),$(this).css({background:g,border:"1px solid "+g}),s.find(".unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-unSolved").removeClass("unsolveActive")),u=1}),s.delegate(".js-unSolved","click",function(){$(this).hasClass("unsolveActive")||($(this).addClass("unsolveActive"),$(this).css({background:g,border:"1px solid "+g}),s.find(".solveActive").css({background:"#fff",border:"1px solid #d6dbe5"}),s.find(".js-solved").removeClass("solveActive")),u=0})},k=function(){f({type:"get",url:"/chat/user/satisfactionMessage.action",dataType:"json",data:{uid:t.apiInit.uid},success:function(e){if(1===e.status){d=e.data,showTipObj=r(t),$chatPanelList.find(".js-zhichipushEva")&&$chatPanelList.find(".js-zhichipushEva").remove();var i=a.aname.length>4?a.aname.substr(0,4)+"...":a.aname,l={config:d,language:p,languageText:m,subName:i,aname:a.aname},c=doT.template(o.pushEvaMsg)(l);s=$(c),$chatPanelList.append(s),v(),F(),n.trigger("listMsg.scrollToBottom")}},error:function(){r.show("请检查网络链接")}})},C=function(){x(),k()};C()};t.exports=a},{"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"../util/showTip.js":70,"./template.js":45}],44:[function(e,t,i){var a=function(t,i,a){var s,n,o,r,l,c,d,u,f,p,m,g,v,h,y,j,T,b,I=e("../../../common/util/listener.js"),w=(e("../../../common/util/load.js")(),e("./template.js")),x=(e("../../../common/comm.js"),e("../../../common/util/monitAjax.js")(i)),F=i.language.text,k=0,C=42,L=0,A=1,M=0,S=0,P=80,D=120,N=[],_=function(){var e=doT.template(w.sideBarMenu)(N);f.append(e),P*M>k?(b=80,S=k-C,b-S%b>1&&(b=S/Math.floor(S/b)),L=Math.ceil(b*M/(S+1)),f.find("li").eq(0).css("border-left","1px solid #fff")):P*M<=k&&D*M>=k?(b=k/M,S=k,b-S%b>1&&(b=S/Math.floor(S/b)),g.css("display","none")):(b=120,S=k,b-S%b>5&&(b=S/Math.floor(S/b)),g.css("display","none")),n.css("width",k+"px"),u.css("width",S+1+"px"),f.css("width",b*M+"px"),f.find("li").css("width",b-1+"px");var e=doT.template(w.barMain)({list:N,languageText:F});v.append(e),$(".js-barInner:first").css("display","block"),$(".js-barAddress").html(h.html()),$(".js-barRobotName").html(y.html()),$(".js-barRobotName").attr("title",y.html()),$(".js-barHeadImg").attr("src",i.apiConfig.robotLogo),$(".js-customInner").find("a").attr("target","_blank"),$(".js-barInner2 img").on("click",function(){var e=$(this).attr("src");a.open(e)}),setTimeout(function(){I.trigger("listMsg.sideBarAfterNotice")},50),B()},B=function(){var e=r.width()-k-2;e<360&&(e=360);var t=$("#zcChat").outerHeight()-r.outerHeight()-f.outerHeight()-20;v.css({height:t}),s.css("min-width",k+360+2+"px"),o.css("width",e+"px");var i=f.find("li.barMenuActive").index(),a=l.find(".js-barInner").eq(i).find("iframe");a.css({height:t+Math.floor(10*Math.random()+1)}),setTimeout(function(){a.css({height:t})},3),d.css("width",e+"px"),$(".barInner2").css("height",c.height()+10+"px")},O=function(){A<L&&(A+=1),z(A)},R=function(){A>1&&(A-=1),z(A)},z=function(e){currentMarginLeft=-S*(e-1),f.stop(!0).animate({"margin-left":currentMarginLeft},500)},E=function(){setTimeout(function(){var e=f.css("marginLeft");"0px"===e?(p.addClass("noAbleLeftBtn").removeClass("hoverBtn"),m.removeClass("noAbleRightBtn").addClass("hoverBtn")):A===L?(m.addClass("noAbleRightBtn").removeClass("hoverBtn"),p.removeClass("noAbleLeftBtn").addClass("hoverBtn")):(p.removeClass("noAbleLeftBtn").addClass("hoverBtn"),m.removeClass("noAbleRightBtn").addClass("hoverBtn"))},600)},H=function(){$(this).addClass("barMenuActive").siblings().removeClass("barMenuActive"),$(".js-barInner").css("display","none");var e=$(this).attr("data-tab");$("#"+e).css("display","block"),B()},q=function(e){if(e.displayField||!e.serviceInfo||e.serviceInfo.displayField){if("object"!=typeof e.serviceInfo)return!1;e.displayField=e.displayField||e.serviceInfo.displayField,"string"==typeof e.displayField&&(e.displayField=e.displayField.split(",")||[]);var t=doT.template(w.cusCard)({data:e,languageText:F});$(".js-barCard").html(t),$(".js-barHeadImg").attr("src",e.aface||e.serviceInfo.face)}},W=function(){l=$(t),s=$(".js-mainBox"),n=$(".js-rightBar"),o=$(".js-chatPanelBody"),r=$(".js-header"),c=$(".js-chatPanel"),d=$(".js-footer"),u=$(".js-barMenuWidely"),f=$(".js-barMenu"),p=$(".js-prev"),m=$(".js-next"),g=$(".js-menuBtn"),v=$(".js-barMain"),h=$(".js-infoBarCompany"),y=$(".js-titleName"),j=$(".js-barRobotName"),T=$(".js-barAddress")},U=function(){$(a).on("resize",B),p.on("click",R),m.on("click",O),g.on("click",E),f.delegate("li","click",H),I.on("listMsg.artificial",q)},G=function(){x({type:"post",url:"/chat/user/querySideBar.action ",dataType:"json",data:{sysNum:i.sysNum,source:i.userInfo.source},success:function(e){if(1===i.apiConfig.sideBarStatus){k=i.apiConfig.sideBarWidth;for(var t=0;t<e.list.length;t++)1===e.list[t].menuStatus&&N.push(e.list[t]);M=N.length,W(),U(),_()}}})};G()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":32,"../../../common/util/load.js":33,"../../../common/util/monitAjax.js":34,"./template.js":45}],45:[function(e,t,i){var a={},s='<li id="{{=it.id||""}}" class="clearfix js-queueing"><div class="systemMsg"><div class="systemMsgText">{{=it.content}}</div></div></li>',n='<li id="" class="clearfix js-zhichipushEva zhichipushEva"><div class="systemMsg"><div class="systemMsgPushEva"><div class="pushEvaluate js-pushEvaluate"><p class="pushEvaTitle"><label class="aname" title="{{=it.aname}}">{{=it.subName}}</label>{{=it.languageText.T0093}}</p>{{if(it.config[0].isQuestionFlag){}}<div class="operateType"><p class="operateTypeTitle"><label class="aname" title="{{=it.aname}}">{{=it.subName}}</label>{{=it.languageText.T0106}}</p><div class="operateTypeBtn"><p class="solve solved js-solved defaultSolveActive"><span></span>{{=it.languageText.T0041}}</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0042}}</p></div></div>{{}}}<div id="pushStar"><ul><li class="js-toSideEvaluate"><a href="javascript:;">1</a></li><li class="js-toSideEvaluate"><a href="javascript:;">2</a></li><li class="js-toSideEvaluate"><a href="javascript:;">3</a></li><li class="js-toSideEvaluate"><a href="javascript:;">4</a></li><li class="js-commit"><a href="javascript:;">5</a></li></ul></div><p class="moregood js-moregood">{{=it.languageText.T0107}}</p></div></div></div></li>',o='<div class="systemMsg"><div class="systemMsgText">{{=it.content}}</div></div>',r='<li class="clearfix magBox leftMsg"><p class="leftName">{{=it.list.senderName}}</p><div class="msgDiv"><div class="msgText">{{=it.list.msg}}</div></div></li>',l='<li class="clearfix magBox leftMsg"><p class="leftName">{{=it.aname}}</p><div class="msgDiv"><div class="msgText">{{=it.content}}</div></div></li>',c='{{if(it.aname){ }}{{if(it.revokeFlag){}}<li class="clearfix magBox leftMsg"><div class="systemMsg"><div class="systemMsgText">您有一条消息被撤回</div></div></li>{{}else{}}<li class="clearfix magBox leftMsg" data-msg-id="{{=it.msgId}}" creattime="{{=it.t||""}}"><p class="leftName">{{=it.aname||""}}</p><div class="msgDiv {{if(it.from=="initHistory"){}}noneClick{{}}}"><div class="msgText">{{=it.msg||""}}</div>{{if(it.showEvaluate||it.showArtificial){ }}<div class="msgBottomArea js-msgBottomArea" showEvaluate="{{=it.showEvaluate||""}}">{{if(it.showArtificial&&!it.wurl){ }}<span class="js-chatSwitch js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></span>{{ } }}{{if(it.showArtificial&&it.wurl){ }}{{if(it.wurlOpenStyle){ }}<a href="{{=it.wurl}}" target="_blank" class="js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></a>{{ }else{ }}<a href="{{=it.wurl}}" target="_parent" class="js-moduleSwitch msgChatSwitch"><i>{{=it.languageText.T0141}}</i></a>{{ } }}{{ } }}{{if(it.showEvaluate&&it.showArtificial){ }}<span class="js-fengefu1 fengefu">|</span>{{ } }}{{if(it.showEvaluate){ }}<span docId="{{=it.docId||""}}" robotFlag="{{=it.robotFlag||""}}" question="{{=it.question||""}}" msgId="{{=it.msgId||""}}" status="1" title="有用" class="js-msgEvaluate msgEvaluateOk msgChatEvaluate"><i>有用</i></span><span title="有用" class="js-evaback js-okBack hide msgChatEvaluate"><i>有用</i></span><span class="fengefu">|</span><span docId="{{=it.docId||""}}" robotFlag="{{=it.robotFlag||""}}" question="{{=it.question||""}}" msgId="{{=it.msgId||""}}" status="-1" title="没用" class="js-msgEvaluate msgEvaluateNo msgChatEvaluate"><i>没用</i></span><span title="没用" class="js-evaback js-noBack hide msgChatEvaluate"><i>没用</i></span>{{ } }}</div></div>{{ } }}</li>{{if(it.dangerWarnFlag){}}<li class="clearfix magBox leftMsg"><div class="systemMsg"><div class="systemMsgText">{{=it.language.L10041||""}}</div></div></li>{{}}}{{ } }}{{ } }}',d='{{if(it.source&&it.source==="uploadImg"){}}<li class="clearfix imgMagBox magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv"><div id="msgStatus{{=it.dateuid||""}}" class="msgStatus js-msgStatus msgsending"></div><div class="msgText">{{=it.msg||""}}</div><div class="uploadImgLayer js-uploadImgLayer"><p id="imgCancel{{=it.dateuid||""}}" class="cancelUploadImg js-cancelUploadImg">取消上传</p></div></div></li>{{ }else if(it.source&&it.source==="uploadFile"){ }}<li class="clearfix fileMagBox magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv"><div class="msgText"><div class="msgFileIco js-msgFileIco {{=it.fileIcoClass}}"></div><div class="msgFileDetail js-msgFileDetail"><p class="filename" title="{{=it.filename}}">{{=it.filename}}</p><span class="fileSize js-fileSize">{{=it.filesize}}</span> <span class="sizeAfter js-sizeAfter">|</span> <div class="uploadFileProcess js-uploadFileProcess"><span class="processSpan js-processSpan"></span></div><span id="filecancel{{=it.dateuid}}" class="filecancel js-filecancel">取消</span><span class="filecanceled js-filecanceled">已取消</span><span class="filefail js-filefail">上传失败</span><a class="filedownload js-filedownload" target="_blank">下载</a></div></div></div></li>{{ }else{ }}<li class="clearfix magBox rightMsg" id="{{=it.dateuid||""}}" creattime="{{=it.t||""}}"><div class="msgDiv">{{if(it.from!=="initHistory"){}}<div id="msgStatus{{=it.dateuid||""}}" class="msgStatus js-msgStatus"></div>{{ } }}<div class="msgText">{{=it.msg||""}}</div></div></li>{{ } }}',u='<li id="cutoff" class="cutoff"><span class="cutleft"></span>{{=it.content}}<span class="cutright"></span></li>',f='<li class="clearfix sysData"><p class="msgData">{{=it}}</p></li>',p='<li class="clearfix magBox leftMsg js-SwitchAdminsMsg"><p class="leftName">{{=it.aname||""}}</p><div class="msgDiv"><div class="msgText">{{=it.tipsMessage||"您的消息涉及到重点业务，需要人工客服帮您解决，您可以选择以下技能组："}}<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;">{{=it.answer?it.answer:""}}</div><p>{{=it.stripe?it.stripe:""}}</p><ul class="sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}<li style="color:#4298ba"><a href="#0" class="js-keySwitchAdmin keySwitchAdmin" data-id="{{=it.list[i].groupId}}" keyword="{{=it.keyword}}" keywordId="{{=it.keywordId}}">{{=it.list[i].groupName}}</a></li>{{ } }}</ul></div></div></div></div></li>',m='<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;">{{=it.answer?it.answer:""}}</div><p>{{=it.stripe?it.stripe:""}}</p><ul class="sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}</ul></div></div>',g='<div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><p style="{{=it.stripe?"margin-bottom:10px":""}}">{{=it.answerStrip?it.answerStrip:""}}</p><div>{{=it.answer?it.answer:""}}</div><div>{{=it.stripe?it.stripe:""}}</div><ul class="sugguestions">{{for(var i=0,lan=it.list ||[] ;i<lan.length;i++){ }}{{if(it.isHistory){ }}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba">{{=it.list[i]}}</a></li>{{}else{}}<li style="color:#4298ba">{{=i+1}}. <a href="#0" data-num="{{=i+1}}" class="js-answerBtn" style="color:#4298ba" data-docid="{{=it.list[i]["docId"]}}">{{=it.list[i]["question"]}}</a></li>{{}}}{{ } }}</ul></div></div>',v='{{for(var i=0;i<it.length;i++){ }}{{if(i==0){ }}<li data-tab="{{=it[i].sidebarId}}" class="barMenuActive"><span title="{{=it[i].menuName}}">{{=it[i].menuName}}</span></li>{{}else{}}<li data-tab="{{=it[i].sidebarId}}"><span title="{{=it[i].menuName}}">{{=it[i].menuName}}</span></li>{{}}}{{}}}',h='{{var list = it.list;}}{{for(var i=0;i<list.length;i++){ }}{{if(list[i].menuType===0){ }}<div id="{{=list[i].sidebarId}}" class="barInner js-barInner js-barCard"><div class="barInfo"><img class="headimage js-barHeadImg"/><p class="headname js-barRobotName"></p></div><div class="barInformation js-barInformation"><dl><dt>{{=it.languageText.T0061}}</dt><dd class="js-barAddress"></dd></dl></div></div>{{}else if(list[i].menuType===1){}}<div id="{{=list[i].sidebarId}}" class="js-barInner js-barInner2 barInner barInner2 js-customInner"><p>{{=list[i].customContent||""}}</p></div>{{}else{}}<div id="{{=list[i].sidebarId}}" class="js-barInner barInner"><iframe name="barIfm" id="barIfm" src="{{=list[i].menuUrl||""}}" scrolling="yes" frameborder="0"></iframe></div>{{}}}{{}}}',y='{{var list = it.data;}}<div class="barInfo">{{if(list.displayField[0]==="1"){ }}<img class="headimage js-barHeadImg"/>{{}}}{{if(list.displayField[2]==="1"){ }}<p class="headname js-barCusName"">{{=list.serviceInfo.nickName||"-"}}</p>{{}}}</div><div class="barInformation">{{if(list.displayField[4]==="1"){ }}<div id="{{=list.displayField[4]}}" class="inforLi"><label>{{=it.languageText.T0063}}</label><span>{{=list.serviceInfo.serviceNo||"-"}}</span></div>{{}}}{{if(list.displayField[6]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0064}}</label><span>{{=list.serviceInfo.name||"-"}}</span></div>{{}}}{{if(list.displayField[8]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0067}}</label><span>{{=list.serviceInfo.phone||"-"}}</span></div>{{}}}{{if(list.displayField[1]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0066}}</label><span>{{=list.serviceInfo.tel||"-"}}</span></div>{{}}}{{if(list.displayField[3]==="1"){ }}<div class="inforLi"><label>{{=it.languageText.T0062}}</label><span>{{=list.serviceInfo.email||"-"}}</span></div>{{}}}{{if(list.displayField[5]==="1"){ }}<div class="inforLi"><label>Q Q：</label><span>{{=list.serviceInfo.qq||"-"}}</span></div>{{}}}{{if(list.displayField[7]==="1"){ }}<dl><dt>{{=it.languageText.T0065}}</dt><dd>{{=list.serviceInfo.remark||"-"}}</dd></dl>{{}}}</div>',j='<div class="js-closeWindow"><div class="closeLayer js-closeLayer"></div><div class="closeEvaluate js-closeEvaluate"><span class="closeEvaBtn js-closeEvaBtn"></span><p class="closeEvaTitle">{{=it.languageText.T0096}}</p><div id="closeStar"><ul><li><a href="javascript:;">1</a></li><li><a href="javascript:;">2</a></li><li><a href="javascript:;">3</a></li><li><a href="javascript:;">4</a></li><li><a href="javascript:;">5</a></li></ul></div><div class="btnGroup"><span class="js-toSideEvaluate toSideEvaluate" style="display:none">{{=it.languageText.T0094}}</span><span class="js-commit commit" style="display:none">{{=it.languageText.T0095}}</span></div></div></div>',T='<div class="js-closeWindow"><div class="closeLayer js-closeLayer"></div><div class="closeEvaluate js-closeEvaluate"><span class="closeEvaBtn js-closeEvaBtn"></span><p class="closeEvaTitle">{{=it.languageText.T0098}}</p><div class="robotChose"><span class="js-isques js-robotResult evaluateok" resultFlag="true"><i></i>{{=it.languageText.T0041}}</span><span class="js-noques js-robotResult evaluateno" resultFlag="false"><i></i>{{=it.languageText.T0042}}</span></div><div class="btnGroup"><span class="js-toSideEvaluate toSideEvaluate" style="display:none">{{=it.languageText.T0094}}</span><span class="js-commit commit" style="display:none">{{=it.languageText.T0095}}</span></div></div></div>',b='<div class="js-evamsg evamsg"><p>{{=it.language.L10037}}</p></div>',I='<div class="js-evamsg evamsg" style="color:#cb1f16"><p>{{=it.language.L10038}}</p></div>',w='{{if(it.style){ }}<a class="noticeMsg js-noticeMsg" target="_blank"><span class="noticeVoice"></span><div class="noticeInner js-noticeInner"></div><span class="openUrl js-openUrl"></span> </a>{{}else{}}<li class="noticeMsg js-noticeMsg"><span class="noticeVoice"></span><div class="noticeInner js-noticeInner"></div><span class="openNotice js-openNotice openActive">{{=it.languageText.T0068}}</span> </li>{{}}}',x='<div class="sessionTmp0 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}" >{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p>{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<p>{{=it.multiDiaRespInfo.answer||""}}</p>{{if(it.multiDiaRespInfo.interfaceRetList){}}<div class="interfaceRetListArea"><ul class="js-interfaceRetList{{=it.multiDiaRespInfo.conversationId||""}}">{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}<li class="tmp0InnerList js-tmpInnerList" {{if(i==it.multiDiaRespInfo.interfaceRetList.length-1){}} style="border-bottom: 1px solid #d6dbe5"{{}}}conversationId="{{=it.multiDiaRespInfo.conversationId}}" level="{{=it.multiDiaRespInfo.level}}" data-index="{{=i}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}<a class="viewImg" href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}">{{}else{}}<span style="display:inline-block"></span>{{}}}</a>{{}else{}}<div class="viewImg">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}">{{}else{}}<span style="display:inline-block"></span>{{}}}</div>{{}}}<div class="innerRight"><div class="rightTop">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}<a class="title" href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{=it.multiDiaRespInfo.interfaceRetList[i].title||""}}</a>{{}else{}}<p class="title">{{=it.multiDiaRespInfo.interfaceRetList[i].title||""}}</a>{{}}}</div><div class="rightMid"><p class="mark1">{{=it.multiDiaRespInfo.interfaceRetList[i].summary||""}}</p></div><div class="rightBottom"><p class="mark2">{{=it.multiDiaRespInfo.interfaceRetList[i].label||""}}</p><p class="mark4">{{=it.multiDiaRespInfo.interfaceRetList[i].tag||""}}</p></div></div><div style="clear:both"></div></li>{{}}}</ul></div>{{if(it.multiDiaRespInfo.interfaceRetList.length>3){}}{{if(it.from!="history"){}}<div class="tranMultiGroup js-tranMultiGroup" conversationId="{{=it.multiDiaRespInfo.conversationId||""}}" page="1"><span>换一组</span><i></i></div>{{}}}{{}}}{{}else{}}{{if(it.multiDiaRespInfo.endFlag){}}<p>{{=it.multiDiaRespInfo.answerStrip}}</p>{{}else{}}{{if(it.multiDiaRespInfo.endFlag&&it.from!="history"){}}<p>{{=it.multiDiaRespInfo.remindQuestion}}</p>{{}}}{{}}}{{}}}<div style="clear:both"></div> </div>',F='<div class="sessionTmp1 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList js-tmp1List">{{if(it.multiDiaRespInfo.interfaceRetList){}}{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}{{if(i<9){}}<li class="innerEle" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}else{}}<li class="innerEle multiHide" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}}}<a href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</a></li>{{}else{}}{{if(i<9){}}<li class="innerEle js-tmpInnerList" conversationId="{{=it.multiDiaRespInfo.conversationId}}" data-index="{{=i}}" level="{{=it.multiDiaRespInfo.level}}" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}else{}}<li class="innerEle js-tmpInnerList multiHide" conversationId="{{=it.multiDiaRespInfo.conversationId}}" data-index="{{=i}}" level="{{=it.multiDiaRespInfo.level}}" title="{{=it.multiDiaRespInfo.interfaceRetList[i].title}}">{{}}}{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</li>{{}}}{{}}}{{}}} </ul>{{if(it.multiDiaRespInfo.interfaceRetList.length>9){}}{{if(it.from!="history"){}}<div class="multiMore js-tmp1MultiMore" page="1"><span>展开更多</span><i></i></div>{{}}}{{}}}<div style="clear:both"></div> </div>',k='<div class="sessionTmp2 js-tmp{{=it.multiDiaRespInfo.conversationId}}">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}{{if(it.multiDiaRespInfo.interfaceRetList){}}<ul class="js-tmp2List">{{for(var i=0;i<it.multiDiaRespInfo.interfaceRetList.length;i++){}}{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[i].anchor){}}{{if(i>2){}}<li class="multiHide">{{}else{}}<li>{{}}}<a href="{{=it.multiDiaRespInfo.interfaceRetList[i].anchor}}" target="_blank"><div class="tmp2InnerList" {{if(i==0){}}style="border-top: 1px solid #d6dbe5"{{}}}>{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}"><div class="innerTop">{{}else{}}<div class="innerTop" style="width:97%">{{}}}<p class="title">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</p><p class="tag">{{=it.multiDiaRespInfo.interfaceRetList[i].tag}}</p></div><div class="innerBottom"><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[i].summary}}</p> </div><div style="clear:both"></div></div></a></li>{{}else{}}{{if(i>2){}}<li class="multiHide">{{}else{}}<li>{{}}}<div class="tmp2InnerList js-tmpInnerList" {{if(i==0){}}style="border-top: 1px solid #d6dbe5"{{}}} conversationId="{{=it.multiDiaRespInfo.conversationId}}" level="{{=it.multiDiaRespInfo.level}}"  data-index="{{=i}}">{{if(it.multiDiaRespInfo.interfaceRetList[i].thumbnail){}}<img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[i].thumbnail}}"><div class="innerTop">{{}else{}}<div class="innerTop" style="width:97%">{{}}}<p class="title">{{=it.multiDiaRespInfo.interfaceRetList[i].title}}</p><p class="tag">{{=it.multiDiaRespInfo.interfaceRetList[i].tag}}</p></div><div class="innerBottom"><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[i].summary}}</p> </div><div style="clear:both"></div></div></li>{{}}}{{}}}</ul>{{if(it.multiDiaRespInfo.interfaceRetList.length>3){}}{{if(it.from!="history"){}}<div class="multiMore js-tmp2MultiMore" page="1"><span>展开更多</span><i></i></div>{{}}}{{}}}{{}}} </div>',C='<div class="sessionTmp3 js-tmpInnerList2 js-tmp{{=it.multiDiaRespInfo.conversationId||""}}" level="{{=it.multiDiaRespInfo.level}}"><div class="viewParent"><img class="viewImg" noJump="true" src="{{=it.multiDiaRespInfo.interfaceRetList[0].thumbnail}}"><div class="inner"><p class="title">{{=it.multiDiaRespInfo.interfaceRetList[0].title}}</p><p class="summary">{{=it.multiDiaRespInfo.interfaceRetList[0].summary}}</p>{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.interfaceRetList[0].anchor){}}<a class="more" target="_blank" href="{{=it.multiDiaRespInfo.interfaceRetList[0].anchor}}">查看详情 ></a> </div>{{}else{}}<p class="more">查看详情 ></p>{{}}}<div style="clear:both"></div></div> </div>',$='<div class="sessionTmp4><p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p><div class="inner"><p class="title">{{=it.multiDiaRespInfo.interfaceRetList[0].title}}</p> </div><div style="clear:both"></div> </div>',L='<div class="sessionTmp1">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList">{{for(var i=0;i<it.contentAry.length;i++){}}<li class="innerEle js-inputContent js-tmp{{=it.multiDiaRespInfo.conversationId}}" conversationId="{{=it.multiDiaRespInfo.conversationId}}" title="{{=it.contentAry[i]}}" outPutParamList="{{=it.multiDiaRespInfo.outPutParamList}}" level="{{=it.multiDiaRespInfo.level}}">{{=it.contentAry[i]}}</li>{{}}} </ul><div style="clear:both"></div> </div>',A='{{if(it.multiDiaRespInfo.retCode=="000000"){}}<div class="sessionTmp1511">{{if(it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.answerStrip){}}<p class="beginLan">{{=it.multiDiaRespInfo.answerStrip||""}}</p>{{}else if(!it.multiDiaRespInfo.endFlag&&it.multiDiaRespInfo.remindQuestion){}}<p class="beginLan">{{=it.multiDiaRespInfo.remindQuestion||""}}</p>{{}}}<ul class="tmp1InnerList">{{for(var i=0;i<it.contentAry.length;i++){}}<li class="innerEle js-inputContent_1511 js-tmp{{=it.multiDiaRespInfo.conversationId}}" conversationId="{{=it.multiDiaRespInfo.conversationId}}" title="{{=it.titleAry[i]}}" content="{{=it.contentAry[i]}}" level="{{=it.multiDiaRespInfo.level}}">• {{=it.titleAry[i]}}：{{=it.contentAry[i]}}</li>{{}}} </ul><div style="clear:both"></div> </div>{{}else{}}<div class="sessionTmp1511"><p>{{=it.multiDiaRespInfo.retErrorMsg||""}}</p><div style="clear:both"></div> </div>{{}}}',M='<div class="cyclicSessionError"><span class="icn"></span><p class="errorP">{{=it.multiDiaRespInfo.retErrorMsg}}</p></div>',S='<div class="sessionTmp1"><p class="beginLan" style="margin-bottom:0px">{{=it.multiDiaRespInfo.answer||"说的什么玩意儿"}}</p><div style="clear:both"></div> </div>',P='<li class="clearfix magBox leftMsg" creattime=""><p class="leftName">{{=it.robotData.robotName}}</p><div class="msgDiv"><div class="msgText"><div class="msgwrap leftMsg"><div class="msgOuter js-msgOuter"><div style="margin-bottom:10px;"><p>{{=it.multiGuideData.guide}}</p></div><p></p><ul class="multiGuide">{{for(var i=0;i<it.multiGuideData.msg.length;i++){}}{{if(i<6){}}<li class="guideEle"><a href="#0" data-num="{{=it.multiGuideData.msg[i].question}}" class="js-multiAnswerBtn multiAnswerBtn" data-docid="{{=it.multiGuideData.msg[i].id}}">{{=it.multiGuideData.msg[i].title}}</a><i></i></li>{{}}}{{}}}</ul></div></div></div></div><div class="msgBottomArea"></div></li>',D='<div class="systemMsg"><div class="systemMsgText">{{=it.tips}}</div></div>';
a.systemMsg=s,a.systemqueue=o,a.sayHello=r,a.transferSayHello=l,a.leftMsg=c,a.rightMsg=d,a.cutoffMsg=u,a.msgDate=f,a.listSugguestionsMsg=m,a.multiListSugguestionsMsg=g,a.sideBarMenu=v,a.barMain=h,a.cusCard=y,a.closeFormHumanEvaluate=j,a.closeFormRobotEvaluate=T,a.evamsgHtml=b,a.evamsgHtml2=I,a.noticeHtml=w,a.pushEvaMsg=n,a.cyclicSessionTMP0=x,a.cyclicSessionTMP1=F,a.cyclicSessionTMP2=k,a.cyclicSessionTMP3=C,a.cyclicSessionTMP4=$,a.inputContentTMP=L,a.inputContentTMP_1511=A,a.cyclicSession_1522=S,a.cyclicSessionError=M,a.multiGuideHtml=P,a.recallMsg=D,a.keySwitchAdmins=p,t.exports=a},{}],46:[function(e,t,i){var a=function(t){var i=(e("../../../common/util/listener.js"),""),a=function(){i=t.userInfo.color?t.userInfo.color:t.apiConfig.color,$header.css("background",i);var e=".rightMsg .msgDiv::before{border-color:transparent "+i+"}.rightMsg .msgDiv{background: "+i+"}";try{var a=document.getElementById("setStyle");a.appendChild(document.createTextNode(e))}catch(s){a.styleSheet.cssText=e}},s=function(){},n=function(){$header=$(".js-header"),$zhichiVoice=$(".js-zhichiVoice"),$infoBarLogo=$(".infoBarLogo"),$item=$(".js-item")},o=function(){a()},r=function(){n(),o(),s()};r()};t.exports=a},{"../../../common/util/listener.js":32}],47:[function(e,t,i){var a=function(){var t,i=e("../../../common/util/listener.js"),a=e("../../../common/comm.js"),s=e("../listMsg/sideBar.js"),n=a.getQueryParam(),o="",r="",l=function(){"iframe"===n.from?($(".js-mainBox").css({display:"block",height:"100%",width:"100%","max-height":"100%","max-width":"100%","min-height":"430px","min-width":"360px",top:"0px",bottom:"0px",left:"0px","margin-top":"0","margin-left":"0"}),$zhichiMin.css("display","none"),$zhichiMax.css("display","inline-block")):($(".js-mainBox").css({display:"block",height:"90%",width:"70%","max-height":"720px","max-width":"640px",top:"50%",left:"50%","margin-left":"-240px","margin-top":"-320px","min-height":"430px","min-width":"360px"}),$zhichiMin.css("display","none"),$zhichiMax.css("display","none"))},c=function(){l(),$(".js-evaluate").find(".block-text").html("")},d=function(){var e=$(window).height(),t=$(window).width(),i=$(".js-mainBox").width(),a=$(".js-mainBox").height();"iframe"!=n.from&&$(".js-mainBox").css({top:(e-a)/2,left:(t-i)/2,"margin-top":"0","margin-left":"0"})},u=function(){var e=window.location.href,t=[],i=[];for(var a in n)"uid"!==a&&"cid"!==a&&"from"!==a&&"unit"!==a&&(t.push(a),i.push(n[a]));e=e.substring(0,e.lastIndexOf("?")+1);for(var s=0;s<t.length;s++)e+=t[s]+"="+i[s]+"&";e=e.substring(0,e.length-1),$zhichiMax.attr("href",e)},f=function(){$zhichiMin=$(".js-zhichiMin"),$zhichiMax=$(".js-zhichiMax"),i.on("core.onload",function(e){t=e[0],o=t.language.lan,r=t.language.text,"iframe"!==n.from&&1===t.apiConfig.sideBarStatus&&(s($(".js-rightBar")[0],t,window),$(".js-mainBox").css({"max-width":t.apiConfig.sideBarWidth+640+"px"})),d()})},p=function(){$(window).resize(function(){d()}),u(),$zhichiMax.on("click",function(){window.parent!==window&&window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*")})},m=function(){f(),p(),c()};m()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":32,"../listMsg/sideBar.js":44}],48:[function(e,t,i){var a={orderClassify:"/ws/queryTicketTypeInfoList/4"},s={},n="orderClassify",o=function(t,i){var o=(e("../../../common/util/monitAjax.js")(i),e("../../../common/util/listener.js")),r=e("./template.js"),l=!1,c=t,d=!1,u=1,f="",p=function(e){e.stopPropagation(),o.trigger("sendArea.closeAlldropMenu"),l?(c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),$(this).find(".classIfyTitleIcn").css("background-position","-3279px 13px"),l=!1):(d||m(),c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),$(this).find(".classIfyTitleIcn").css("background-position","-3320px 13px"),l=!0)},m=function(){var e={},t=JSON.stringify(e),s={uid:i.apiInit.uid,url:a[n],method:"get",param:t};$.ajax({url:"/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:s}).success(function(e){var t={items:e.items};g(t.items),f=doT.template(r.classifyOrderList)(t),c.find(".js-classifyOrderMenu").html(f),d=!0})},g=function(e){if(e)for(var t=0;t<e.length;t++)e[t].items&&e[t].items.length>0&&(s[e[t].typeId]=e[t].items,g(s[e[t].typeId]))},v=function(){var e=$(this).attr("dataId")||"",t=$(this).attr("data-nodeFlag")||"",i=$(this).attr("title")||"",a=s[e];if("1"===t&&e&&a.length&&u<5){u++;var n={items:a},o=doT.template(r.classifyOrderList)(n);c.find(".js-classifyOrderMenu").html(o),c.find(".js-routerDeep").addClass("active"),c.find(".js-classRouter").append("<span class='routerDeep js-routerDeep' dataDeep='"+u+"' dataId='"+e+"' data-nodeFlag='"+t+"' title='"+i+"'><i style='color:#0DAEAF'>/ </i>"+i+"</span>"),h(u);try{var l=document.getElementById("classDropdownMenu");l.scrollTop=0}catch(d){return"滚动至底部失败"}}},h=function(e){for(var t=1;t<6;t++)c.find(".js-routerDeep").removeClass("routerNum"+t).addClass("routerNum"+e)},y=function(){var e=$(this).attr("dataId")||"",t=$(this).attr("dataDeep")||"",i=s[e];u=t;for(var a=$(this).parent().find(".js-routerDeep"),n=a.length,o=0;o<n-t;o++)$(a[n-o-1]).remove();if($(this).removeClass("active"),e){if(i.length){var l={items:i},d=doT.template(r.classifyOrderList)(l);c.find(".js-classifyOrderMenu").html(d)}}else c.find(".js-classifyOrderMenu").html(f);h(t)},j=function(e){e.stopPropagation();var t=$(this).attr("data-key")||"",i=$(this).attr("data-nodeFlag")||"";if("1"!==i){var a=$(this).parents(".js-questionClassify");a.find(".js-classDropdown-title").html($(this).html());var s=$(this).attr("dataId")||"",n=$(this).attr("dataName")||"",r={key:t,dataId:s,dataName:n};o.trigger("sendArea.definedFieldResult",r),c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),c.find(".classIfyTitleIcn").css("background-position","-3279px 13px"),l=!1}},T=function(){l=!1,c.find(".js-classDropdownAreaFixed").removeClass("openActive"),c.find(".js-classDropdown-btn").removeClass("checkActive"),c.find(".classIfyTitleIcn").css("background-position","-3279px 13px")},b=function(e){e.stopPropagation()},I=function(){},w=function(){c.delegate(".js-classDropdown-btn","click",p),c.delegate(".js-classDropdownLi","click",j),c.delegate(".js-classOrderList","click",v),c.delegate(".js-routerDeep","click",y),c.delegate(".js-classDropdownAreaFixed","click",b),c.delegate(".js-leaveMsgBody","click",T)},x=function(){},F=function(){x(),I(),w()};F()};t.exports=o},{"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"./template.js":56}],49:[function(e,t,i){function a(t,i,a,s){var n,o=e("./template.js"),r=e("../../../common/util/listener.js"),l=e("../../../common/util/msgReminder.js"),c=e("../util/showTip.js"),d=e("../../../common/util/monitAjax.js")(i),u=(i.language.lan,i.language.text),f=i.userInfo.color?i.userInfo.color:i.apiConfig.color,p=0,m="",g="",v=!1,h=!1,y=0===a.commentType?a.commentType:1,j=1,T="",b={};l.clear();var I=function(){var e=doT.template(o.AlertTemplate)(),t=i.apiConfig.robotName.length>8?i.apiConfig.robotName.substr(0,8)+"...":i.apiConfig.robotName,s=doT.template(o.sobotEvaluateOne_selfHtml)({evaluateTitle:u.T0021,okText:u.T0041,cancelText:u.T0042,robotName:i.apiConfig.robotName,subName:t});n=$(e),$(".js-mainBox").append(n),A(),n.find(".model-body").html(s),k(a.from),n.find(".js-submitTheme").css("background",f),D()},w=function(){$(this).addClass("noactive"),$(this).css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-isques").removeClass("okactive"),n.find(".js-isques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),h=!0,p=0;var e=i.apiConfig.robotCommentTitle.split(","),t=doT.template(o.sobotEvaluateTwo_selfHtml)({list:e,languageText:u});n.find(".model-body-extend").html(t),D()},x=function(){var e=doT.template(o.AlertTemplate)();n=$(e),$(".js-mainBox").append(n),A();var t=s.length>4?s.substr(0,4)+"...":s,i=doT.template(o.humanOne_selfHtml)({config:b,languageText:u,aname:s,subName:t});if(n.find(".model-body").html(i),$aLi=$("#star li"),"push"==a.from){p=a.score;var r=a.solveActive;L(p),k(a.from),n.find(".js-evaluateTip").html(b[4].scoreExplain),F(p),0==r?n.find(".js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}):1==r?n.find(".js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}):2==r&&n.find(".js-unSolved").addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-submitTheme").css("background",f)}else p=5,L(p),h=!0,k(a.from),n.find(".js-evaluateTip").html(b[4].scoreExplain),n.find(".js-solved").addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-submitTheme").css("background",f);for(var l=0,c=1;c<=$aLi.length;c++)$aLi[c-1].index=c,$($aLi[c-1]).bind("click",function(){switch(l=this.index,L(l),h=!0,l){case 1:case 2:p=l,F(l),k(a.from),D(),n.find(".js-submitTheme").css("background",f);break;case 3:case 4:p=l,F(l),k(a.from),n.find(".js-submitTheme").css("background",f),D();break;case 5:p=5,n.find(".model-body-extend").html(""),n.find(".js-submitTheme").css("background",f),n.find(".js-evaluateTip").html(b[l-1].scoreExplain),"close"==a.from&&C(),D()}});D()},F=function(e){h=!0,conf=b[e-1];var t=[],i=conf.scoreExplain;conf.labelName&&(t=conf.labelName.split(","));for(var a=0;a<t.length;a++)""==t[a]&&t.splice(a,1);var s=doT.template(o.humanTwo_selfHtml)({list:t,conf:conf,languageText:u});n.find(".model-body-extend").html(s),n.find(".js-evaluateTip").html(i),D()},k=function(e){var t=doT.template(o.evaluateFooter_selfHtml)({from:e,languageText:u});n.find(".model-body-commit").html(t)},C=function(){if("push"==a.from&&(h=!0),0==v&&h){v=!0;var e=[],s=n.find(".js-tag").length;if(n.find(".js-tag").each(function(){var t=$(this).html();$(this).hasClass("active")&&e.push(t)}),t&&0==e.length&&b[p-1].isTagMust&&5!=p&&s>0)return c.show(u.T0104),void setTimeout(function(){v=!1},3e3);if(m=e.join(","),g=n.find(".js-evaluateInner").val()||"",/^\s+$/g.test(g)&&(g=""),t&&""==g&&b[p-1].isInputMust&&5!=p)return c.show(u.T0105),void setTimeout(function(){v=!1},3e3);j=1==t?1==b[0].isQuestionFlag?n.find(".js-solved").hasClass("solveActive")?1:0:-1:n.find(".js-isques").hasClass("okactive")?1:0,0==t&&(T=i.apiConfig.robotFlag||""),d({type:"post",url:"/chat/user/comment.action",dataType:"json",data:{cid:i.apiInit.cid,visitorId:i.apiInit.uid,score:p,solved:j,tag:m,robotFlag:T,remark:g,type:t,commentType:y},success:function(e){if(1===e.status){var t={score:p,solved:j};if(r.trigger("sendArea.toPushEav",t),M(),"push"==a.from)r.trigger("listMsg.closePushEva");else{var i={type:"system",status:"evaluate",data:{content:u.T0025}};r.trigger("sendArea.sendAreaSystemMsg",i)}c.show(u.T0032),a&&a.resultFlag&&(window.parent!==window?window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"):(window.close(),window.location.href="about:blank"))}else c.show(u.T0033)},error:function(){c.show(u.T0033)}}),setTimeout(function(){v=!1},3e3)}},L=function(e){for(var t=0;t<$aLi.length;t++)$aLi[t].className=t<e?"on":""},A=function(){n.find(".js-evaluatelayer").css("display","block"),n.find(".js-evaluateDialog").css("display","block")},M=function(){n.find(".js-evaluatelayer").css("display","none"),n.find(".js-evaluateDialog").css("display","none"),setTimeout(function(){$(".js-evaluateArea").remove()},500)},S=function(){Alert.show()},P=function(){n.find(".js-noques").on("click",w),n.find(".js-isques").on("click",function(){h=!0,p=5,n.find(".js-submitTheme").css("background",f),$(this).addClass("okactive"),$(this).css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-noques").removeClass("noactive"),n.find(".js-noques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),n.find(".model-body-extend").html(""),D()})},D=function(){var e=$(".js-mainBox").width(),t=$(".js-mainBox").height(),i=n.find(".js-evaluateDialog").height();t>i?n.find(".js-evaluateDialog").css({left:(e-360)/2+"px",top:(t-i)/2+"px"}):(n.find(".js-evaluateDialog").css({left:(e-360)/2+"px",top:"0px","overflow-y":"scroll"}),n.find(".js-evaluateDialog").height(t+"px"))},N=function(){h=!0,n.find(".js-isques").addClass("okactive"),n.find(".js-isques").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-noques").removeClass("noactive"),n.find(".js-noques").css({background:"#fff",border:"1px solid #ddd",color:"#8a9699"}),n.find(".model-body-extend").html(""),p=5},_=function(){},B=function(){n.undelegate(),n.delegate(".js-tag","click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).css({background:"#fff",color:"#8a9699",border:"1px solid #e0e9e8"})):($(this).addClass("active"),$(this).css({background:f,color:"#fff",border:"1px solid "+f}))}),n.delegate(".js-evaluateSubmit","click",C),n.delegate(".js-evaluateClose","click",function(){M(),r.trigger("sendArea.reTopushEav")}),n.delegate(".js-evaluatelayer","click",function(){M(),r.trigger("sendArea.reTopushEav"),setTimeout(function(){$(".js-evaluateArea").remove()},500)}),n.delegate(".js-solved","click",function(){$(this).hasClass("solveActive")||($(this).addClass("solveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-unSolved").removeClass("unsolveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".js-unSolved","click",function(){$(this).hasClass("unsolveActive")||($(this).addClass("unsolveActive").css({background:f,border:"1px solid "+f,color:"#fff"}),n.find(".js-solved").removeClass("solveActive").css({background:"#fff",border:"1px solid #d6dbe5",color:"#8b98ad"}))}),n.delegate(".js-noevaluateSubmit","click",function(){a&&a.resultFlag&&(M(),window.parent!==window?window.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"):(window.close(),window.location.href="about:blank"))})},O=function(){$evaluate=$(".js-evaluate")},R=function(e){O(),0===t?(I(),P(),N()):(x(),_()),B(),c=c(i),"push"==a.from},z=function(){d({type:"get",url:"/chat/user/satisfactionMessage.action",dataType:"json",data:{uid:i.apiInit.uid},success:function(e){1===e.status&&(b=e.data,R())},error:function(){c.show("请检查网络链接"),setTimeout(function(){$(".js-evamsg").remove()},3e3)}})};z(),this.modeAlert=S}t.exports=a},{"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"../../../common/util/msgReminder.js":35,"../util/showTip.js":70,"./template.js":56}],50:[function(e,t,i){t.exports={".bmp":"image",".jpg":"image",".JPG":"image",".jpeg":"image",".JPEG":"image",".png":"image",".PNG":"image",".gif":"image",".GIF":"image",".txt":"txt",".TXT":"txt",".DOC":"doc",".doc":"doc",".docx":"doc",".DOCX":"doc",".pdf":"pdf",".PDF":"pdf",".ppt":"ppt",".PPT":"ppt",".PPTX":"ppt",".pptx":"ppt",".xls":"xls",".XLS":"xls",".xlsx":"xls",".XLSX":"xls",".RAR":"rar",".rar":"rar",".ZIP":"rar",".zip":"rar",".swj":"swj",".eml":"eml",".msb":"msb",".ssu":"ssu",".SSU":"SSU",".mp3":"player",".MP3":"player",".mp4":"player",".MP4":"player",".wma":"player",".WMA":"player",".WMV":"player",".wmv":"player",".rmvb":"player",".RMVB":"player"}},{}],51:[function(e,t,i){t.exports={txt:"//img.sobot.com/yun/attachment/fileTypeImages/icon_txt.gif",doc:"//img.sobot.com/yun/attachment/fileTypeImages/icon_doc.gif",pdf:"//img.sobot.com/yun/attachment/fileTypeImages/icon_pdf.gif",ppt:"//img.sobot.com/yun/attachment/fileTypeImages/icon_ppt.gif",xls:"//img.sobot.com/yun/attachment/fileTypeImages/icon_xls.gif",rar:"//img.sobot.com/yun/attachment/fileTypeImages/icon_rar.gif",player:"//img.sobot.com/yun/attachment/fileTypeImages/icon_mp3.gif"}},{}],52:[function(e,t,i){var a=function(t,i,a){var s,n,o,r,l,c,d,n,u,f,p,m,g,v,h,y,j,T,b,I,w,x,F,k,C,L,A,M,S,P,D,N,_,B,O=e("../../../common/util/listener.js"),R=e("../../../common/mode/currentState.js"),z=e("../util/qqFace.js"),E=e("./uploadImg.js"),H=e("./leaveMessage.js"),q=e("./evaluate.js"),W=e("./template.js"),U=e("../util/modal/dialog.js"),G=e("./switchRobot.js"),Z={},V=e("../../../common/comm.js"),J=!1,Q=!1,K=0,X="",Y=function(){var e=y.val();if(0==e.length||/^\s+$/g.test(e))return y.val(""),!1;var t=l+ +new Date,i=$("<div></div>").text(e),a=i.html();clearTimeout(n),O.trigger("sendArea.send",[{answer:a,uid:l,cid:c,dateuid:t,date:+new Date,currentStatus:d}]),y.val(""),$inputPlaceholder.css("display","block"),ie(),clearTimeout(n),setTimeout(function(){ae()},1e3)},ee=function(){var e="iframe"==r.urlParams.from,t=e?320:360,i=new U({title:"截图插件下载",footer:!1,width:t});i.setInner(W.captureDialogTemplate),i.show(),e&&$(".capture-outer").css({width:t})},te=function(){clearInterval(n),n=setTimeout(function(){var e=y.val();s({type:"post",url:"/chat/user/input.action",dataType:"json",data:{cid:c,uid:l,content:e}})},200)},ie=function(){var e=y.val(),t=e.length,i=$("<div></div>").text($(".js-inputMsg").val());if(N.html(i.html()),setTimeout(function(){var e=N.height();e<160?$(".js-inputMsg").css({height:e}):$(".js-inputMsg").css({height:e,"overflow-y":"scroll"})},5),K&&te(),t>0?h.css("background",p):h.css("background","#e0e9e8"),r.apiConfig.support&&"robot"===d){if(0==e.length||/^\s+$/g.test(e))return ae(),!1;clearInterval(o),o=setTimeout(function(){s({type:"post",url:"/chat-web/user/robotGuess.action",dataType:"json",data:{uid:l,question:e,robotFlag:r.urlParams.robotFlag||r.apiConfig.robotFlag||""},success:function(e){if(1==e.status){ae();var t={respInfoList:e.respInfoList};if(e.respInfoList.length>0){respInfoListTemp=doT.template(W.respInfoList)(t),x.append(respInfoListTemp);var i=x.find(".js-respInfoList").height(),a=20;x.find(".js-respInfoList").css({top:-+(i+a)+"px"})}else ae()}}})},500)}},ae=function(){x.find(".js-respInfoList").remove()},se=function(e){if(13==e.keyCode)return Y(),!1},ne=function(e){d=e,"human"===d?(K=1,A.show(),L.show(),C.show(),I.show(),w.show(),ae()):"robot"===d&&(K=0,A.hide(),L.hide(),C.hide(),I.show(),w.show())},oe=function(){0==Q&&(Q=!0,O.trigger("sendArea.artificial"),setTimeout(function(){Q=!1},2e3))},re=function(e){"transfer"!==e.status&&"hide"!==e.action||(y.css("display","block"),y.html()&&$inputPlaceholder.css("display","block"),N.html("").css("visibility","hidden"),$inputPlaceholder.html(r.apiConfig.customDoc))},le=function(e){"transfer"!==e.status&&"hide"!==e.action||O.trigger("sendArea.hideMsgBotBtn"),"blacklist"===e.status&&O.trigger("sendArea.robotOverTimeHandler")},ce=function(){Z.hide()},de=function(){setTimeout(function(){Q=!1,j.trigger("click")},10)},ue=function(e){var t=document.getElementById("js-inputMsg"),i=-1;if(t.selectionStart||0==t.selectionStart)i=t.selectionStart;else{var a=document.selection.createRange();a.moveStart("character",-t.value.length),i=a.text.length}var s=y.val().substring(0,i),n=y.val().substring(i),o=s+e+n;$(y).val(o);var r=(s+e).length;if(t.setSelectionRange)t.setSelectionRange(r,r),t.focus();else if(t.createTextRange){var a=t.createTextRange();a.collapse(!0),a.moveEnd("character",r),a.moveStart("character",r),a.select()}ie(),$inputPlaceholder.css("display","none")},fe=function(e){for(var t=e.originalEvent,i=0,a=t.clipboardData.items.length;i<a;i++){var s=t.clipboardData.items[i];"file"===s.kind&&(e.preventDefault(),uploadFile.onFormDataPasteHandler(s,l,c))}},pe=function(){uploadFile.onChangeHandler(l,c)},me=function(e){ge(e),O.trigger("sendArea.send",[{answer:u,uid:e.uid,cid:e.cid,dateuid:e.dateuid,date:+new Date,currentStatus:d,msgSendType:m,fileurl:e.url}]),y.focus()},ge=function(e){if(ve(e)){m=e.browserVersion&&"ie-"===e.browserVersion?"ie-file":"file";var t="fileOther";switch(e.filetype){case"rar":t="fileRar";break;case"txt":t="fileTxt";break;case"doc":t="fileDoc";break;case"pdf":t="filePdf";break;case"ppt":t="filePpt";break;case"xls":t="fileXls";break;default:t="fileOther"}var i={url:e.url,dateuid:e.token,filesize:e.filesize,fileIcoClass:t,filename:e.filename+e.extension};u=doT.template(W.tranfiletype)(i)}},ve=function(e){switch(e.filetype){case"image":m=e.browserVersion&&"ie-"===e.browserVersion?"ie-image":"image";var t={url:e.url};return u=doT.template(W.fileImage)(t),!1;default:return!0}},he=function(e){0==J&&(J=!0,s({type:"post",url:"/chat/user/isComment.action",dataType:"json",data:{cid:r.apiInit.cid,uid:r.apiInit.uid,type:K},success:function(t){if(isEvaluated=t.isComment,1==isEvaluated){if("close"==e.from)return void(a.parent!==a?a.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"):(a.close(),a.location.href="about:blank"));var i={type:"system",status:"evaluate",data:{content:f.T0025}};O.trigger("sendArea.sendAreaSystemMsg",i)}else if(0==isEvaluated)q(K,r,e,X);else{if("close"==e.from)return void(a.parent!==a?a.parent.postMessage(JSON.stringify({name:"chat_collapseWindow",data:""}),"*"):(a.close(),a.location.href="about:blank"));var i={type:"system",status:"evaluate",data:{content:f.T0026}};O.trigger("sendArea.sendAreaSystemMsg",i)}}}),setTimeout(function(){J=!1},1e3))},ye=function(e){switch(e){case-3:break;case-2:y.css("display","none"),$inputPlaceholder.css("display","none"),N.html(r.apiConfig.waitDoc).css("visibility","visible");break;case-4:case-1:case 1:case 2:case 3:case 5:case 4:case 6:case 7:case 8:x.remove(),e!=-1&&3!=e||(M.remove(),e==-1&&1!=r.urlParams.msgflag&&(r.urlParams.isLeaveCustomSysFlag?a.open(r.urlParams.leaveCustomUrl):we())),O.trigger("sendArea.revmoveChatSwitch"),r.urlParams.msgflag&&$(".js-endleaveMessage").remove(),r.urlParams.satDegree_A||$(".js-endEvaluate").remove(),setTimeout(function(){je()},100),F.css("display","block")}},je=function(){var e=0;switch($(".js-endavgWidth").each(function(){"block"===$(this).css("display")&&(e+=1)}),e){case 1:D.css("width","100%");break;case 2:D.css("width","50%");break;case 3:D.css("width","33.333%")}},Te=function(e){var t=e.originalEvent,i=JSON.parse(t.data);"human"!=R.getCurrentState()&&"auto"==t.data.type&&(r.urlParams.autoManual=!0,r.urlParams.aid=i.aid,oe())},be=function(){var e=$(this).attr("title"),t=l+ +new Date;O.trigger("sendArea.send",[{requestText:e,answer:e,uid:l,cid:c,dateuid:t,date:+new Date,currentStatus:d}]),ae(),y.val(""),$inputPlaceholder.css("display","block"),ie()},Ie=function(){if("iframe"==r.urlParams.from){var e=a.location.href.replace(/#[\S]+$/,"").replace(/(&|\?)cid=[^&]+/,"").replace(/(&|\?)tnk=[^&]+/,"").replace(/(&|\?)autoManual=[^&]+/,"");a.location.href=e+"&tnk="+ +new Date}else{var e=a.location.href;e=e.replace(/(&|\?)autoManual=[^&]+/,"").replace(/#[\S]+$/,""),e=e.replace(/(&|\?)tnk=[^&]+/,""),e+="&tnk="+ +new Date,a.location.href=e}},we=function(){H(r)},xe=function(){var e=$(this).val();""===e?$(this).next().css("display","block"):$(this).next().css("display","none"),e&&(_length=e.length)},Fe=function(e){var t=$(e).val();""===t?$(e).next().css("display","block"):$(e).next().css("display","none"),t&&(_length=t.length)},ke=function(){$inputMsg.val(""),$inputPlaceholder.html(r.apiConfig.customDoc),$inputPlaceholder.css("display","block")},Ce=function(){G(r)},$e=function(t){r=t[0],s=e("../../../common/util/monitAjax.js")(r),f=r.language.text,p=r.userInfo.color?r.userInfo.color:r.apiConfig.color,j.css("color",p);var i=r.urlParams.wurl||"",n=r.urlParams.wurlOpenStyle;i&&1==r.urlParams.isCustomSysFlag&&(j.remove(),n?C.before('<a class="chatSwitch js-sendChatSwitch" target="_blank" style="color:'+p+'" href="'+i+'">'+f.T0060+"</a>"):C.before('<a class="chatSwitch js-sendChatSwitch" target="_parent" style="color:'+p+'" href="'+i+'">'+f.T0060+"</a>"),j=$(".js-sendChatSwitch"),O.trigger("sendArea.wurlHandler",{wurl:i,wurlOpenStyle:n})),r.urlParams.isLeaveCustomSysFlag?$(".js-mainBox").delegate(".js-leaveMessage","click",function(){a.open(r.urlParams.leaveCustomUrl)}):$(".js-mainBox").delegate(".js-leaveMessage","click",we);var o=r.urlParams.chatConnectButton;"1"==o&&j.css("display","none"),$inputPlaceholder.html(r.apiConfig.robotDoc),A.attr("title",f.T0049),C.attr("title",f.T0050),w.attr("title",f.T0052),I.attr("title",f.T0051),_.text(f.T0057),Ae(),Le()},Le=function(){Z=z(a,r),uploadFile=E(t,i,a,r),!r.urlParams.autoManual||1!=r.apiConfig.type&&3!=r.apiConfig.type||setTimeout(oe,100),0==r.urlParams.designButton&&$(".js-powBox").css("visibility","hidden"),r.urlParams.isMessageFlag||$(".js-sendLeaveMessage").remove(),r.apiConfig.isUploadFlag||$(".js-uploadFile").remove(),r.urlParams.isFeedBackFlag||$(".js-sendEvaluate").remove(),r.apiConfig.robotSwitchFlag&&$(".js-switchRobot").css("display","block")},Ae=function(){l=r.apiInit.uid,c=r.apiInit.cid},Me=function(){g=$(document.body),v=$(t),h=v.find(".js-send-btn"),y=v.find(".js-inputMsg"),j=v.find(".js-chatSwitch"),T=v.find(".js-voiceCalls"),b=v.find(".js-upload"),L=v.find(".js-capture"),I=v.find(".js-leaveMessage"),w=v.find(".js-evaluate"),x=v.find(".js-footerOn"),F=v.find(".js-footerOff"),k=v.find(".js-newMessage"),C=v.find(".js-uploadFile"),A=v.find(".js-emotion"),M=v.find(".js-endEvaluate"),S=v.find(".js-endnewMessage"),P=v.find(".js-endleaveMessage"),D=v.find(".js-endavgWidth"),N=v.find(".js-textareaPre"),$inputPlaceholder=v.find(".js-inputPlaceholder"),_=v.find(".js-sobotTitle"),$inputMsg=v.find(".js-inputMsg"),B=v.find(".js-respInfoBtn"),$switchRobot=v.find(".js-switchRobot")},Se=function(){O.on("core.onload",$e),O.on("core.buttonchange",le),O.on("core.grouplist",de),$(".js-capture").on("click",ee),O.on("core.system",re),h.on("click",Y),y.on("keydown",se),V.detectEventSupport("input")?y.on("input",ie):setInterval(function(){ie()},200),$(".js-mainBox").delegate(".js-chatSwitch","click",oe),y.on("focus",ce),O.on("sendArea.gotoxy",ue),O.on("sendArea.uploadImgUrl",me),b.on("change",pe),w.on("click",he),O.on("listMsg.toEvaluate",he),O.on("listMsg.artificial",ke),k.on("click",Ie),x.delegate(".js-respInfoBtn","click",be),O.on("core.sessionclose",ye),O.on("listMsg.openleaveMsgPage",we),$(a).on("message",Te),O.on("core.transfersuccess",function(e){X=e.data.aname,y.on("paste",fe),K=1}),O.on("listMsg.showChatSwitch",function(){j.css("display","block")}),V.detectEventSupport("input")?y.on("input",xe):setInterval(function(){Fe(y)},100),$inputPlaceholder.on("click",function(){y.focus()}),g.on("click",ae),$switchRobot.on("click",Ce)},Pe=function(){Me(),Se(),O.on("core.statechange",ne)};Pe()};t.exports=a},{"../../../common/comm.js":1,"../../../common/mode/currentState.js":11,"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"../util/modal/dialog.js":66,"../util/qqFace.js":69,"./evaluate.js":49,"./leaveMessage.js":54,"./switchRobot.js":55,"./template.js":56,"./uploadImg.js":57}],53:[function(e,t,i){var a=function(t,i){var a=(e("./template.js"),e("../../../common/util/monitAjax.js")(i),e("../../../common/util/listener.js")),s=!1,n="",o=function(e){e.stopPropagation(),n=$(this).attr("data-key"),s?(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),s=!1,t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px")):(t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),$(this).find(".dropListTitleIcn").css("background-position","-3320px 13px"),$(this).addClass("checkActive"),$(this).next().addClass("openActive"),t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px"),s=!0)},r=function(e){e.stopPropagation();var i=$(this).attr("data-nodeFlag")||"";if("1"!==i){var o=$(this).parent().parent();if(o.find(".js-dropdown-title").html($(this).html()),n){var r=$(this).attr("dataId")||"",l=$(this).attr("dataName")||"",c={key:n,dataId:r,dataName:l};a.trigger("sendArea.definedFieldResult",c)}else{var d=$(this).attr("data-fieldId")||"",u=$(this).attr("dataValue")||"",l=($(this).attr("fieldType")||"",$(this).attr("dataName")||"");if(u)var c={fieldId:d,dataValue:u,dataName:l,type:"definedList"};else{var f="00:00";f=o.parent().find(".js-definedHour").html()+":"+o.parent().find(".js-definedMinutes").html();var c={fieldId:d,dataValue:f,dataName:f,type:"time"}}a.trigger("sendArea.definedFieldResult",c)}t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),s=!1}},l=function(){s=!1,t.find(".js-dropdown-menu").removeClass("openActive"),t.find(".js-dropdown-btn").removeClass("checkActive"),t.find(".dropListTitleIcn").css("background-position","-3279px 13px"),t.find(".js-classDropdownAreaFixed").removeClass("openActive"),t.find(".js-classDropdown-btn").removeClass("checkActive"),t.find(".classIfyTitleIcn").css("background-position","-3279px 13px")},c=function(){},d=function(){},u=function(){l()},f=function(){t.delegate(".js-dropdown-btn","click",o),t.delegate(".js-dropdownLi","click",r),$(document.body).on("click",function(){l()}),a.on("sendArea.closeAlldropMenu",u)},p=function(){},m=function(){p(),d(),f()};m(),this.expand=c,this.collapse=l};t.exports=a},{"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"./template.js":56}],54:[function(e,t,i){var a=function(t){var i,a,s,n,o,r,l,c,d,u,f,p,m,g,v,h,y,j=e("../util/load.js")(),T=e("../../../common/comm.js"),b=e("../../../common/util/listener.js"),I=e("../config/config.json"),w=e("../util/showTip.js"),x=e("./leaveDropdown.js"),F=e("./dropdownClassify.js"),k=e("../../../common/util/monitAjax.js")(t),C=e("./template.js"),L=!1,A=!1,M=!1,S=!1,P=!1,D=!1,N=!0,_=60,B=60,O=[],R=!1,z=0,E=0,H=0,q=0,a=t.apiInit.uid,W=(t.apiInit.cid,t.userInfo.color?t.userInfo.color:t.apiConfig.color),U=t.language.lan,r=t.language.text,G=[],Z={},V="",J=t.urlParams.leaveMsgGroupId||"",Q=navigator.userAgent.toLowerCase(),K=function(){$leaveMsglayer.removeClass("show"),$("#leaveMsg").animate({right:"-390px"},function(){i.remove()}),$sureWindow.removeClass("show"),$sureWindowlayer.removeClass("show"),$(".gt_holder").remove(),clearInterval(E),clearInterval(H),clearInterval(q)},X=function(){$(".js-leaveMsglayer").addClass("show"),$("#leaveMsg").animate({right:"0"})},Y=function(){var e=c.val();return""===e?(_text=r.T0037,$leaveMsgDetailTip.html(_text).css("visibility","inherit"),L=!1,!1):($leaveMsgDetailTip.css("visibility","hidden"),L=!0,!0)},ee=function(){var e=$(".js-email").val(),t=/^([a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*(?:@(?!-))(?:(?:[-a-zA-Z0-9]*)(?:[a-zA-Z0-9](?!-))(?:\.(?!-)))+[a-zA-Z0-9]{2,})$/;if(n){if(e&&t.test(e))return g.css("visibility","hidden"),A=!0,!0;var i=r.T0036;return""===e&&(i=r.T0035),g.html(i).css("visibility","inherit"),A=!1,!1}return e&&!t.test(e)?(g.html(i).css("visibility","inherit"),A=!1,!1):(g.css("visibility","hidden"),A=!0,!0)},te=function(){var e=/(^1\d{10}$)/,t=$(".js-telephone").val(),i=r.T0045;if(M=!1,s){if(!t||!e.test(t))return v.html(i).css("visibility","inherit"),M;v.css("visibility","hidden")}else{if(t&&!e.test(t))return v.html(i).css("visibility","inherit"),M;v.css("visibility","hidden")}return M=!0,!0},ie=function(){o?$(".js-leaveMsgFileStyle").length?S=!0:(S=!1,$enclosureTip.html(r.T0076).css("visibility","inherit")):S=!0},ae=function(e){for(var s=0,n=0;n<G.length;n++)Z[G[n].id].fillFlag&&""==Z[G[n].id].value?(i.find(".js-errorTip"+Z[G[n].id].id).css("visibility","inherit"),D=!1):(G[n].value=Z[G[n].id].value,i.find(".js-errorTip"+Z[G[n].id].id).css("visibility","hidden"),s++);if(0!=G.length&&s!=G.length||(D=!0),2==t.urlParams.ticketTypeFlag&&(V=t.urlParams.ticketTypeId),1==t.urlParams.ticketTypeFlag&&""===V?(P=!1,i.find(".js-errorQuestionClass").css("visibility","inherit")):(P=!0,i.find(".js-errorQuestionClass").css("visibility","hidden")),Y()||(L=!1),ee()||(A=!1),te()||(M=!1),ie(),R)return void w.show(r.T0090);
if(e&&1===e&&(z=0),z>0)return $commitSureWindow.animate({opacity:"1"}).addClass("show"),void $sureWindowlayer.animate({opacity:"1"}).addClass("show");if(L&&A&&M&&S&&D&&P&&N){for(var o=c.val()||"",u=d.val()||"",p=f.val()||"",m=0,g=0,v=t.sysNum,h="",j=[],n=0;n<O.length;n++)""!==O[n]&&j.push(O[n]);if(h=j.join(";"),y=JSON.stringify(G),l)$(".gt_holder").addClass("gt_show").removeClass("gt_hide");else{N=!1;var T={uid:a,companyId:v,ticketContent:o,customerEmail:u,customerPhone:p,ticketFrom:m,customerSource:g,fileStr:h,customerNick:t.apiInit.uname,groupId:t.urlParams.leaveMsgSendGroupIdFlag?J:"",extendFields:y,ticketTypeId:V};k({type:"post",url:"/chat/data/postMsg.action",dataType:"json",data:T,success:function(e){if(e&&"000000"==e.retCode){var t={type:"system",status:"leaveMsgComplete",data:{content:r.T0056}};b.trigger("sendArea.sendAreaSystemMsg",t),c.val(""),d.val(""),f.val(""),K(),w.show(r.T0032),setTimeout(function(){N=!0},5e3)}else w.show(U.L10038)},error:function(){w.show(r.T0033)}})}}},se=function(){$(this).css({border:"1px solid #acbbbf"})},ne=function(){$(this).css({border:"1px solid #e0e9e8"})},oe=function(){""!==c.val()||""!==d.val()||""!==f.val()||$(".js-leaveMsgFileStyle").length?($sureWindow.addClass("show"),$sureWindow.animate({opacity:"1"}),$sureWindowlayer.addClass("show"),$sureWindowlayer.animate({opacity:"1"})):K()},re=function(){var e=$(this).val();""===e?$(this).next().css("visibility","inherit"):$(this).next().css("visibility","hidden"),e&&(_length=e.length)},le=function(e){var t=$(e).val();""===t?$(e).next().css("visibility","inherit"):$(e).next().css("visibility","hidden"),t&&(_length=t.length)},ce=function(){var e=0;e>200&&$(this).val($(this).val().substring(0,200))},de=function(){var e=$(".js-mainBox").height()-_-B;$(".leaveMsgBody").height(e)},ue=function(){k({type:"post",url:"/chat/data/isMessage.action?t="+(new Date).getTime(),dataType:"json",data:{uid:a,msgFlag:"0"},success:function(e){l=+e.isMessage,l&&e.resStr&&(e.resStr=JSON.parse(e.resStr),initGeetest({gt:e.resStr.gt,challenge:e.resStr.challenge,offline:!e.resStr.success,product:"popup"},fe))}})},fe=function(e){e.onSuccess(function(){for(var i=e.getValidate(),s=c.val()||"",n=d.val()||"",o=f.val()||"",l=0,u=t.sysNum,p="",m=[],g=0;g<O.length;g++)""!==O[g]&&m.push(O[g]);p=m.join(";"),k({url:"/chat/data/postMsgAfterVerify.action",type:"post",dataType:"json",data:{uid:a,companyId:u,source:l,ticketFrom:l,customerSource:l,customerPhone:o,customerEmail:n,ticketContent:s,msgFlag:"0",fileStr:p,geetest_challenge:i.geetest_challenge,geetest_validate:i.geetest_validate,geetest_seccode:i.geetest_seccode,customerNick:t.apiInit.uname,groupId:t.urlParams.leaveMsgSendGroupIdFlag?J:"",extendFields:y,ticketTypeId:V},success:function(e){if(e&&"000000"==e.retCode){$(".gt_holder").remove();var t={type:"system",status:"leaveMsgComplete",data:{content:r.T0056}};b.trigger("sendArea.sendAreaSystemMsg",t),K(),w.show(r.T0032)}else w.show(U.L10038)}})}),e.appendTo(".js-popup-captcha-pc"),pe()},pe=function(){var e=$(".js-mainBox").width(),t=$(".js-mainBox").height();$("#popup-captcha-pc").css({top:(t-250)/2+"px",left:(e-260)/2+"px"})},me=function(){if($(".js-leaveMsgFileStyle").length>4)return w.show(r.T0077),void Te();if(window.FormData){var e=+new Date,t=$leaveMsgUploadBtn[0],i=$leaveMsgUploadBtn.val(),a=i.substr(i.lastIndexOf(".")),s=i.substring(i.lastIndexOf("\\")+1,i.lastIndexOf("."));if(je(a,s)){var n=t.files[0],o=n.size;if(o<1024)o+="B";else if(o<1048576)o=(o/1024).toFixed(2)+"KB";else{if(o=(o/1048576).toFixed(2),o>20)return w.show(r.T0082),void Te();o+="M"}ge(n,a,s,o,e)}}else he(),$sureWindowlayer.addClass("show"),$sureWindowlayer.removeClass("show")},ge=function(e,t,a,s,n){var o={filename:a,extension:t,filesize:s,date:n,languageText:r},l=doT.template(C.leaveMsgFileStyle)(o);i.find(".js-enclosureTip").before(l),ve(e,t,a,n)},ve=function(e,a,s,n){var o=(t.apiConfig.uid+n,new XMLHttpRequest),l=new FormData;l.append("file",e),l.append("type","msg"),l.append("pid",t.apiInit.pid),l.append("countTag",1),l.append("source",0),o.open("post","/chat/webchat/fileUploadForPostMsgBypc.action");var c=new FileReader;c.readAsDataURL(e),c.onload=function(e){o.send(l)},i.delegate(".js-leaveMsgFileClose"+n,"click",function(){o.abort(),R=!1;var e=$(this).attr("data-url");if(e){var t=O.join(";");t=t.replace(e,""),O=t.split(";")}$(this).parent().remove(),Te(),z--,i.find(".js-leaveMsgFileClose"+n).attr("data-url",e)}),o.onreadystatechange=function(e){if(4==e.target.readyState){if(200==e.target.status){var t=JSON.parse(e.target.response).url;O.push(t),$enclosureTip.css("visibility","hidden"),i.find(".js-leaveMsgFileClose"+n).attr("data-url",t)}else i.find(".js-leaveMsgFile"+n).find(".fileTip").html(r.T0075).addClass("fileTipShow"),z++;Te()}},o.upload.addEventListener("progress",function(e){if(e.lengthComputable){R=!0;var t=Math.round(100*e.loaded/e.total),a=t.toString();i.find(".js-leaveMsgProcess"+n).css("width",a+"%"),"100"==a&&(R=!1,i.find(".js-leaveMsgProcess"+n).parent().remove())}else i.find(".js-leaveMsgProcess"+n).parent().remove()},!1)},he=function(){var e=i.find(".js-leavemsgfileinfo");e.find('input[name="pid"]').val(t.apiInit.pid);var a=$leaveMsgUploadBtn.val(),s=a.substr(a.lastIndexOf(".")),n=a.substring(a.lastIndexOf("\\")+1,a.lastIndexOf(".")),o=+new Date;t.apiConfig.uid+o;if(je(s,n)){var r=ye(s,n),l="iframe"+r;e.attr("target",l),e.attr("action","/chat/webchat/fileUploadForPostMsgBypc.action");var c=$('<iframe id="'+l+'" style="display:none;height:1000px;width:500px;" name="'+l+'" src="about:blank;"></iframe>');c.on("load",function(){var e=c[0],t=e.contentWindow.document.getElementsByTagName("body")[0].innerHTML;if(t){var a=JSON.parse(t);a.filesize===!1?(w.show("文件太大，上传失败"),i.find(".js-leaveMsgFile"+r).find(".ie-uploadLoading").remove(),i.find(".js-leaveMsgFile"+r).find(".fileTip").addClass("fileTipShow"),z++):(i.find(".js-leaveMsgFile"+r).find(".ie-uploadLoading").remove(),O.push(a.url)),i.find(".js-leaveMsgFileClose"+r).attr("data-url",a.url),i.delegate(".js-leaveMsgFileClose"+r,"click",function(){var e=$(this).attr("data-url");if(e){var t=O.join(";");t=t.replace(e,""),O=t.split(";")}$(this).parent().remove(),Te(),z--})}}),$(document.body).append(c),e.submit()}Te()},ye=function(e,t){var a=+new Date,s={filename:t,extension:e,date:a,languageText:r},n=doT.template(C.IframeleaveMsgFileStyle)(s);return i.find(".js-leaveMsgUpload").append(n),a},je=function(e,t){var i="";return i=/^(.jpg|.jpeg|.png|.doc|.docx|.pdf|.xls|.xlsx|.rar|.zip)$/,!!i.test(e)||(e&&w.show(r.T0078),Te(),!1)},Te=function(){i.find(".js-leaveMsgUploadBtn").val(""),i.find(".js-leavemsgfileinfo")[0].reset()},be=function(){var e=$(this).attr("data-fieldId"),t=[],i=[];$(this).find(".js-userCheckIco"+e).hasClass("userCheckIcoActive")?($(this).addClass("userCheck"),$(this).find(".js-userCheckIco"+e).removeClass("userCheckIcoActive")):($(this).removeClass("userCheck"),$(this).find(".js-userCheckIco"+e).addClass("userCheckIcoActive")),$(".js-userCheckIco"+e).each(function(){$(this).hasClass("userCheckIcoActive")&&(t.push($(this).parent().attr("dataValue")),i.push($(this).parent().attr("dataName")))}),t=t.join(","),i=i.join(",");var a={fieldId:e,dataValue:t,dataName:i};Z[a.fieldId].value=a.dataValue},Ie=function(){var e=$(this).attr("data-fieldId"),t=$(this).attr("dataValue"),i=$(this).attr("dataName");$(".js-userOptIco"+e).removeClass("userOptIcoActive"),$(".js-userOptIco"+e).parent().addClass("userOpt"),$(this).removeClass("userOpt").find(".js-userOptIco"+e).addClass("userOptIcoActive");var a={fieldId:e,dataValue:t,dataName:i};Z[a.fieldId].value=a.dataValue},we=function(){var e=$(this).attr("data-fieldId"),t=$(this).val();Z[e].value=t,i.find(".js-errorTip"+e).css("visibility","hidden")},xe=function(e,t){Z[t].value=e,i.find(".js-errorTip"+t).css("visibility","hidden")},Fe=function(e){e.key?(V=e.dataId,i.find(".js-errorQuestionClass").css("visibility","hidden")):("definedList"==e.type?Z[e.fieldId].value=e.dataValue:"time"==e.type&&(Z[e.fieldId].value=e.dataValue),i.find(".js-errorTip"+e.fieldId).css("visibility","hidden"))},ke=function(e){var a=t.apiConfig.msgTxt,l=t.apiConfig.msgTmp;j.load(I.basePath+"/views/sendArea/leaveMessage.html").then(function(d){var f=doT.template(d)({global:t,guide:a,leaveMsgDetail:l,languageText:r,definedField:e.items});i=$(f),$(".js-mainBox").append(i);for(var m=0;m<e.items.length;m++){var g={};g.id=e.items[m].cusFieldConfig.fieldId,g.fieldName=e.items[m].cusFieldConfig.fieldName,4==e.items[m].cusFieldConfig.fieldType?(g.fillFlag=0,g.value="00:00"):(g.fillFlag=e.items[m].cusFieldConfig.fillFlag,g.value=""),G.push(g),Z[g.id]=g}$e(),Le(),X(),de(),x(i,t),F(i,t),$leaveMsgsubmit.css("background",W);t.urlParams.emailFlag||"",t.urlParams.emailShowFlag||"";1==t.urlParams.emailShowFlag?n=1==t.urlParams.emailFlag:(u.remove(),A=!0);t.urlParams.telFlag||"",t.urlParams.telShowFlag||"";1==t.urlParams.telShowFlag?(s=!0,s=0!=t.urlParams.telFlag):(p.remove(),M=!0),1==t.urlParams.enclosureShowFlag?o=0!=t.urlParams.enclosureFlag:$leaveMsgUpload.remove();var v=$txtTip.height();v>114&&c.height(v);for(var m=0,h=e.items.length;m<h;m++)3==e.items[m].cusFieldConfig.fieldType&&i.find("#dp"+e.items[m].cusFieldConfig.fieldId).datepicker().on("changeDate",function(e){var t,i,a,s=e.date;t=s.getFullYear(),i=s.getMonth()+1<10?"0"+(Number(s.getMonth())+1):s.getMonth()+1,a=s.getDate()<10?"0"+s.getDate():s.getDate(),_bir=t+"-"+i+"-"+a,$(this).val(_bir);var n=$(this).attr("data-fieldId");xe(_bir,n),$(".datepicker.dropdown-menu").hide()})})},Ce=function(){var e=$(this).attr("data-fieldId"),t=$(".js-definedNumInput"+e).val();t.length>300&&(t=t.slice(0,300)),$(".js-definedNumInput"+e).val(t)},$e=function(){d=i.find(".js-email"),u=i.find(".js-emailArea"),f=i.find(".js-telephone"),p=i.find(".js-telArea"),c=i.find(".js-leaveMsgDetail"),m=i.find(".js-leaveMessage"),$leaveMsgDetailTip=i.find(".js-leaveMsgDetailTip"),g=i.find(".js-emailTip"),v=i.find(".js-telephoneTip"),$leaveMsgsubmit=i.find(".js-leaveMsgsubmit"),$leaveMsglayer=i.find(".js-leaveMsglayer"),$focusStyle=i.find(".js-focusStyle"),$close=i.find(".js-close"),$txtTip=i.find(".js-txt-tip"),$sureWindow=i.find(".js-sureWindow"),$leaveclose=i.find(".js-leaveclose"),$leavecancel=i.find(".js-leavecancel"),$leavesure=i.find(".js-leavesure"),h=i.find(".js-leaveMsgHeader"),$sureWindowlayer=i.find(".js-sureWindowlayer"),$leaveMsgUploadBtn=i.find(".js-leaveMsgUploadBtn"),$leaveMsgUpload=i.find(".js-leaveMsgUpload"),$enclosureTip=i.find(".js-enclosureTip"),$commitSureWindow=i.find(".js-commitSureWindow"),$commitLeavesure=i.find(".js-commitLeavesure"),$leaveMsgBody=i.find(".js-leaveMsgBody"),$definedFields=i.find(".js-definedFields"),$userCheck=i.find(".js-userCheck"),$userOpt=i.find(".js-userOpt"),$definedNumInput=i.find(".js-definedNumInput")},Le=function(){$close.on("click",oe),$leaveMsglayer.on("click",oe),$leavesure.on("click",K),c.on("blur",Y),d.on("blur",ee),f.on("blur",te),$leaveMsgsubmit.on("click",ae),$focusStyle.on("focus",se),$focusStyle.on("blur",ne),$(window).on("resize",de),c.on("input",ce),$definedNumInput.on("input",Ce),$commitLeavesure.on("click",function(){ae(1)}),i.delegate(".js-definedInput","blur",we),b.on("sendArea.definedFieldResult",Fe),Q.indexOf("ie 7")!==-1&&$leaveMsgBody.on("scroll",function(){$sureWindowlayer.addClass("show"),$sureWindowlayer.removeClass("show")}),$leaveMsgUploadBtn.on("change",me),T.detectEventSupport("input")?(c.on("input",re),d.on("input",re),f.on("input",re)):E=setInterval(function(){le(".js-leaveMsgDetail")},100),$txtTip.on("click",function(){c.focus()}),$leavecancel.on("click",function(){$sureWindow.css({opacity:"0"}).removeClass("show"),$sureWindowlayer.css({opacity:"0"}).removeClass("show"),$commitSureWindow.animate({opacity:"0"}).removeClass("show")}),$leaveclose.on("click",function(){$sureWindow.css({opacity:"0"}).removeClass("show"),$sureWindowlayer.css({opacity:"0"}).removeClass("show"),$commitSureWindow.animate({opacity:"0"}).removeClass("show")}),$leavesure.css({background:W,color:"#fff"}),$commitLeavesure.css({background:W,color:"#fff"}),$userCheck.on("click",be),$userOpt.on("click",Ie)},Ae=function(){var e={operateType:3,openFlag:1},i=JSON.stringify(e),s={uid:a,url:"basic/getCusFieldShowWork/4",method:"get",param:i};k({url:"/chat/data/invokeOtherByUser.action",dataType:"json",type:"get",data:s}).success(function(e){ke(e),ue()}),w=w(t)};Ae()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"../config/config.json":37,"../util/load.js":64,"../util/showTip.js":70,"./dropdownClassify.js":48,"./leaveDropdown.js":53,"./template.js":56}],55:[function(e,t,i){var a=function(t){var i,a,s,i,n,o,r=(e("../../../common/util/listener.js"),e("../../../common/util/monitAjax.js")(t)),l=e("./template.js"),c=e("../../../common/comm.js"),d=function(){a.removeClass("show"),s.animate({right:"-390px"},function(){i.remove()})},u=function(){a.addClass("show"),s.animate({right:"0"})},f=function(e){o=c.getQueryParam();var a=document.location.href,s=a.substring(0,a.indexOf("?")+1);for(key in o)"robotFlag"==key||(s+=key+"="+o[key]+"&");s=s.substring(0,s.lastIndexOf("&"));var n={uid:t.apiInit.uid};r({url:"/chat-web/user/getRobotSwitchList.action",dataType:"json",type:"get",data:n}).success(function(e){if(1==e.status){for(var a=0;a<e.list.length;a++)e.list[a].newLink=s+"&robotFlag="+e.list[a].robotFlag,e.list[a].robotFlag==t.apiConfig.robotFlag&&(e.list[a].currentRobot=1);var n={languageText:t.language.text,list:e.list},o=doT.template(l.switchRobotTemplete)(n);i=$(o),$(".js-mainBox").append(i),i.find(".js-currentRobot").css({background:t.userInfo.color,border:"1px solid "+t.userInfo.color}),p(),m(),u()}})},p=function(){a=i.find(".js-switchRobotlayer"),s=i.find(".js-switchRobot"),n=i.find(".js-close")},m=function(){n.on("click",d),a.on("click",d),i.find(".js-switchRobotEle").hover(function(){$(this).css({background:t.userInfo.color,border:"1px solid "+t.userInfo.color}),$(this).find("a").css({color:"#fff"})},function(){$(this).css({background:"#fff",border:"1px solid #e0e9e8"}),$(this).find("a").css({color:"#535656"})})},g=function(){f()};g()};t.exports=a},{"../../../common/comm.js":1,"../../../common/util/listener.js":32,"../../../common/util/monitAjax.js":34,"./template.js":56}],56:[function(e,t,i){var a={},s='<div class="msgFileIco js-msgFileIco {{=it.fileIcoClass}}" style="float: left; width: 30px;height: 30px;margin-top: 3px;background-repeat: no-repeat;"></div><div class="msgFileDetail js-msgFileDetail" style="float: left;margin-left: 9px;font-size: 12px;"><p class="filename" title="{{=it.filename}}" style="width: 170px;height: 20px;color: #555556;overflow: hidden;text-overflow: ellipsis;word-break: normal;white-space: nowrap;font-size: 12px;">{{=it.filename}}</p><span class="fileSize" style="float: left;color: #8a9699;font-size: 12px">{{=it.filesize}}</span> <span class="sizeAfter js-sizeAfter" style="float: left;margin: 0 5px;color: #8a9699;font-size: 12px;">|</span><a class="filedownload js-filedownload" href="{{=it.url}}" target="_blank" style="display:block;color: #28a7dc!important; font-size: 12px; cursor: pointer;">下载</a></div>',n='<img src="{{=it.url}}" class="webchat_img_upload upNowImg uploadedFile" />',o='<div class="systeamTextBox systeamNowText js-systeamTextBox{{=it.date}}"><p class="systeamText">正在上传 {{=it.filename}}{{=it.extension}}</p></div>',r='<div class="evaluateWether"><p class="evaluateTitle">{{=it.evaluateTitle}}</p><div class="btnGroup"><span class="js-isques evaluate-btn evaluateok"><i></i>{{=it.okText || "确定"}}</span><span class="js-noques evaluate-btn evaluateno"><i></i>{{=it.cancelText || "取消"}}</span></div></div>',l='<div class="evaluate js-evaluate"><p class="h2">{{=it.languageText.T0027}}</p><div class="situation">{{for(var i=0;i<it.list.length;i++){}}{{if(i%2==0){}}<span class="tag js-tag">{{=it.list[i]}}</span>{{}else{}}<span class="tag js-tag" style="margin-right:0">{{=it.list[i]}}</span>{{}}}{{}}}</div><textarea id="js-evaluateInner" class="js-evaluateInner" placeholder="{{=it.languageText.T0028}}" maxLength="200"></textarea></div>',c='<div class="evaluateWether js-evaluate">{{if(it.config[0].isQuestionFlag){}}<div class="operateType"><p class="operateTypeTitle" title={{=it.aname}}>{{=it.subName}}{{=it.languageText.T0106}}</p><div class="operateTypeBtn"><p class="solve solved js-solved"><span></span>{{=it.languageText.T0041}}</p><p class="solve unSolved js-unSolved" style="margin-left:25px;"><span></span>{{=it.languageText.T0042}}</p></div></div>{{}}}<p class="evaluateTitle">{{=it.languageText.T0096}}</p><div id="star"><ul><li><a href="javascript:;">1</a></li><li><a href="javascript:;">2</a></li><li><a href="javascript:;">3</a></li><li><a href="javascript:;">4</a></li><li><a href="javascript:;">5</a></li></ul></div><p class="evaluateTip js-evaluateTip"><span style="color:#8b98ad;">{{=it.languageText.T0107}}</span></p></div>',d='<div class="evaluate js-evaluate">{{if(it.list.length>0){}}<p class="h2">{{=it.languageText.T0027}}</p>{{}}}<div class="situation">{{for(var i=0;i<it.list.length;i++){}}{{if(i%2==0){}}<span class="tag js-tag">{{=it.list[i]}}</span>{{}else{}}<span class="tag js-tag" style="margin-right:0">{{=it.list[i]}}</span>{{}}}{{}}}</div><textarea id="js-evaluateInner" class="js-evaluateInner" placeholder="{{=it.conf.inputLanguage||it.languageText.T0028}}{{=it.conf.isInputMust?it.languageText.T0046:it.languageText.T0047}}" maxLength="200"></textarea></div>',u='<div class="evaluateSubmitArea">{{if(it.from=="close"){}}<a class="submit js-evaluateSubmit js-submitTheme" href="#">{{=it.languageText.T0029}}</a><a class="nosubmit js-noevaluateSubmit" href="#">{{=it.languageText.T0097}}</a>{{}else{}}<a class="submit js-evaluateSubmit js-submitTheme" href="#">{{=it.languageText.T0029}}</a>{{}}}</div>',f='<a class="js-leaveMsgBtn" href="{{=it.hostUrl}}"><i class="leaveMessagebg"></i><p>{{=it.languageText.T0030}}</p></a>',p='<span class="span3"><a class="js-leaveMsgBtn" href="{{=it.hostUrl}}"><i class="icon"></i><p>{{=it.languageText.T0030}}</p></a></span>',m='<div class="js-allScreen allScreen"><div class="loadingUploadImg"><i></i><p>{{=it.language.L10036}}</p></div></div>',g='<div class="js-evamsg evamsg"><p>{{=it.language.L10037}}</p></div>',v='<div class="js-evamsg evamsg" style="color:#cb1f16"><p>{{=it.language.L10038}}</p></div>',h='<div class="js-evaluateArea"><div class="evaluatelayer js-evaluatelayer"></div><div class="evaluateDialog js-evaluateDialog"><span class="close_button js-evaluateClose"></span><div class="evaluate-body-widely"><div class="model-body"></div><div class="model-body-extend"></div><div class="model-body-commit"></div></div></div></div>',y='<div class="js-leaveMsgFileStyle leaveMsgFileStyle js-leaveMsgFile{{=it.date}}"><p class="leaveMsgFileName" title="{{=it.filename}}{{=it.extension}}">{{=it.filename}}{{=it.extension}}</p><p class="leaveMsgFilesize">({{=it.filesize}})</p><p class="leaveMsgProcessWidely"><span class="js-leaveMsgProcess{{=it.date}} leaveMsgProcess"></span></p><p class="fileTip">{{=it.languageText.T0084}}</p><span class="leaveMsgFileClose js-leaveMsgFileClose{{=it.date}}"></span></div>',j='<div class="js-leaveMsgFileStyle leaveMsgFileStyle js-leaveMsgFile{{=it.date}}"><p class="leaveMsgFileName" title="{{=it.filename}}{{=it.extension}}">{{=it.filename}}{{=it.extension}}</p><p class="ie-uploadLoading">{{=it.languageText.T0083}}</p><p class="fileTip">{{=it.languageText.T0084}}</p><span class="leaveMsgFileClose js-leaveMsgFileClose{{=it.date}}"></span></div>',T='{{if(it.items.length>0){}}{{ for(var i=0;i<it.items.length;i++){ }}<li class="js-classDropdownLi js-classOrderList" data-nodeFlag="{{=it.items[i].nodeFlag}}" dataId="{{=it.items[i].typeId}}" data-key="classifyByPid" title="{{=it.items[i].typeName||""}}">{{=it.items[i].typeName}}{{if(it.items[i].nodeFlag){}}<span class="firstIcon"></span>{{}}}</li>{{ } }}{{ }else{ }} <li>空</li>{{ } }}',b='<div class="capture-outer"><h5 style="color:red">建议使用微信或QQ的截图功能截图后，直接粘贴到对话框。</h5><h5>您可按照以下步骤下载截图插件：</h5><ol><li><h6>下载地址</h6><div class="capture-text">Windows系统下载qq截图插件程序<a href="https://img.sobot.com/tools/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7-win.exe" target="_blank">点击此处</a></div><div class="capture-text">Mac系统下载qq截图插件程序<a href="https://img.sobot.com/tools/%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7-mac.dmg" target="_blank">点击此处</a></div></li><li><h6>完成下载后，请找到程序所在文件夹，然后按照下面链接的方法设置截图快捷键</h6><div class="capture-text">Windows系统下 <a href="https://jingyan.baidu.com/article/2fb0ba408a1e1300f2ec5f03.html" target="_blank">安装设置方法</a></div><div class="capture-text">Mac系统下 <a href="https://jingyan.baidu.com/article/3d69c5514e44a3f0ce02d751.html" target="_blank">安装设置方法</a></div></li><li><h6>完成上述步骤后，即可使用。</h6></li>',I='<ul class="respInfoList js-respInfoList">{{for(var i=0;i<it.respInfoList.length;i++){}}{{if(i<6){}}<li class="js-respInfoBtn" title="{{=it.respInfoList[i].question}}" data-docid="{{=it.respInfoList[i].docId}}">{{=it.respInfoList[i].highlight}}</li>{{}}}{{}}}</ul>',w='<div><div class="switchRobotlayer js-switchRobotlayer"></div><div class="switchRobot js-switchRobot"><div class="js-switchRobotHeader switchRobotHeader"><p class="title">{{=it.languageText.T0140}}</p><span class="close js-close"></span></div><div class="switchRobotBody js-switchRobotBody"><ul class="robotList">{{for(var i=0;i<it.list.length;i++){}}{{if(it.list[i].currentRobot){}}<li class="js-switchRobot currentRobot js-currentRobot"><a href="{{=it.list[i].newLink}}">{{=it.list[i].operationRemark}}</a></li>{{}else{}}<li class="js-switchRobotEle"><a href="{{=it.list[i].newLink}}">{{=it.list[i].operationRemark}}</a></li>{{}}}{{}}}</ul></div></div></div>';a.captureDialogTemplate=b,a.sobotEvaluateOne_selfHtml=r,a.sobotEvaluateTwo_selfHtml=l,a.humanOne_selfHtml=c,a.humanTwo_selfHtml=d,a.evaluateFooter_selfHtml=u,a.leaveMessageBtn=f,a.leaveMessageEndBtn=p,a.evamsgHtml=g,a.evamsgHtml2=v,a.waitingUploadImg=m,a.tranfiletype=s,a.fileImage=n,a.uploading=o,a.AlertTemplate=h,a.leaveMsgFileStyle=y,a.IframeleaveMsgFileStyle=j,a.classifyOrderList=T,a.respInfoList=I,a.switchRobotTemplete=w,t.exports=a},{}],57:[function(e,t,i){function a(t,i,a,s){var n=e("../../../common/util/listener.js"),o=e("../../../common/util/msgReminder.js"),r={},l=e("../util/modal/alert.js"),c=e("./fileType.json"),d=e("../util/showTip.js"),u=s.language.text,f=e("./fileTypeIcon.json"),p=e("./template.js"),m=function(){$node=$(t),$uploadBtn=$(".js-upload")},g=s.userInfo.color?s.userInfo.color:s.apiConfig.color;o.clear();var v=function(e,t){j(e,t)},h=function(e){for(var t=e.substring(e.indexOf(":")+1,e.indexOf(";")),i=e.substring(e.indexOf(",")+1),a=atob(i),s=new Array(a.length),n=0;n<a.length;n++)s[n]=a.charCodeAt(n);var o=new Uint8Array(s),r=new Blob([o],{type:t});return r},y=function(e,t,i){var a=e.getAsFile();if(a&&"image/png"==a.type){var n=new FormData,o=new FileReader;o.onload=function(e){var a=!1,o=e.target.result,r=h(o);n.append("file",r),n.append("type","paste"),n.append("pid",s.apiInit.pid),n.append("countTag",1),n.append("source",0);var c="image",d="智齿科技",u=".png",f=new l({title:"确认发送图片？",text:'<img src="'+e.target.result+'">',okText:"发送",cancelText:"取消",OK:function(){a||(a=!0,T(t,i,u,d,c,r))}});f.show(),$(".js-ok-btn").css({background:g,color:"#fff"})},o.readAsDataURL(a)}},j=function(e,t){if(a.FormData){var i=$uploadBtn[0],s=$uploadBtn.val(),n=s.substr(s.lastIndexOf(".")),o=s.substring(s.lastIndexOf("\\")+1,s.lastIndexOf(".")),r=c[n],l=f[r];if(b(n,o)){var d=w(n,o),u=i.files[0];T(e,t,n,o,r,u,l,d)}$uploadBtn.val("")}else I(e,t)},T=function(e,t,i,a,o,r,l,c){var f=+new Date,p=e+f,m=new XMLHttpRequest,g=new FormData,v=!1;if("image"===o){m.open("post","/chat/webchat/fileuploadBase64.action");var h=new FileReader;h.readAsDataURL(r),h.onload=function(e){var t=e.target.result;g.append("sysNum",s.sysNum),g.append("base64",t),n.trigger("sendArea.createUploadImg",{result:t,date:f,token:p}),m.send(g)},n.on("leftMsg.closeUploadImg",function(){v=!0,m.abort()}),m.onreadystatechange=function(s){if(4==s.target.readyState)if(200==s.target.status){var r=JSON.parse(s.target.response).url,f=JSON.parse(s.target.response).filesize;if(0==f)return void d.show(u.T0082);try{n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:r,filetype:o,filename:a,extension:i,fileIcon:l,date:c,dateuid:p})}catch(m){}}else{var g={result:"ImgSendFail",msgId:p};n.trigger("sendArea.msgresult",g)}}}else{var y=r.size,j=!1;if(y>20971520)return void d.show(u.T0082);y<1024?y+="B":y=y<1048576?(y/1024).toFixed(2)+"KB":(y/1048576).toFixed(2)+"M",g.append("file",r),g.append("type","msg"),g.append("pid",s.apiInit.pid),g.append("countTag",1),g.append("source",0),m.open("post","/chat/webchat/fileupload.action");var h=new FileReader;h.readAsDataURL(r),h.onload=function(e){n.trigger("sendArea.createUploadFile",{filename:a,extension:i,filetype:o,filesize:y,date:f,token:p}),m.send(g)},n.on("listMsg.closeUploadFile",function(){j=!0,m.abort()}),m.onreadystatechange=function(s){if(4==s.target.readyState)if(200==s.target.status){var r=JSON.parse(s.target.response).url,d=JSON.parse(s.target.response).filesize;if(0==d)return;try{n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:r,filetype:o,filename:a,filesize:y,extension:i,fileIcon:l,date:c,dateuid:p})}catch(u){}}else j||n.trigger("sendArea.uploadFileFail",{dateuid:p})},m.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total),i=t.toString(),s={percentage:i,token:p,filename:a};n.trigger("sendArea.uploadFileProcess",s)}},!1)}},b=function(e,t){var i="";if(i=/^(.eml|.msb|.ssu|.SSU|.bmp|.swj|.jpg|.JPG|.jpeg|.JPEG|.png|.PNG|.gif|.GIF|.txt|.TXT|.DOC|.doc|.docx|.DOCX|.pdf|.PDF|.ppt|.PPT|.pptx|.PPTX|.xls|.XLS|.xlsx|.XLSX|.RAR|.rar|.zip|.ZIP|.mp3|.MP3|.mp4|.MP4|.wma|.WMA|.wmv|.WMV|.rmvb|.RMVB)$/,i.test(e))return!0;var a={type:"system",status:"uploadFileError",data:{content:"不能上传"+e+"格式的文件"}};return n.trigger("sendArea.sendAreaSystemMsg",a),!1},I=function(e,t){var i=$node.find(".js-fileinfo");i.find('input[name="pid"]').val(s.apiInit.pid);var a=$uploadBtn.val(),o=a.substr(a.lastIndexOf(".")),r=a.substring(a.lastIndexOf("\\")+1,a.lastIndexOf(".")),l=c[o],d=f[l],u=+new Date,p=e+u;if(b(o,r)){var m=w(o,r),g="iframe"+m;"image"===l?n.trigger("sendArea.createUploadImg",{result:"上传中...",date:u,token:p,browserVersion:"ie-"}):n.trigger("sendArea.createUploadFile",{filename:r,extension:o,filetype:l,date:u,token:p,browserVersion:"ie-"}),i.attr("target",g),i.attr("action","/chat/webchat/fileupload.action");var v=$('<iframe id="'+g+'" style="display:none;height:1000px;width:500px;" name="'+g+'" src="about:blank;"></iframe>');v.on("load",function(){var i=v[0],a=i.contentWindow.document.getElementsByTagName("body")[0].innerHTML;if(a){var s=JSON.parse(a);s.filesize===!1?(alert("文件太大，上传失败"),n.trigger("sendArea.uploadFileFail",{uid:e,cid:t,dateuid:p,browserVersion:"ie-"})):n.trigger("sendArea.uploadImgUrl",{uid:e,cid:t,url:s.url,filetype:l,filename:r||"",filesize:s.filesize,extension:o||"",fileIcon:d||"",date:m,dateuid:p,browserVersion:"ie-"})}}),$(document.body).append(v),i.submit()}$uploadBtn.val("")},w=function(e,t){var i=+new Date,a={filename:t,extension:e,date:i},s=doT.template(p.uploading)(a);return $node.find(".scrollBox").append(s),i},x=function(){},F=function(){m(),x(),d=d(s)};return F(),r.onFormDataPasteHandler=y,r.onChangeHandler=v,r}t.exports=a},{"../../../common/util/listener.js":32,"../../../common/util/msgReminder.js":35,"../util/modal/alert.js":65,"../util/showTip.js":70,"./fileType.json":50,"./fileTypeIcon.json":51,"./template.js":56}],58:[function(e,t,i){var a={},s=function(e){return e>=10?e+"":"0"+e},n=function(e){if(Object.prototype.toString.call(e).indexOf("Date")<0)throw"param error";var t=e.getHours(),i=e.getMinutes(),a=e.getSeconds(),n=[s(t),s(i),s(a)];return n.join(":")},o=function(e,t){var i,a=new Date,s=Math.abs(a-new Date(e.substr(0,e.indexOf(" "))))/1e3/60/60/24;e=e.replace(/-/g,"/");var n=s<=1?0:s>1&&s<=2?1:2,o=e.substring(0,e.lastIndexOf(":")),r=e.substring(e.indexOf(" "),e.lastIndexOf(":"));switch(n){case 0:i=t.T0011+r;break;case 1:i=t.T0013+r;break;case 2:i=o}return i};a.getTime=n,a.formatTime=o,t.exports=a},{}],59:[function(e,t,i){var a={};a.emojiTip=["u1F60A","u1F60B","u1F60C","u1F60D","u1F60E","u1F60F","u1F61A","u1F61C","u1F61D","u1F61E","u1F61F","u1F62A","u1F62B","u1F62C","u1F62D","u1F62E","u1F600","u1F601","u1F602","u1F603","u1F605","u1F606","u1F607","u1F608","u1F609","u1F611","u1F612","u1F613","u1F614","u1F615","u1F616","u1F618","u1F621","u1F622","u1F623","u1F624","u1F628","u1F629","u1F630","u1F631","u1F632","u1F633","u1F634","u1F635","u1F636","u1F637","u1F648","u1F649","u1F680","u2B50","u23F0","u23F3","u26A1","u26BD","u26C4","u26C5","u261D","u263A","u270A","u270B","u270C","u270F","u2600","u2601","u2614","u2615","u2744","u1F3A4","u1F3B2","u1F3B5","u1F3C0","u1F3C2","u1F3E1","u1F004","u1F4A1","u1F4A2","u1F4A3","u1F4A4","u1F4A9","u1F4AA","u1F4B0","u1F4DA","u1F4DE","u1F4E2","u1F6AB","u1F6BF","u1F30F","u1F33B","u1F35A","u1F36B","u1F37B","u1F44C","u1F44D","u1F44E","u1F44F","u1F46A","u1F46B","u1F47B","u1F47C","u1F47D","u1F47F","u1F48A","u1F48B","u1F48D","u1F52B","u1F64A","u1F64F","u1F319","u1F332","u1F339","u1F349","u1F356","u1F366","u1F377","u1F381","u1F382","u1F384","u1F389","u1F393","u1F434","u1F436","u1F437","u1F451","u1F484","u1F494","u1F525","u1F556"],a.emojiSymbolTip=["😊","😋","😌","😍","😎","😏","😚","😜","😝","😞","😟","😪","😫","😬","😭","😮","😀","😁","😂","😃","😅","😆","😇","😈","😉","😑","😒","😓","😔","😕","😖","😘","😡","😢","😣","😤","😨","😩","😰","😱","😲","😳","😴","😵","😶","😷","🙈","🙉","🚀","⭐","⏰","⏳","⚡","⚽","⛄","⛅","☝","☺","✊","✋","✌","✏","☀","☁","☔","☕","❄","🎤","🎲","🎵","🏀","🏂","🏡","🀄","💡","💢","💣","💤","💩","💪","💰","📚","📞","📢","🚫","🚿","🌏","🌻","🍚","🍫","🍻","👌","👍","👎","👏","👪","👫","👻","👼","👽","👿","💊","💋","💍","🔫","🙊","🙏","🌙","🌲","🌹","🍉","🍖","🍦","🍷","🎁","🎂","🎄","🎉","🎓","🐴","🐶","🐷","👑","💄","💔","🔥","🕖"],a.emojiReg=/(😊|😋|😌|😍|😎|😏|😚|😜|😝|😞|😟|😪|😫|😬|😭|😮|😀|😁|😂|😃|😅|😆|😇|😈|😉|😑|😒|😓|😔|😕|😖|😘|😡|😢|😣|😤|😨|😩|😰|😱|😲|😳|😴|😵|😶|😷|🙈|🙉|🚀|⭐|⏰|⏳|⚡|⚽|⛄|⛅|☝|☺|✊|✋|✌|✏|☀|☁|☔|☕|❄|🎤|🎲|🎵|🏀|🏂|🏡|🀄|💡|💢|💣|💤|💩|💪|💰|📚|📞|📢|🚫|🚿|🌏|🌻|🍚|🍫|🍻|���|👌|👍|👎|👏|👪|👫|👻|👼|👽|👿|💊|💋|💍|🔫|🙊|🙏|🌙|🌲|🌹|🍉|🍖|🍦|🍷|🎁|🎂|🎄|🎉|🎓|🐴|🐶|🐷|👑|💄|💔|🔥|🕖||||||||||||||||||||)/g,a.emojiReg2=/(😊|😋|😌|😍|😎|😏|😚|😜|😝|😞|😟|😪|😫|😬|😭|😮|😀|😁|😂|😃|😅|😆|😇|😈|😉|😑|😒|😓|😔|😕|😖|😘|😡|😢|😣|😤|😨|😩|😰|😱|😲|😳|😴|😵|😶|😷|🙈|🙉|🚀|⭐|⏰|⏳|⚡|⚽|⛄|⛅|☝|☺|✊|✋|✌|✏|☀|☁|☔|☕|❄|🎤|🎲|🎵|🏀|🏂|🏡|🀄|💡|💢|💣|💤|💩|💪|💰|📚|📞|📢|🚫|🚿|🌏|🌻|🍚|🍫|🍻|���|👌|👍|👎|👏|👪|👫|👻|👼|👽|👿|💊|💋|💍|🔫|🙊|🙏|🌙|🌲|🌹|🍉|🍖|🍦|🍷|🎁|🎂|🎄|🎉|🎓|🐴|🐶|🐷|👑|💄|💔|🔥|🕖||||||||||||||||||||)/,a.qqfaceReg=/\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:–b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/微笑|\/撇嘴|\/色|\/发呆|\/得意|\/流泪|\/害羞|\/闭嘴|\/睡|\/大哭|\/尴尬|\/发怒|\/调皮|\/呲牙|\/惊讶|\/难过|\/酷|\/冷汗|\/衰|\/骷髅|\/敲打|\/再见|\/擦汗|\/抠鼻|\/鼓掌|\/糗大了|\/坏笑|\/左哼哼|\/右哼哼|\/哈欠|\/鄙视|\/委屈|\/快哭了|\/阴险|\/亲亲|\/吓|\/可怜|\/抓狂|\/吐|\/偷笑|\/愉快|\/白眼|\/傲慢|\/饥饿|\/困|\/惊恐|\/流汗|\/憨笑|\/悠闲|\/奋斗|\/咒骂|\/疑问|\/嘘|\/晕|\/疯了|\/篮球|\/乒乓|\/咖啡|\/饭|\/猪头|\/玫瑰|\/调谢|\/嘴唇|\/爱心|\/心碎|\/蛋糕|\/闪电|\/炸弹|\/刀|\/足球|\/瓢虫|\/便便|\/月亮|\/太阳|\/礼物|\/拥抱|\/菜刀|\/西瓜|\/啤酒|\/弱|\/握手|\/胜利|\/抱拳|\/勾引|\/拳头|\/差劲|\/爱你|\/NO|\/OK|\/爱情|\/飞吻|\/跳跳|\/强|\/发抖|\/怄火|\/转圈|\/磕头|\/回头|\/跳绳|\/投降|\/激动|\/乱舞|\/献吻|\/左太极|\/右太极|\[微笑\]|\[撇嘴\]|\[色\]|\[发呆\]|\[得意\]|\[流泪\]|\[害羞\]|\[闭嘴\]|\[睡\]|\[大哭\]|\[尴尬\]|\[发怒\]|\[调皮\]|\[呲牙\]|\[惊讶\]|\[难过\]|\[酷\]|\[冷汗\]|\[衰\]|\[骷髅\]|\[敲打\]|\[再见\]|\[擦汗\]|\[抠鼻\]|\[鼓掌\]|\[糗大了\]|\[坏笑\]|\[左哼哼\]|\[右哼哼\]|\[哈欠\]|\[鄙视\]|\[委屈\]|\[快哭了\]|\[阴险\]|\[亲亲\]|\[吓\]|\[可怜\]|\[抓狂\]|\[吐\]|\[偷笑\]|\[愉快\]|\[白眼\]|\[傲慢\]|\[饥饿\]|\[困\]|\[惊恐\]|\[流汗\]|\[憨笑\]|\[悠闲\]|\[奋斗\]|\[咒骂\]|\[疑问\]|\[嘘\]|\[晕\]|\[疯了\]|\[篮球\]|\[乒乓\]|\[咖啡\]|\[饭\]|\[猪头\]|\[玫瑰\]|\[调谢\]|\[嘴唇\]|\[爱心\]|\[心碎\]|\[蛋糕\]|\[闪电\]|\[炸弹\]|\[刀\]|\[足球\]|\[瓢虫\]|\[便便\]|\[月亮\]|\[太阳\]|\[礼物\]|\[拥抱\]|\[菜刀\]|\[西瓜\]|\[啤酒\]|\[弱\]|\[握手\]|\[胜利\]|\[抱拳\]|\[勾引\]|\[拳头\]|\[差劲\]|\[爱你\]|\[NO\]|\[OK\]|\[爱情\]|\[飞吻\]|\[跳跳\]|\[强\]|\[发抖\]|\[怄火\]|\[转圈\]|\[磕头\]|\[回头\]|\[跳绳\]|\[投降\]|\[激动\]|\[乱舞\]|\[献吻\]|\[左太极\]|\[右太极\]/g,
a.qqfaceReg2=/\/::\)|\/::~|\/::B|\/::\||\/:8-\)|\/::<|\/::\$|\/::X|\/::Z|\/::'\(|\/::-\||\/::@|\/::P|\/::D|\/::O|\/::\(|\/::\+|\/:–b|\/::Q|\/::T|\/:,@P|\/:,@-D|\/::d|\/:,@o|\/::g|\/:\|-\)|\/::!|\/::L|\/::>|\/::,@|\/:,@f|\/::-S|\/:\?|\/:,@x|\/:,@@|\/::8|\/:,@!|\/:!!!|\/:xx|\/:bye|\/:wipe|\/:dig|\/:handclap|\/:&-\(|\/:B-\)|\/:<@|\/:@>|\/::-O|\/:>-\||\/:P-\(|\/::'\||\/:X-\)|\/::\*|\/:@x|\/:8\*|\/:pd|\/:<W>|\/:beer|\/:basketb|\/:oo|\/:coffee|\/:eat|\/:pig|\/:rose|\/:fade|\/:showlove|\/:heart|\/:break|\/:cake|\/:li|\/:bome|\/:kn|\/:footb|\/:ladybug|\/:shit|\/:moon|\/:sun|\/:gift|\/:hug|\/:strong|\/:weak|\/:share|\/:v|\/:@\)|\/:jj|\/:@@|\/:bad|\/:lvu|\/:no|\/:ok|\/:love|\/:<L>|\/:jump|\/:shake|\/:<O>|\/:circle|\/:kotow|\/:turn|\/:skip|\/:oY|\/:#-0|\/:hiphot|\/:kiss|\/:<&|\/:&>|\/微笑|\/撇嘴|\/色|\/发呆|\/得意|\/流泪|\/害羞|\/闭嘴|\/睡|\/大哭|\/尴尬|\/发怒|\/调皮|\/呲牙|\/惊讶|\/难过|\/酷|\/冷汗|\/衰|\/骷髅|\/敲打|\/再见|\/擦汗|\/抠鼻|\/鼓掌|\/糗大了|\/坏笑|\/左哼哼|\/右哼哼|\/哈欠|\/鄙视|\/委屈|\/快哭了|\/阴险|\/亲亲|\/吓|\/可怜|\/抓狂|\/吐|\/偷笑|\/愉快|\/白眼|\/傲慢|\/饥饿|\/困|\/惊恐|\/流汗|\/憨笑|\/悠闲|\/奋斗|\/咒骂|\/疑问|\/嘘|\/晕|\/疯了|\/篮球|\/乒乓|\/咖啡|\/饭|\/猪头|\/玫瑰|\/调谢|\/嘴唇|\/爱心|\/心碎|\/蛋糕|\/闪电|\/炸弹|\/刀|\/足球|\/瓢虫|\/便便|\/月亮|\/太阳|\/礼物|\/拥抱|\/菜刀|\/西瓜|\/啤酒|\/弱|\/握手|\/胜利|\/抱拳|\/勾引|\/拳头|\/差劲|\/爱你|\/NO|\/OK|\/爱情|\/飞吻|\/跳跳|\/强|\/发抖|\/怄火|\/转圈|\/磕头|\/回头|\/跳绳|\/投降|\/激动|\/乱舞|\/献吻|\/左太极|\/右太极|\[微笑\]|\[撇嘴\]|\[色\]|\[发呆\]|\[得意\]|\[流泪\]|\[害羞\]|\[闭嘴\]|\[睡\]|\[大哭\]|\[尴尬\]|\[发怒\]|\[调皮\]|\[呲牙\]|\[惊讶\]|\[难过\]|\[酷\]|\[冷汗\]|\[衰\]|\[骷髅\]|\[敲打\]|\[再见\]|\[擦汗\]|\[抠鼻\]|\[鼓掌\]|\[糗大了\]|\[坏笑\]|\[左哼哼\]|\[右哼哼\]|\[哈欠\]|\[鄙视\]|\[委屈\]|\[快哭了\]|\[阴险\]|\[亲亲\]|\[吓\]|\[可怜\]|\[抓狂\]|\[吐\]|\[偷笑\]|\[愉快\]|\[白眼\]|\[傲慢\]|\[饥饿\]|\[困\]|\[惊恐\]|\[流汗\]|\[憨笑\]|\[悠闲\]|\[奋斗\]|\[咒骂\]|\[疑问\]|\[嘘\]|\[晕\]|\[疯了\]|\[篮球\]|\[乒乓\]|\[咖啡\]|\[饭\]|\[猪头\]|\[玫瑰\]|\[调谢\]|\[嘴唇\]|\[爱心\]|\[心碎\]|\[蛋糕\]|\[闪电\]|\[炸弹\]|\[刀\]|\[足球\]|\[瓢虫\]|\[便便\]|\[月亮\]|\[太阳\]|\[礼物\]|\[拥抱\]|\[菜刀\]|\[西瓜\]|\[啤酒\]|\[弱\]|\[握手\]|\[胜利\]|\[抱拳\]|\[勾引\]|\[拳头\]|\[差劲\]|\[爱你\]|\[NO\]|\[OK\]|\[爱情\]|\[飞吻\]|\[跳跳\]|\[强\]|\[发抖\]|\[怄火\]|\[转圈\]|\[磕头\]|\[回头\]|\[跳绳\]|\[投降\]|\[激动\]|\[乱舞\]|\[献吻\]|\[左太极\]|\[右太极\]/,t.exports=a},{}],60:[function(e,t,i){t.exports={"😊":"u1F60A.png","😋":"u1F60B.png","😌":"u1F60C.png","😍":"u1F60D.png","😎":"u1F60E.png","😏":"u1F60F.png","😚":"u1F61A.png","😜":"u1F61C.png","😝":"u1F61D.png","😞":"u1F61E.png","😟":"u1F61F.png","😪":"u1F62A.png","😫":"u1F62B.png","😬":"u1F62C.png","😭":"u1F62D.png","😮":"u1F62E.png","😀":"u1F600.png","😁":"u1F601.png","😂":"u1F602.png","😃":"u1F603.png","😅":"u1F605.png","😆":"u1F606.png","😇":"u1F607.png","😈":"u1F608.png","😉":"u1F609.png","😑":"u1F611.png","😒":"u1F612.png","😓":"u1F613.png","😔":"u1F614.png","😕":"u1F615.png","😖":"u1F616.png","😘":"u1F618.png","😡":"u1F621.png","😢":"u1F622.png","😣":"u1F623.png","😤":"u1F624.png","😨":"u1F628.png","😩":"u1F629.png","😰":"u1F630.png","😱":"u1F631.png","😲":"u1F632.png","😳":"u1F633.png","😴":"u1F634.png","😵":"u1F635.png","😶":"u1F636.png","😷":"u1F637.png","🙈":"u1F648.png","🙉":"u1F649.png","🚀":"u1F680.png","⭐":"u2B50.png","⏰":"u23F0.png","⏳":"u23F3.png","⚡":"u26A1.png","⚽":"u26BD.png","⛄":"u26C4.png","⛅":"u26C5.png","☝":"u261D.png","☺":"u263A.png","✊":"u270A.png","✋":"u270B.png","✌":"u270C.png","✏":"u270F.png","☀":"u2600.png","☁":"u2601.png","☔":"u2614.png","☕":"u2615.png","❄":"u2744.png","🎤":"u1F3A4.png","🎲":"u1F3B2.png","🎵":"u1F3B5.png","🏀":"u1F3C0.png","🏂":"u1F3C2.png","🏡":"u1F3E1.png","🀄":"u1F004.png","💡":"u1F4A1.png","💢":"u1F4A2.png","💣":"u1F4A3.png","💤":"u1F4A4.png","💩":"u1F4A9.png","💪":"u1F4AA.png","💰":"u1F4B0.png","📚":"u1F4DA.png","📞":"u1F4DE.png","📢":"u1F4E2.png","🚫":"u1F6AB.png","🚿":"u1F6BF.png","🌏":"u1F30F.png","🌻":"u1F33B.png","🍚":"u1F35A.png","🍫":"u1F36B.png","🍻":"u1F37B.png","👌":"u1F44C.png","👍":"u1F44D.png","👎":"u1F44E.png","👏":"u1F44F.png","👪":"u1F46A.png","👫":"u1F46B.png","👻":"u1F47B.png","👼":"u1F47C.png","👽":"u1F47D.png","👿":"u1F47F.png","💊":"u1F48A.png","💋":"u1F48B.png","💍":"u1F48D.png","🔫":"u1F52B.png","🙊":"u1F64A.png","🙏":"u1F64F.png","🌙":"u1F319.png","🌲":"u1F332.png","🌹":"u1F339.png","🍉":"u1F349.png","🍖":"u1F356.png","🍦":"u1F366.png","🍷":"u1F377.png","🎁":"u1F381.png","🎂":"u1F382.png","🎄":"u1F384.png","🎉":"u1F389.png","🎓":"u1F393.png","🐴":"u1F434.png","🐶":"u1F436.png","🐷":"u1F437.png","👑":"u1F451.png","💄":"u1F484.png","💔":"u1F494.png","🔥":"u1F525.png","🕖":"u1F556.png","":"u1F600.png","":"u1F637.png","":"u1F602.png","":"u1F61D.png","":"u1F635.png","":"u1F633.png","":"u1F631.png","":"u1F614.png","":"u1F609.png","":"u1F60C.png","":"u1F612.png","":"u1F47F.png","":"u1F47B.png","":"ue437.png","":"u1F64F.png","":"u1F4AA.png","":"u1F4B0.png","":"u1F382.png","":"u1F389.png","":"u1F381.png"}},{}],61:[function(e,t,i){t.exports={"[微笑]":"weixiao","[撇嘴]":"piezui","[色]":"se","[发呆]":"fadai","[得意]":"deyi","[流泪]":"liulei","[害羞]":"haixiu","[闭嘴]":"bizui","[睡]":"shui","[大哭]":"daku","[尴尬]":"ganga","[发怒]":"fanu","[调皮]":"tiaopi","[呲牙]":"ciya","[惊讶]":"jingya","[难过]":"nanguo","[酷]":"ku","[冷汗]":"lenghan","[抓狂]":"zhuakuang","[吐]":"tu","[偷笑]":"touxiao","[愉快]":"yukuai","[白眼]":"baiyan","[傲慢]":"aoman","[饥饿]":"jie","[困]":"kun","[惊恐]":"jingkong"}},{}],62:[function(e,t,i){t.exports={"/::)":"weixiao","/::~":"piezui","/::B":"se","/::|":"fadai","/:8-)":"deyi","/::<":"liulei","/::$":"haixiu","/::X":"bizui","/::Z":"shui","/::'(":"daku","/::-|":"ganga","/::@":"fanu","/::P":"tiaopi","/::D":"ciya","/::O":"jingya","/::(":"nanguo","/::+":"ku","/:–b":"lenghan","/:,@!":"shuai","/:!!!":"kulou","/::Q":"zhuakuang","/::T":"tu","/:,@P":"touxiao","/:,@-D":"yukuai","/::d":"baiyan","/:,@o":"aoman","/::g":"jie","/:|-)":"kun","/::!":"jingkong","/::L":"liuhan","/::>":"hanxiao","/::,@":"youxian","/:,@f":"fendou","/::-S":"zhouma","/:?":"yiwen","/:,@x":"xu","/:,@@":"yun","/::8":"fengl","/:xx":"qiaoda","/:bye":"zaijian","/:wipe":"cahan","/:dig":"koubi","/:handclap":"guzhang","/:&-(":"qiudal","/:B-)":"huaixiao","/:<@":"zuohengheng","/:@>":"youhengheng","/::-O":"haqian","/:>-|":"bishi","/:P-(":"weiqu","/:X-)":"yinxian","/::'|":"kuaikul","/::*":"qinqin","/:@x":"xia","/:8*":"kelian","/:pd":"caidao","/:<W>":"xigua","/:beer":"pijiu","/:basketb":"lanqiu","/:oo":"pingpang","/:coffee":"kafei","/:eat":"fan","/:pig":"zhutou","/:rose":"meigui","/:fade":"diaoxie","/:showlove":"zuichun","/:heart":"aixin","/:break":"xinsui","/:cake":"dangao","/:li":"shandian","/:bome":"zhadan","/:kn":"dao","/:footb":"zuqiu","/:ladybug":"piaochong","/:shit":"bianbian","/:moon":"yueliang","/:sun":"taiyang","/:gift":"liwu","/:hug":"yongbao","/:strong":"qiang","/:weak":"ruo","/:share":"woshou","/:v":"shengli","/:@)":"baoquan","/:jj":"gouyin","/:@@":"quantou","/:bad":"chajin","/:lvu":"aini","/:no":"no_1","/:ok":"ok_1","/:love":"aiqing","/:<L>":"feiwen","/:jump":"tiaotiao","/:shake":"fadou","/:<O>":"ouhuo","/:circle":"zhuanquan","/:kotow":"ketou","/:turn":"huitou","/:skip":"tiaosheng","/:oY":"touxiang","/:#-0":"jidong","/:hiphot":"luanwu","/:kiss":"xianwen","/:<&":"zuotaiji","/:&>":"youtaiji","/微笑":"weixiao","/撇嘴":"piezui","/色":"se","/发呆":"fadai","/得意":"deyi","/流泪":"liulei","/害羞":"haixiu","/闭嘴":"bizui","/睡":"shui","/大哭":"daku","/尴尬":"ganga","/发怒":"fanu","/调皮":"tiaopi","/呲牙":"ciya","/惊讶":"jingya","/难过":"nanguo","/酷":"ku","/冷汗":"lenghan","/衰":"shuai","/骷髅":"kulou","/敲打":"qiaoda","/再见":"zaijian","/擦汗":"cahan","/抠鼻":"koubi","/鼓掌":"guzhang","/糗大了":"qiudal","/坏笑":"huaixiao","/左哼哼":"zuohengheng","/右哼哼":"youhengheng","/哈欠":"haqian","/鄙视":"bishi","/委屈":"weiqu","/快哭了":"kuaikul","/阴险":"yinxian","/亲亲":"qinqin","/吓":"xia","/可怜":"kelian","/抓狂":"zhuakuang","/吐":"tu","/偷笑":"touxiao","/愉快":"yukuai","/白眼":"baiyan","/傲慢":"aoman","/饥饿":"jie","/困":"kun","/惊恐":"jingkong","/流汗":"liuhan","/憨笑":"hanxiao","/悠闲":"youxian","/奋斗":"fendou","/咒骂":"zhouma","/疑问":"yiwen","/嘘":"xu","/晕":"yun","/疯了":"fengl","/篮球":"lanqiu","/乒乓":"pingpang","/咖啡":"kafei","/饭":"fan","/猪头":"zhutou","/玫瑰":"meigui","/调谢":"diaoxie","/嘴唇":"zuichun","/爱心":"aixin","/心碎":"xinsui","/蛋糕":"dangao","/闪电":"shandian","/炸弹":"zhadan","/刀":"dao","/足球":"zuqiu","/瓢虫":"piaochong","/便便":"bianbian","/月亮":"yueliang","/太阳":"taiyang","/礼物":"liwu","/拥抱":"yongbao","/菜刀":"caidao","/西瓜":"xigua","/啤酒":"pijiu","/弱":"ruo","/握手":"woshou","/胜利":"shengli","/抱拳":"baoquan","/勾引":"gouyin","/拳头":"quantou","/差劲":"chajin","/爱你":"aini","/NO":"no_1","/OK":"ok_1","/爱情":"aiqing","/飞吻":"feiwen","/跳跳":"tiaotiao","/强":"qiang","/发抖":"fadou","/怄火":"ouhuo","/转圈":"zhuanquan","/磕头":"ketou","/回头":"huitou","/跳绳":"tiaosheng","/投降":"touxiang","/激动":"jidong","/乱舞":"luanwu","/献吻":"xianwen","/左太极":"zuotaiji","/右太极":"youtaiji","[微笑]":"weixiao","[撇嘴]":"piezui","[色]":"se","[发呆]":"fadai","[得意]":"deyi","[流泪]":"liulei","[害羞]":"haixiu","[闭嘴]":"bizui","[睡]":"shui","[大哭]":"daku","[尴尬]":"ganga","[发怒]":"fanu","[调皮]":"tiaopi","[呲牙]":"ciya","[惊讶]":"jingya","[难过]":"nanguo","[酷]":"ku","[冷汗]":"lenghan","[衰]":"shuai","[骷髅]":"kulou","[敲打]":"qiaoda","[再见]":"zaijian","[擦汗]":"cahan","[抠鼻]":"koubi","[鼓掌]":"guzhang","[糗大了]":"qiudal","[坏笑]":"huaixiao","[左哼哼]":"zuohengheng","[右哼哼]":"youhengheng","[哈欠]":"haqian","[鄙视]":"bishi","[委屈]":"weiqu","[快哭了]":"kuaikul","[阴险]":"yinxian","[亲亲]":"qinqin","[吓]":"xia","[可怜]":"kelian","[抓狂]":"zhuakuang","[吐]":"tu","[偷笑]":"touxiao","[愉快]":"yukuai","[白眼]":"baiyan","[傲慢]":"aoman","[饥饿]":"jie","[困]":"kun","[惊恐]":"jingkong","[流汗]":"liuhan","[憨笑]":"hanxiao","[悠闲]":"youxian","[奋斗]":"fendou","[咒骂]":"zhouma","[疑问]":"yiwen","[嘘]":"xu","[晕]":"yun","[疯了]":"fengl","[篮球]":"lanqiu","[乒乓]":"pingpang","[咖啡]":"kafei","[饭]":"fan","[猪头]":"zhutou","[玫瑰]":"meigui","[调谢]":"diaoxie","[嘴唇]":"zuichun","[爱心]":"aixin","[心碎]":"xinsui","[蛋糕]":"dangao","[闪电]":"shandian","[炸弹]":"zhadan","[刀]":"dao","[足球]":"zuqiu","[瓢虫]":"piaochong","[便便]":"bianbian","[月亮]":"yueliang","[太阳]":"taiyang","[礼物]":"liwu","[拥抱]":"yongbao","[菜刀]":"caidao","[西瓜]":"xigua","[啤酒]":"pijiu","[弱]":"ruo","[握手]":"woshou","[胜利]":"shengli","[抱拳]":"baoquan","[勾引]":"gouyin","[拳头]":"quantou","[差劲]":"chajin","[爱你]":"aini","[NO]":"no_1","[OK]":"ok_1","[爱情]":"aiqing","[飞吻]":"feiwen","[跳跳]":"tiaotiao","[强]":"qiang","[发抖]":"fadou","[怄火]":"ouhuo","[转圈]":"zhuanquan","[磕头]":"ketou","[回头]":"huitou","[跳绳]":"tiaosheng","[投降]":"touxiang","[激动]":"jidong","[乱舞]":"luanwu","[献吻]":"xianwen","[左太极]":"zuotaiji","[右太极]":"youtaiji"}},{}],63:[function(require,module,exports){!function(){var that={},parse=function(str){var obj;try{obj=eval("("+str+")")}catch(e){}return obj};that.parse=parse,window.JSON||(window.JSON=that)}()},{}],64:[function(e,t,i){var a=e("./promise.js"),s={},n={},o=function(e,t){var t=t||new a;return setTimeout(function(){return n[e]?a.when(function(){var i=n[e];setTimeout(function(){t.resolve(i)},0)}):void $.ajax({url:e,async:!0,dataType:"text",type:"get"}).success(function(i){t.resolve(i),n[e]=i}).fail(function(e){t.reject(e)})},0),t};s.load=o;var r=function(){return s};t.exports=r},{"./promise.js":68}],65:[function(e,t,i){function a(t){var i=e("./dialog"),a=this,s=$.extend({text:"TEXT",info:"",OK:function(e){}},t);i.call(this,s);var n=function(){var t=e("./template.js"),i=doT.template(t.zcAlertTemplate)(s);a.setInner(i)};n()}t.exports=a},{"./dialog":66,"./template.js":67}],66:[function(e,t,i){function a(t){var i,a,s=e("./template.js"),n=this,o=$.extend({okText:"确定",title:"提示",inner:!1,width:322,footer:!0,OK:function(){}},t),r=!0,l=function(){i=$(s.zcShadowLayer);var e=doT.template(s.zcModalOuter)(o);a=$(e),setTimeout(function(){a.find("input").focus()},1)},c=function(e){a.find(".modal-body").append($(e))},d=function(){i.find(".fade.in").animate({opacity:0},300,function(){setTimeout(function(){i.remove()},100)})},u=function(){i.on("click",d),a.on("click",function(e){e.stopPropagation()}),a.delegate(".bootbox-close-button","click",d),a.delegate(".js-cancel-btn","click",function(e){o.cancel&&o.cancel(n),d()}),a.delegate(".js-ok-btn","click",function(e){d(),o.OK&&o.OK(n)}),a.on("keydown",function(e){r&&(r=!1,13==e.keyCode&&(d(),o.OK&&o.OK(n)),setTimeout(function(){r=!0},3e3))}),$(window).resize(function(){m()})},f=function(){return a[0]},p=function(){u(),i.append(a),$(".js-mainBox").append(i),m(),i.find(".fade.in").animate({opacity:1},300)},m=function(){var e=($(".js-mainBox").width()-322)/2,t=($(".js-mainBox").height()-416)/2;$(".modal-dialog").css({"margin-left":e,"margin-top":t})},g=function(){l()};g(),this.getOuter=f,this.setInner=c,this.show=p,this.hide=d}t.exports=a},{"./template.js":67}],67:[function(e,t,i){var a={},s='<div class="zc-shadow-layer"></div>',n='<div class="bootbox  fade in" tabindex="-1" role="dialog" aria-hidden="false" style="display: block;outline:none;"><div class="modal-dialog" style="width:{{=it.width}}px;"><div class="modal-content"><div class="modal-header"><span type="button" class="bootbox-close-button close" data-dismiss="modal" aria-hidden="true"></span><h4 class="modal-title">{{=it.title || "提示"}}</h4></div><input style="position:absolute;left:0;top:0;z-index:-1;outline:none"/><div class="modal-body"></div>{{ if((it.footer !== false) ) { }}<div class="modal-footer"><button class="btn btn-success js-ok-btn">{{=it.okText || "确定"}}</button><button class="btn btn-danger js-cancel-btn">{{=it.cancelText || "取消"}}</button></div>{{ } }}</div></div></div>',o='<div class="modal-alert-content"><p class="large">{{=it.text}}</p><p>{{=it.info}}</p></div>';a.zcAlertTemplate=o,a.zcModalOuter=n,a.zcShadowLayer=s,t.exports=a},{}],68:[function(e,t,i){function a(){var e=[];this.resolve=function(t){var i=e.shift();i&&i.success&&"function"==typeof i.success&&i.success(t,this)},this.reject=function(t){var i=e.shift();i&&i.fail&&"function"==typeof i.fail&&i.fail(t,this)},this.then=function(t,i){return e.push({success:t,fail:i}),this}}a.when=function(e){return e()},t.exports=a},{}],69:[function(e,t,i){function a(t,i){var a,s,n,o,r,l,c,d,u,f=e("../../../common/util/listener.js"),p=e("./load.js")(),m=e("./face/weixin.json"),g=e("./face/weixinsymbol.json"),v=(e("./unicode.js"),e("./face/Reg.js")),h=e("./face/emojiImagePath.json"),y=e("../config/config.json"),j={},T="",b="",I="",w="",x="",F="",k="",C="",L="img/qqarclist/",A="img/emoji/",M=function(){"block"===a.css("display")?P():($("#faceBox").length<=0&&p.load(y.basePath+"/views/sendArea/qqFace.html").then(function(e){var t=doT.template(e)({tip:T,path:L});s.append(t)}),S())},S=function(){a.css("display","block"),o.css("background-position","-46px 0px")},P=function(){a.css("display","none"),o.css("background-position","")},D=function(){var e=$(this).find(".js-faceIco").attr("data-src");f.trigger("sendArea.gotoxy",e)},N=function(e){var t="";if(""!==e&&!e)return null;if(t=e.match(x))for(var i=0;i<t.length;i++){var a=F.exec(e),s=b[a[0]];e=e.replace(F,'<img class="zc-face js-zcFace" src="'+L+s+'.png" />')}var n=e.match(k);if(n)for(var i=0,o=n.length;i<o;i++){var a=C.exec(e),s=h[a[0]];e=e.replace(a[0],'<img class="zc-face zc-emoji" src="'+A+s+'" />')}return e},_=function(){var e=$(this).attr("data-tab");d.hide(),$(e).show(),$(this).addClass("active").siblings().removeClass("active")},B=function(){T=m,b=g,I=v.emojiTip,w=v.emojiSymbolTip,x=v.qqfaceReg,F=v.qqfaceReg2,k=v.emojiReg,C=v.emojiReg2;for(var e in T){var t=new Image;t.src=L+T[e]+".png"}},O=function(){a=$(".js-group"),s=$(".js-faceGroup"),n=$(".js-emojiGroup"),o=$(".js-emotion"),r=$(".js-inputMsg"),l=$(".js-faceIco"),c=$(".js-icoLi"),d=$(".js-groupChildren"),u=$(".js-faceIcoLi")},R=function(){o.on("click",M),c.on("click",_),$(document.body).delegate(".js-faceIcoLi","click",D),$(document.body).on("click",function(e){var t=!1,i=0;e.target.classList?i=e.target.classList.length:t=!0;for(var a=0;a<i;a++)"js-emotion"===e.target.classList[a]&&(t=!0);t||P()})},z=function(){O(),B(),R()};return z(),j.show=S,j.hide=P,j.analysis=N,j}var s,n=function(e,t){return s||(s=a(e,t)),s};t.exports=n},{"../../../common/util/listener.js":32,"../config/config.json":37,"./face/Reg.js":59,"./face/emojiImagePath.json":60,"./face/weixin.json":61,"./face/weixinsymbol.json":62,"./load.js":64,"./unicode.js":72}],70:[function(e,t,i){function a(t){var i=e("./template.js"),a=(t.language.lan,t.language.text,{}),s=function(e){var t={};t={text:e};var a=doT.template(i.showTip)(t);$(".js-mainBox").append(a),r(),o(),n()},n=function(){setTimeout(function(){$showTip.remove()},3e3)},o=function(){var e=($(".js-mainBox").height()-$(".js-showTip").height())/2,t=($(".js-mainBox").width()-$(".js-showTip").width())/2;$showTip.css({top:e,left:t-10})},r=function(){$showTip=$(".js-showTip")},l=function(){},c=function(){l()};return c(),a.show=s,a}t.exports=a},{"./template.js":71}],71:[function(e,t,i){var a={},s='<span unselectable="on" class="faceIco js-faceIco faceIco{{=it.flag}}" data-src="{{=it.a}}" /></span><span class="backDelete"></span>',n='<span unselectable="on" class="faceIco js-faceIco faceIco{{=it.flag}}" data-src="{{=it.a}}" /></span>',o='<div class="js-showTip showTip"><p class="showTipText">{{=it.text}}</p></div>';a.faceIcoStr=s,a.faceIcoStr2=n,a.showTip=o,t.exports=a},{}],72:[function(e,t,i){var a={};a.parse=function(e){return e=e.replace(/\\/g,"%"),unescape(e)},a.stringify=function(e){for(var t=[],i=e.length,a=0;a<i;++a)t[a]=("00"+e.charCodeAt(a).toString(16)).slice(-4);return e?"\\u"+t.join("\\u"):""},t.exports=a},{}]},{},[39]);